import{l as R,y as M,r as a,j as e,A as x,m as i,X as T,C as P,W as y}from"./index-DgPxFht0.js";import{C as D,N as F,M as Q}from"./navigation-B6r4nlZ3.js";import{S as $}from"./search-B9svHAOg.js";const G=({isOpen:l,onClose:c})=>{R(l);const{requestLocation:j,updateManualLocation:w,displayName:q,searchLocation:N}=M(),[h,m]=a.useState(!1),[u,r]=a.useState(null),[p,n]=a.useState(""),[v,g]=a.useState(""),[f,o]=a.useState([]),[S,b]=a.useState(!1),d=a.useRef(null),k=a.useRef(null);a.useEffect(()=>{l&&(r(null),n(""),g(""),o([]),setTimeout(()=>k.current?.focus(),400))},[l]);const C=async()=>{m(!0),r(null),n("");try{(await j())?.isFallback?r("Connection timeout. Signal lost."):(n("Coordinates Locked"),setTimeout(()=>c(),1e3))}catch{r("Logic error. Beacon failed.")}finally{m(!1)}},E=t=>{const s=t.target.value;if(g(s),r(null),d.current&&clearTimeout(d.current),s.trim().length<3){o([]);return}d.current=setTimeout(()=>{A(s.trim())},500)},A=async t=>{b(!0);try{const s=await N(t);o(s)}catch{r("Search failed. Check network link."),o([])}finally{b(!1)}},L=t=>{w(t.lat,t.lng),n(`Nexus set to ${t.city||"Position"}`),setTimeout(()=>c(),800)};return e.jsx(x,{children:l&&e.jsxs("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center p-4",children:[e.jsx(i.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/80 backdrop-blur-xl",onClick:c}),e.jsxs(i.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"relative w-full max-w-[440px] max-h-[85vh] bg-white dark:bg-[#1C1C1E] rounded-[3rem] border border-slate-100 dark:border-white/5 shadow-2xl flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-8 pb-4 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-indigo-500/10 flex items-center justify-center border border-indigo-500/20",children:e.jsx(D,{className:"w-6 h-6 text-indigo-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-black text-slate-900 dark:text-white uppercase tracking-tightest",children:"Qibla Nexus"}),e.jsx("p",{className:"text-[10px] font-black text-slate-400 dark:text-[#8E8E93] uppercase tracking-[0.2em] mt-0.5",children:"Global Sync"})]})]}),e.jsx("button",{onClick:c,className:"w-10 h-10 flex items-center justify-center bg-slate-50 dark:bg-white/5 text-slate-400 dark:text-[#8E8E93] rounded-full active:scale-90 transition-all border border-transparent dark:border-white/5",children:e.jsx(T,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-8 pt-4 space-y-6",children:[e.jsxs(x,{mode:"wait",children:[u&&e.jsx(i.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"p-4 bg-rose-50 dark:bg-rose-950/20 text-rose-600 dark:text-rose-400 text-xs font-black uppercase tracking-tight rounded-2xl border border-rose-100 dark:border-rose-950/30",children:u}),p&&e.jsxs(i.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},className:"p-4 bg-emerald-500/10 text-emerald-400 text-xs font-black uppercase tracking-widest rounded-2xl border border-emerald-500/20 flex items-center gap-3",children:[e.jsx(P,{className:"w-4 h-4 shrink-0"})," ",p]})]}),e.jsxs("div",{className:"relative group",children:[e.jsx($,{className:"absolute left-5 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-300 dark:text-[#48484A] group-focus-within:text-indigo-500 transition-colors"}),e.jsx("input",{ref:k,type:"text",value:v,onChange:E,placeholder:"Sector scan (City, Country)...",className:"w-full bg-slate-50 dark:bg-white/5 border border-slate-100 dark:border-white/5 text-slate-900 dark:text-white pl-14 pr-12 py-5 rounded-[2rem] focus:outline-none focus:ring-4 focus:ring-indigo-500/10 transition-all text-sm font-bold placeholder:text-slate-300 dark:placeholder:text-[#48484A]"}),S&&e.jsx(y,{className:"absolute right-5 top-1/2 -translate-y-1/2 w-5 h-5 text-indigo-400 animate-spin"})]}),e.jsx("button",{onClick:C,disabled:h,className:"w-full group relative flex items-center justify-center gap-3 bg-indigo-600 dark:bg-white text-white dark:text-black py-5 px-4 rounded-[2rem] transition-all shadow-xl shadow-indigo-500/20 active:scale-[0.98] disabled:opacity-50",children:h?e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"w-5 h-5 animate-spin"})," Scanning Sky..."]}):e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"w-5 h-5 group-hover:rotate-45 transition-transform"})," Auto-Detect Coordinates"]})}),e.jsx("div",{className:"space-y-4",children:e.jsx(x,{children:f.length>0&&e.jsxs(i.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-3",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-400 dark:text-[#48484A] uppercase tracking-[0.3em] px-2",children:"Identified Hubs"}),e.jsx("div",{className:"space-y-2",children:f.map((t,s)=>e.jsxs("button",{onClick:()=>L(t),className:"w-full text-left px-6 py-5 bg-slate-50 dark:bg-white/5 hover:bg-white/10 dark:hover:bg-white/10 active:scale-[0.99] transition-all rounded-[2rem] flex items-center gap-4 group/item",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-white/10 dark:bg-white/5 flex items-center justify-center shrink-0 group-hover/item:bg-indigo-500 group-hover/item:text-white transition-all",children:e.jsx(Q,{className:"w-5 h-5"})}),e.jsxs("div",{className:"min-w-0 pr-4",children:[e.jsx("p",{className:"text-sm font-black text-slate-900 dark:text-white uppercase tracking-tight truncate",children:t.city||t.displayName.split(",")[0]}),e.jsx("p",{className:"text-[10px] font-bold text-slate-400 dark:text-[#48484A] mt-1 uppercase tracking-widest truncate",children:t.displayName})]})]},`${t.lat}-${s}`))})]})})}),e.jsx("div",{className:"text-center pt-8",children:e.jsx("p",{className:"text-[10px] font-black text-slate-300 dark:text-[#48484A] uppercase tracking-[0.2em] leading-relaxed",children:"Privacy Shield Active â€¢ End-to-End Celestial Sync"})})]})]})]})})};export{G as L};
