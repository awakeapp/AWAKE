import{j as e,r as a,A as P,m as O,X as I,C as R,M as S,a3 as y,o as F,a4 as H,a5 as W,a6 as A,a7 as T,H as U,p as z,K as B,a8 as K}from"./index-DEdOVx7i.js";import{T as Q,D as V}from"./TaskItem-B6MM22xK.js";import{P as X}from"./plus-CdkdsLhV.js";import{s as Y}from"./subDays-YXvPttGZ.js";import"./flame-Dn4mk5MA.js";import"./bike-DtSP5yuz.js";import"./trash-2-DKJknRaU.js";import"./circle-check-big-PtRMrZ-s.js";import"./chevron-up-DIz2Hn2q.js";import"./subMonths-CoDswvee.js";import"./isSameMonth-aB-GWjNs.js";const E=({tasks:i,onToggle:x,onDelete:g,onUpdate:p,isLocked:n,isVariant:b="default",onReschedule:f})=>i.length===0?null:e.jsx("div",{className:"space-y-3",children:i.map(m=>e.jsx(Q,{task:m,onUpdateStatus:x,isLocked:n,variant:b,onReschedule:f,onDelete:g},m.id))}),_=({isOpen:i,onClose:x,onAdd:g,initialDate:p})=>{const[n,b]=a.useState(""),[f,m]=a.useState("Work"),[k,l]=a.useState("Medium"),[u,o]=a.useState("09:00"),[r,w]=a.useState(p),[v,d]=a.useState(!1);a.useEffect(()=>{i&&(b(""),m("Work"),l("Medium"),o("09:00"),w(p||new Date().toISOString().split("T")[0]))},[i,p]);const[h,N]=a.useState(!1),j=async s=>{if(s.preventDefault(),!(!n.trim()||h)){N(!0);try{await g(n,{category:f,priority:k,time:u,date:r})}catch(D){console.error("Error in modal submission:",D)}finally{N(!1)}}};return e.jsx(P,{children:i&&e.jsxs(e.Fragment,{children:[e.jsx(O.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:x,className:"fixed inset-0 bg-slate-900/40 backdrop-blur-sm z-50 transition-opacity"}),e.jsx(O.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"fixed inset-0 z-50 flex items-center justify-center p-4 pointer-events-none",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-md rounded-2xl shadow-xl ring-1 ring-slate-900/5 pointer-events-auto overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-slate-100 dark:border-slate-800",children:[e.jsx("h2",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"New Task"}),e.jsx("button",{onClick:x,className:"p-2 text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-full transition-colors",children:e.jsx(I,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:j,className:"p-6 space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider mb-2",children:"What needs to be done?"}),e.jsx("input",{autoFocus:!0,type:"text",placeholder:"e.g., Review Q3 Operations",value:n,onChange:s=>b(s.target.value),className:"w-full text-base bg-slate-50 dark:bg-slate-800 border-none rounded-xl px-4 py-3 focus:ring-2 focus:ring-indigo-500/20 text-slate-900 dark:text-white placeholder-slate-400"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Category"}),e.jsxs("select",{value:f,onChange:s=>m(s.target.value),className:"w-full bg-slate-50 dark:bg-slate-800 border-none rounded-xl px-3 py-2.5 text-sm text-slate-700 dark:text-slate-300 focus:ring-2 focus:ring-indigo-500/20",children:[e.jsx("option",{value:"Work",children:"Work"}),e.jsx("option",{value:"Health",children:"Health"}),e.jsx("option",{value:"Personal",children:"Personal"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Priority"}),e.jsxs("select",{value:k,onChange:s=>l(s.target.value),className:"w-full bg-slate-50 dark:bg-slate-800 border-none rounded-xl px-3 py-2.5 text-sm text-slate-700 dark:text-slate-300 focus:ring-2 focus:ring-indigo-500/20",children:[e.jsx("option",{value:"Low",children:"Low"}),e.jsx("option",{value:"Medium",children:"Medium"}),e.jsx("option",{value:"High",children:"High"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Start Time"}),e.jsxs("div",{className:"relative",children:[e.jsx(R,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx("input",{type:"time",value:u,onChange:s=>o(s.target.value),className:"w-full bg-slate-50 dark:bg-slate-800 border-none rounded-xl pl-9 pr-3 py-2.5 text-sm text-slate-700 dark:text-slate-300 focus:ring-2 focus:ring-indigo-500/20"})]})]}),e.jsxs("div",{className:"space-y-2 relative",children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Date"}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{type:"button",onClick:()=>d(!v),className:"w-full bg-slate-50 dark:bg-slate-800 border-none rounded-xl pl-9 pr-3 py-2.5 text-sm text-slate-700 dark:text-slate-300 focus:ring-2 focus:ring-indigo-500/20 text-left flex items-center",children:[e.jsx(S,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx("span",{children:r?y(new Date(r),"MMM do, yyyy"):"Select date"})]}),e.jsx(P,{children:v&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-[60] bg-slate-900/20 backdrop-blur-sm sm:bg-transparent sm:backdrop-blur-none",onClick:()=>d(!1)}),e.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center pointer-events-none sm:absolute sm:inset-auto sm:top-full sm:left-0 sm:mt-2 sm:w-full",children:e.jsx("div",{className:"pointer-events-auto",children:e.jsx(V,{selectedDate:r?new Date(r):new Date,onChange:s=>{w(s.toISOString().split("T")[0]),d(!1)},minDate:new Date().toISOString().split("T")[0],onClose:()=>d(!1)})})})]})})]})]})]}),e.jsxs("div",{className:"pt-4 mt-6 border-t border-slate-100 dark:border-slate-800 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:x,disabled:h,className:"px-5 py-2.5 rounded-xl text-sm font-medium text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:!n.trim()||h,className:"px-6 py-2.5 rounded-xl text-sm font-bold text-white bg-indigo-600 hover:bg-indigo-700 shadow-lg shadow-indigo-500/20 disabled:opacity-50 disabled:shadow-none transition-all hover:scale-[1.02] active:scale-[0.98] flex items-center gap-2",children:h?"Creating...":"Create Task"})]})]})]})})]})})},oe=()=>{const{tasks:i,addTask:x,toggleTask:g,deleteTask:p,updateTask:n,isDayLocked:b,currentDateStr:f,rescheduleTask:m}=F(),k=H(),[l,u]=a.useState(()=>k.state?.initialDate?new Date(k.state.initialDate):new Date),o=y(l,"yyyy-MM-dd"),r=W(l,new Date),w=A(T(l),T(new Date)),v=b(o),d=i.filter(t=>t.date===o);d.length,d.filter(t=>t.status==="completed"||t.isCompleted).length;const h=i.filter(t=>t.status!=="completed"&&!t.isCompleted&&t.date&&A(T(new Date(t.date)),T(l))),[N,j]=a.useState(!1),s=async(t,c)=>{try{await x(t,{...c,date:c.date||o}),j(!1)}catch(C){console.error("Failed to add task from dashboard:",C),alert(`Failed to add task: ${C.message}`)}},D=t=>{t==="prev"&&u(c=>Y(c,1)),t==="next"&&u(c=>K(c,1))},M=(t,c="today")=>{m(t,c==="today"?o:c)},L=!v&&!w,[$,q]=a.useState(!1);return e.jsxs("div",{className:"space-y-6 pb-24 h-full relative",children:[e.jsx("div",{className:"flex flex-col gap-4",children:e.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-slate-900 rounded-2xl p-2 border border-slate-100 dark:border-slate-800 shadow-sm relative overflow-hidden group",children:[e.jsx("div",{className:"absolute inset-0 bg-indigo-50/30 dark:bg-indigo-900/10 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none"}),e.jsx("button",{onClick:()=>D("prev"),className:"p-3 text-slate-400 hover:text-indigo-600 hover:bg-white dark:hover:bg-slate-800 rounded-xl transition-all active:scale-95 z-10",children:e.jsx(U,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex flex-row items-center gap-1.5 sm:gap-4 relative z-10 cursor-pointer group/picker py-1",children:[e.jsx("input",{type:"date",value:o,onChange:t=>u(new Date(t.target.value)),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-20"}),e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1.5 rounded-lg group-hover/picker:bg-slate-50 dark:group-hover/picker:bg-slate-800 transition-colors",children:[e.jsx(S,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-indigo-500 opacity-60 group-hover/picker:opacity-100 transition-opacity"}),e.jsx("span",{className:z("text-sm font-bold tracking-tight whitespace-nowrap sm:hidden",r?"text-indigo-900 dark:text-indigo-100":"text-slate-700 dark:text-slate-200"),children:y(l,"MMM do")}),e.jsx("span",{className:z("text-sm font-bold tracking-tight whitespace-nowrap hidden sm:block",r?"text-indigo-900 dark:text-indigo-100":"text-slate-700 dark:text-slate-200"),children:y(l,"MMMM do, yyyy")})]}),e.jsx("div",{className:"w-px h-3 sm:h-4 bg-slate-200 dark:bg-slate-700"}),r?e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500 animate-pulse"}),e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest text-indigo-500/80 whitespace-nowrap",children:"Today"})]}):e.jsxs("div",{className:"flex items-center gap-2 pointer-events-none",children:[e.jsx("span",{className:"text-[10px] font-medium text-slate-400 uppercase tracking-wider hidden sm:block",children:y(l,"EEEE")}),e.jsx("button",{onClick:t=>{t.stopPropagation(),u(new Date)},className:"pointer-events-auto text-[10px] font-bold text-indigo-500 hover:text-indigo-600 hover:underline z-30 whitespace-nowrap",children:"BACK TO TODAY"})]})]}),e.jsx("button",{onClick:()=>D("next"),className:"p-3 text-slate-400 hover:text-indigo-600 hover:bg-white dark:hover:bg-slate-800 rounded-xl transition-all active:scale-95 z-10",children:e.jsx(B,{className:"w-5 h-5"})})]})}),L&&e.jsxs("button",{onClick:()=>j(!0),className:"w-full py-3 px-4 bg-white dark:bg-slate-900 border border-dashed border-slate-300 dark:border-slate-700 rounded-xl text-slate-400 dark:text-slate-500 text-sm font-medium hover:border-slate-400 hover:text-slate-600 transition-colors flex items-center justify-center gap-2",children:[e.jsx(X,{className:"w-4 h-4"}),"Add Task via Modal"]}),e.jsxs("div",{className:"space-y-8",children:[e.jsx("section",{children:d.length>0?e.jsx(E,{tasks:d,onToggle:g,onDelete:p,onUpdate:n,isLocked:v,onReschedule:M}):e.jsxs("div",{className:"text-center py-12 border border-dashed border-slate-200 dark:border-slate-800 rounded-2xl",children:[e.jsx(S,{className:"w-8 h-8 text-slate-300 dark:text-slate-600 mx-auto mb-3"}),e.jsxs("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:["No tasks scheduled for ",r?"today":"this day","."]}),e.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1",children:"Add tasks only if they support your routine."})]})}),h.length>0&&e.jsxs("section",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Carried Over Tasks"}),e.jsx("div",{className:"h-px flex-1 bg-slate-100 dark:bg-slate-800"})]}),e.jsx("div",{className:"opacity-80",children:e.jsx(E,{tasks:h,onToggle:g,onDelete:p,onUpdate:n,isLocked:!1,onReschedule:M,isVariant:"carry_over"})})]})]}),e.jsx(_,{isOpen:N,onClose:()=>j(!1),onAdd:s,initialDate:o})]})};export{oe as default};
