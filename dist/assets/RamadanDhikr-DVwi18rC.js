import{z as L,b2 as O,y as G,r as n,j as e,V as A,A as P,m as b,U as E,P as y,E as v,R as _,C as I}from"./index-DgPxFht0.js";import{F as $}from"./flame-Ctsa_DlH.js";import{P as R}from"./plus-BoOHfWjy.js";import{T as F}from"./target-DQzcA1Ww.js";import{B as M}from"./book-open-C1SyAtjd.js";import{E as Q}from"./ellipsis-DrznyRGW.js";import{H as W}from"./hash-tdXvlGbM.js";const D=({title:m,count:d,target:i,onClick:r,accentClass:o,bgTint:l="bg-indigo-500/10",delay:a=0})=>{const x=i>0?Math.min(d/i*100,100):0;return e.jsx(y,{onClick:r,block:!0,scaleDown:.96,children:e.jsxs(b.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:a},className:"group relative bg-white dark:bg-[#1C1C1E] border border-slate-100 dark:border-white/5 rounded-[2rem] p-5 shadow-sm hover:shadow-md transition-all overflow-hidden flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:v("p-3 rounded-2xl",l),children:e.jsx(W,{className:v("w-5 h-5",o.replace("bg-","text-"))})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-[16px] font-black text-slate-900 dark:text-white leading-none mb-1.5",children:m}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"text-[13px] font-bold text-slate-500 dark:text-[#8E8E93] tabular-nums tracking-tight",children:[d," ",i>0&&`/ ${i}`]})})]})]}),i>0&&e.jsxs("div",{className:"w-12 h-12 relative flex items-center justify-center shrink-0",children:[e.jsxs("svg",{className:"w-full h-full -rotate-90",viewBox:"0 0 36 36",children:[e.jsx("path",{className:"text-slate-100 dark:text-white/5",strokeWidth:"3",stroke:"currentColor",fill:"none",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"}),e.jsx("path",{className:o.replace("bg-","text-"),strokeWidth:"3",strokeDasharray:`${x}, 100`,strokeLinecap:"round",stroke:"currentColor",fill:"none",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"})]}),x>=100&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(I,{className:v("w-4 h-4",o.replace("bg-","text-"))})})]})]})})},B=({dhikr:m,onSave:d,onClose:i})=>{const{title:r,count:o,target:l}=m,[a,x]=n.useState(o),[w,h]=n.useState(!1);n.useEffect(()=>{const g=setTimeout(()=>{a!==o&&d(a)},500);return()=>clearTimeout(g)},[a,o,d]);const T=()=>{navigator.vibrate&&navigator.vibrate(10),x(g=>g+1)},p=()=>{if(!w){h(!0),setTimeout(()=>h(!1),3e3);return}x(0),h(!1)},f=l>0?Math.min(a/l*100,100):0,u=l>0&&a>=l;return e.jsxs(b.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},className:"fixed inset-0 z-[200] bg-white dark:bg-[#1C1C1E] flex flex-col items-center justify-between py-12 px-6 overflow-hidden",children:[e.jsxs("div",{className:"w-full flex justify-between items-center z-10 pt-4",children:[e.jsx(E,{variant:"back",onClick:()=>{d(a),i()}}),e.jsx("h2",{className:"text-[16px] font-black tracking-widest uppercase text-slate-900 dark:text-white absolute left-1/2 -translate-x-1/2",children:r}),e.jsx("div",{className:"w-12 h-12"})]}),e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center relative w-full pt-10",children:[e.jsxs(y,{as:b.div,whileTap:{scale:.95},onClick:T,className:"relative w-48 h-48 rounded-full bg-indigo-50 dark:bg-indigo-500/10 border border-indigo-100 dark:border-indigo-500/20 flex flex-col items-center justify-center focus:outline-none shadow-[0_0_60px_rgba(99,102,241,0.05)] dark:shadow-[0_0_60px_rgba(99,102,241,0.1)] group select-none transition-transform mb-8",style:{WebkitTapHighlightColor:"transparent"},children:[l>0&&e.jsxs("svg",{className:"absolute inset-0 w-full h-full -rotate-90 pointer-events-none drop-shadow-md",viewBox:"0 0 100 100",children:[e.jsx("circle",{cx:"50",cy:"50",r:"48",stroke:"currentColor",strokeWidth:"2",fill:"none",className:"text-slate-200 dark:text-white/5"}),e.jsx(b.circle,{cx:"50",cy:"50",r:"48",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeDasharray:"301.59",initial:{strokeDashoffset:301.59},animate:{strokeDashoffset:301.59-f/100*301.59},fill:"none",className:"text-indigo-500 transition-all duration-300 ease-out"})]}),e.jsx("div",{className:"absolute inset-4 rounded-full bg-gradient-to-b from-white dark:from-white/5 to-slate-50 dark:to-transparent border border-white dark:border-white/5 shadow-inner flex flex-col flex-1 items-center justify-center",children:e.jsx("div",{className:"w-16 h-16 rounded-full bg-indigo-50 dark:bg-indigo-500/20 flex items-center justify-center text-indigo-500 dark:text-indigo-400 shadow-sm border border-indigo-100 dark:border-indigo-500/30",children:e.jsx(R,{className:"w-8 h-8"})})})]}),e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("span",{className:"text-[80px] font-black tracking-tighter leading-none tabular-nums text-slate-900 dark:text-white",children:a}),l>0&&e.jsxs(b.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:v("mt-4 px-6 py-2.5 rounded-full border text-[11px] font-black uppercase tracking-widest flex items-center gap-2 transition-colors",u?"bg-emerald-50 dark:bg-emerald-500/10 text-emerald-600 dark:text-emerald-400 border-emerald-200 dark:border-emerald-500/30":"bg-slate-50 dark:bg-white/5 text-slate-500 dark:text-slate-400 border-slate-200 dark:border-white/10"),children:["Target: ",l,u&&e.jsx(I,{className:"w-3.5 h-3.5"})]})]})]}),e.jsx("div",{className:"pb-8 z-10 min-h-[60px]",children:e.jsx(P,{mode:"wait",children:w?e.jsx(y,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},onClick:p,scaleDown:.96,className:"px-6 py-3 rounded-2xl bg-rose-50 dark:bg-rose-500/10 text-rose-600 dark:text-rose-500 border border-rose-200 dark:border-rose-500/30 text-[10px] font-black uppercase tracking-widest shadow-sm",children:"Tap to Confirm"},"confirm-btn"):e.jsx(y,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:p,scaleDown:.96,className:"px-6 py-3 rounded-2xl bg-slate-100 dark:bg-white/5 text-slate-500 dark:text-[#8E8E93] text-[10px] font-black uppercase tracking-widest hover:bg-slate-200 dark:hover:bg-white/10 transition-colors",children:"Reset Counter"},"reset-btn")})})]})},H=({ramadanData:m,updateQuranGoal:d,currentDay:i})=>{const r=m?.quranGoal||null,[o,l]=n.useState(!r),[a,x]=n.useState(r?.type||"pages"),[w,h]=n.useState(r?.value||(a==="juz"?30:604)),T=Object.values(m?.days||{}).reduce((j,s)=>j+(s.quranPages||0),0),p=Object.values(m?.days||{}).reduce((j,s)=>j+(s.quranJuz||0),0),f=r?.type==="juz"?p:T,u=r?.value||1,g=(f/u*100).toFixed(1),z=Math.floor(i/30*u),k=f-z;let c="On Track",N="text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-500/10";k>0?(c=`+${k} ${r?.type}`,N="text-emerald-600 dark:text-emerald-400 bg-emerald-50 dark:bg-emerald-500/10"):k<0&&(c=`${k} ${r?.type}`,N="text-rose-600 dark:text-rose-400 bg-rose-50 dark:bg-rose-500/10");const S=()=>{d({type:a,value:parseInt(w,10)}),l(!1)};return o?e.jsxs(b.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-2xl p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-5 text-indigo-600 dark:text-indigo-400",children:[e.jsx("div",{className:"w-10 h-10 bg-indigo-50 dark:bg-indigo-500/10 text-indigo-600 dark:text-indigo-400 rounded-xl flex items-center justify-center",children:e.jsx(F,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-slate-900 dark:text-white",children:"Set Quran Goal"}),e.jsx("p",{className:"text-xs font-medium text-slate-500",children:"Plan your completion"})]})]}),e.jsxs("div",{className:"flex gap-2 mb-4 bg-slate-50 dark:bg-slate-800 p-1 rounded-xl",children:[e.jsx(y,{onClick:()=>{x("pages"),h(604)},scaleDown:.96,className:v("flex-1 py-2 text-xs font-bold uppercase rounded-lg transition-all",a==="pages"?"bg-white dark:bg-slate-700 text-indigo-600 dark:text-white shadow-sm":"text-slate-500 dark:text-slate-400"),children:"Pages"}),e.jsx(y,{onClick:()=>{x("juz"),h(30)},scaleDown:.96,className:v("flex-1 py-2 text-xs font-bold uppercase rounded-lg transition-all",a==="juz"?"bg-white dark:bg-slate-700 text-indigo-600 dark:text-white shadow-sm":"text-slate-500 dark:text-slate-400"),children:"Juz"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",value:w,onChange:j=>h(j.target.value),className:"flex-1 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl px-4 py-3 font-bold text-lg focus:outline-none focus:border-indigo-500 text-slate-800 dark:text-slate-100 placeholder:opacity-30",placeholder:"Quantity"}),e.jsx(E,{variant:"save",onClick:S,label:"Commit",iconOnly:!1,size:"sm"})]})]}):e.jsxs(b.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"group relative bg-[#1C1C1E] dark:bg-slate-900 rounded-3xl p-6 shadow-sm border border-slate-200 dark:border-white/5 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-emerald-500/10 blur-[60px] -mr-16 -mt-16"}),e.jsxs("div",{className:"flex justify-between items-start mb-5 relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-emerald-500/10 rounded-xl flex items-center justify-center border border-emerald-500/20",children:e.jsx(M,{className:"w-5 h-5 text-emerald-500 dark:text-emerald-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-slate-900 dark:text-white",children:"Quran Focus"}),e.jsxs("div",{className:"mt-1 flex items-baseline gap-1.5",children:[e.jsx("span",{className:"text-2xl font-black text-slate-900 dark:text-white tabular-nums leading-none tracking-tight",children:f}),e.jsxs("span",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400",children:["/ ",r.value," ",r.type]})]})]})]}),e.jsx(y,{onClick:()=>l(!0),scaleDown:.9,className:"w-8 h-8 flex items-center justify-center rounded-lg bg-slate-50 dark:bg-white/5 text-slate-400 dark:text-[#8E8E93] hover:text-slate-600 dark:hover:text-white transition-all",children:e.jsx(Q,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"relative z-10 space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center text-xs font-bold mb-1.5 px-1",children:[e.jsx("span",{className:"text-slate-500 dark:text-[#8E8E93]",children:"Completion"}),e.jsxs("span",{className:"text-emerald-600 dark:text-emerald-400",children:[g,"%"]})]}),e.jsx("div",{className:"w-full bg-slate-100 dark:bg-white/5 rounded-full h-2 overflow-hidden",children:e.jsx(b.div,{initial:{width:0},animate:{width:`${Math.min(g,100)}%`},transition:{duration:1.5,ease:"easeOut"},className:"h-full bg-emerald-500 rounded-full"})})]}),e.jsxs("div",{className:"flex items-center justify-between gap-3 font-semibold text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-slate-500 dark:text-slate-400",children:[e.jsx(_,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:["Expected: ",z]})]}),e.jsx("div",{className:v("px-2.5 py-1 rounded-md font-bold",N),children:c})]})]})]})},te=()=>{L();const{loading:m,error:d,ramadanData:i,updateRamadanDay:r,updateQuranGoal:o,updateCustomDhikr:l,hijriDate:a}=O(),{serverTodayKey:x}=G(),[w,h]=n.useState(new Date),[T,p]=n.useState(!1),[f,u]=n.useState(""),[g,z]=n.useState(100),[k,c]=n.useState(null),N=i?.customDhikr||[];if(n.useEffect(()=>{const t=setInterval(()=>h(new Date),6e4);return()=>clearInterval(t)},[]),m)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white dark:bg-slate-950",children:e.jsx("div",{className:"flex flex-col items-center gap-4",children:e.jsx("div",{className:"w-10 h-10 rounded-full border-4 border-slate-100 dark:border-slate-800 border-t-indigo-500 animate-spin"})})});if(d)return e.jsx("div",{className:"p-4 text-center bg-rose-50 dark:bg-rose-900/10 rounded-2xl border border-rose-100 dark:border-rose-900/20 m-4",children:e.jsx("p",{className:"text-rose-600 font-medium",children:d})});if(!a?.isRamadan)return e.jsx(A,{title:"Remembrance",bgClass:"bg-transparent",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 px-8 text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-50 dark:bg-slate-900 rounded-2xl flex items-center justify-center",children:e.jsx($,{className:"w-8 h-8 text-slate-300 dark:text-slate-700"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-bold text-slate-900 dark:text-white",children:"Active in Ramadan"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 max-w-[200px] mx-auto mt-1",children:"This feature unlocks during the holy month."})]})]})});const j=x||w.toLocaleDateString("en-CA"),s=i?.days?.[j]||{},q=(t,C)=>{r(j,{[t]:C})},J=()=>{const t=f.trim();if(!t)return;const C={id:"dhikr_"+Date.now(),title:t,target:parseInt(g,10)||0};l([...N,C]),u(""),z(100),p(!1)};return e.jsxs(A,{title:"Remembrance",contentPadClass:"px-2 pb-24 pt-4 flex flex-col gap-6",bgClass:"bg-transparent",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(H,{ramadanData:i,updateQuranGoal:o,currentDay:a.day}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(D,{title:"Tahlil (La ilaha illAllah)",count:s.tahlil||0,target:100,onClick:()=>c({key:"tahlil",title:"Tahlil (La ilaha illAllah)",count:s.tahlil||0,target:100}),accentClass:"bg-blue-500 border-blue-600",delay:.1}),e.jsx(D,{title:"Salawat",count:s.salawat||0,target:100,onClick:()=>c({key:"salawat",title:"Salawat",count:s.salawat||0,target:100}),accentClass:"bg-indigo-500 border-indigo-600",delay:.2}),e.jsx(D,{title:"Istighfar",count:s.istighfar||0,target:100,onClick:()=>c({key:"istighfar",title:"Istighfar",count:s.istighfar||0,target:100}),accentClass:"bg-violet-500 border-violet-600",delay:.3}),N.map((t,C)=>e.jsx(D,{title:t.title,count:s[t.id]||0,target:t.target,onClick:()=>c({key:t.id,title:t.title,count:s[t.id]||0,target:t.target}),accentClass:["bg-blue-500","bg-indigo-500","bg-violet-500","bg-emerald-500"][C%4],delay:.4+C*.1},t.id)),e.jsx(P,{children:T?e.jsx(b.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"overflow-hidden",children:e.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-2xl p-5 shadow-sm space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-8 h-8 bg-indigo-50 dark:bg-indigo-500/10 text-indigo-600 dark:text-indigo-400 rounded-lg flex items-center justify-center",children:e.jsx(R,{className:"w-4 h-4"})}),e.jsx("h3",{className:"text-sm font-bold text-slate-900 dark:text-white",children:"Custom Target"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",value:f,onChange:t=>u(t.target.value),placeholder:"Dhikr Name (e.g. SubhanAllah)",autoFocus:!0,className:"w-full bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl px-4 py-3 text-sm font-semibold text-slate-800 dark:text-slate-100 focus:outline-none focus:border-indigo-500"}),e.jsx("input",{type:"number",value:g,onChange:t=>z(t.target.value),placeholder:"Daily Goal",className:"w-full bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl px-4 py-3 text-sm font-semibold text-slate-800 dark:text-slate-100 focus:outline-none focus:border-indigo-500"})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(E,{variant:"back",onClick:()=>{p(!1),u("")},label:"Discard",iconOnly:!1,className:"flex-1 py-3 bg-slate-100 dark:bg-slate-800 text-slate-500",size:"sm"}),e.jsx(E,{variant:"save",onClick:J,label:"Save Dhikr",iconOnly:!1,className:"flex-1 py-3",size:"sm"})]})]})}):e.jsxs(y,{onClick:()=>p(!0),scaleDown:.98,className:"w-full py-4 border border-dashed border-slate-300 dark:border-slate-700 rounded-2xl text-slate-500 dark:text-slate-400 font-semibold text-sm hover:border-indigo-500 hover:text-indigo-600 transition-all flex justify-center items-center gap-2 bg-slate-50/50 dark:bg-slate-900/50",children:[e.jsx(R,{className:"w-4 h-4"})," Add Dhikr Note"]})})]}),e.jsxs("div",{className:"pt-6 border-t border-slate-200 dark:border-slate-800",children:[e.jsx("h2",{className:"text-base font-bold text-slate-900 dark:text-white mb-3 px-1",children:"Quranic Log"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsx(D,{title:"Pages Read",count:s.quranPages||0,target:0,onClick:()=>c({key:"quranPages",title:"Pages Read",count:s.quranPages||0,target:0}),accentClass:"bg-emerald-500",bgTint:"bg-emerald-500/10",delay:.1}),e.jsx(D,{title:"Juz Read",count:s.quranJuz||0,target:0,onClick:()=>c({key:"quranJuz",title:"Juz Read",count:s.quranJuz||0,target:0}),accentClass:"bg-emerald-600",bgTint:"bg-emerald-600/10",delay:.2})]})]})]}),e.jsx(P,{children:k&&e.jsx(B,{dhikr:k,onSave:t=>q(k.key,t),onClose:()=>c(null)})})]})};export{te as default};
