import{z as B,f as F,r as h,ai as C,j as e,V as G,A as S,m as v,B as D,a6 as O,Q as E}from"./index-DgPxFht0.js";import{A as M,a as P}from"./AppCard-C1UXicHB.js";import{D as L,C as V}from"./droplets-cnPzkyA-.js";import{C as I}from"./chevron-down-DxzefmtS.js";import{R as T}from"./rotate-ccw-BRuvVwEv.js";const j={breakfast:[{name:"Puttu (1 piece) & Kadala Curry",calories:350,protein:12,type:"veg"},{name:"Appam (2 nos) & Veg Stew",calories:320,protein:6,type:"veg"},{name:"Appam (2 nos) & Egg Roast",calories:380,protein:14,type:"non-veg"},{name:"Idli (3 nos) & Sambar",calories:300,protein:10,type:"veg"},{name:"Dosa (2 nos) & Chutney",calories:350,protein:8,type:"veg"},{name:"Upma (1 cup) & Banana",calories:300,protein:6,type:"veg"},{name:"Oats Upma with Veggies",calories:280,protein:10,type:"veg"},{name:"Wheat Puttu & Green Gram",calories:320,protein:14,type:"veg"}],lunch:[{name:"Matta Rice (1 cup), Thoran & Moru Curry",calories:450,protein:8,type:"veg"},{name:"Matta Rice (1 cup), Fish Curry & Thoran",calories:500,protein:25,type:"non-veg"},{name:"Curd Rice with Pickle",calories:350,protein:8,type:"veg"},{name:"Chicken Biryani (Small Portion)",calories:600,protein:25,type:"non-veg"},{name:"Veg Meals (Rice, Sambar, Avial)",calories:500,protein:12,type:"veg"},{name:"Ghee Rice & Chicken Roast (Small)",calories:650,protein:25,type:"non-veg"},{name:"Matta Rice & Omelette",calories:480,protein:15,type:"non-veg"}],dinner:[{name:"Chappathi (2 nos) & Veg Kurma",calories:350,protein:10,type:"veg"},{name:"Chappathi (2 nos) & Chicken Curry",calories:400,protein:20,type:"non-veg"},{name:"Kanji & Payar (Green Gram)",calories:320,protein:12,type:"veg"},{name:"Wheat Dosa (2 nos) & Chutney",calories:300,protein:8,type:"veg"},{name:"Grilled Fish & Salad",calories:350,protein:30,type:"non-veg"},{name:"Fruit Salad & Nuts",calories:250,protein:5,type:"veg"}],snacks:[{name:"Tea (Suggestion: No Sugar) & 2 Biscuits",calories:120,protein:2,type:"veg"},{name:"Coffee (Black/Low Sugar)",calories:30,protein:0,type:"veg"},{name:"Banana (Small)",calories:90,protein:1,type:"veg"},{name:"Handful of Peanuts",calories:160,protein:7,type:"veg"},{name:"Buttermilk (Sambharam)",calories:60,protein:2,type:"veg"}]},W=(n,l,i,o,s)=>{let r=10*l+6.25*i-5*n+5;return o==="female"&&(r=10*l+6.25*i-5*n-161),Math.round(r*({sedentary:1.2,light:1.375,moderate:1.55,active:1.725,very_active:1.9}[s]||1.2))},_=(n,l)=>{const i=Math.round(l*1.6),o=Math.round(n*.25/9),s=Math.round((n-i*4-o*9)/4);return{protein:i,fats:o,carbs:s}},H=["Idli / Dosa (Good Carbs)","Sambar with Drumsticks (Fiber & Protein)","Ragi Mudde (Calcium & Iron)","Chickpea Sundal (Protein Snack)","Curd Rice (Gut Health)"],q=["Deep Fried Bajjis/Bondas","Sugary Mysore Pak (Limit intake)","Processed Maida Parottas","Excess White Rice at night"],K=(n,l,i,o)=>{let r=n-({slow:250,normal:500,fast:750}[i]||500);const c=1200;r<c&&(r=c);const g=Math.round(l*.035*10)/10,p=_(r,l),u=[];for(let d=1;d<=7;d++){const x=w=>o==="veg"?w.filter(R=>R.type==="veg"):w,b=x(j.breakfast),a=x(j.lunch),t=x(j.dinner),m=x(j.snacks),f=b[Math.floor(Math.random()*b.length)],N=a[Math.floor(Math.random()*a.length)],y=t[Math.floor(Math.random()*t.length)],k=m[Math.floor(Math.random()*m.length)],A=f.calories+N.calories+y.calories+k.calories;u.push({day:`Day ${d}`,meals:{breakfast:f,lunch:N,dinner:y,snack:k},totalCalories:A,targetCalories:r})}return{tdee:n,targetCalories:r,waterIntake:g,macros:p,weeklyPlan:u}},J=()=>{const n=B(),{user:l}=F(),[i,o]=h.useState("input"),[s,r]=h.useState({age:"",weight:"",height:"",gender:"male",activity:"sedentary",preference:"non-veg",goalSpeed:"normal"}),[c,g]=h.useState(null),[p,u]=h.useState(null);h.useEffect(()=>{if(!l)return;const a=C.subscribeToModule(l.uid,"diet",t=>{t&&t.plan&&(g(t.plan),t.profile&&r(m=>({...m,...t.profile})),o("plan"))});return()=>a()},[l]);const d=a=>{const{name:t,value:m}=a.target;r(f=>({...f,[t]:m}))},x=async a=>{a.preventDefault();const t=W(s.age,s.weight,s.height,s.gender,s.activity),m=K(t,s.weight,s.goalSpeed,s.preference);g(m),o("plan"),l&&await C.saveModule(l.uid,"diet",{plan:m,profile:s,updatedAt:new Date().toISOString()})},b=a=>{u(p===a?null:a)};return e.jsx(G,{title:"Diet Manager",showBack:!0,onBack:()=>{i==="plan"?o("input"):n(-1)},children:e.jsx("main",{className:"pb-8",children:e.jsx(S,{mode:"wait",children:i==="input"?e.jsxs(v.form,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-6",onSubmit:x,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Tell us about yourself"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Age"}),e.jsx("input",{type:"number",name:"age",required:!0,value:s.age,onChange:d,className:"w-full p-3 rounded-xl border border-slate-200 bg-white dark:bg-slate-800 dark:border-slate-700",placeholder:"Years"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Gender"}),e.jsxs("select",{name:"gender",value:s.gender,onChange:d,className:"w-full p-3 rounded-xl border border-slate-200 bg-white dark:bg-slate-800 dark:border-slate-700",children:[e.jsx("option",{value:"male",children:"Male"}),e.jsx("option",{value:"female",children:"Female"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Weight (kg)"}),e.jsx("input",{type:"number",name:"weight",required:!0,value:s.weight,onChange:d,className:"w-full p-3 rounded-xl border border-slate-200 bg-white dark:bg-slate-800 dark:border-slate-700",placeholder:"kg"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Height (cm)"}),e.jsx("input",{type:"number",name:"height",required:!0,value:s.height,onChange:d,className:"w-full p-3 rounded-xl border border-slate-200 bg-white dark:bg-slate-800 dark:border-slate-700",placeholder:"cm"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Activity Level"}),e.jsxs("select",{name:"activity",value:s.activity,onChange:d,className:"w-full p-3 rounded-xl border border-slate-200 bg-white dark:bg-slate-800 dark:border-slate-700",children:[e.jsx("option",{value:"sedentary",children:"Sedentary (Little/No exercise)"}),e.jsx("option",{value:"light",children:"Lightly Active (1-3 days/week)"}),e.jsx("option",{value:"moderate",children:"Moderately Active (3-5 days/week)"}),e.jsx("option",{value:"active",children:"Very Active (6-7 days/week)"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Food Preference"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("button",{type:"button",onClick:()=>r({...s,preference:"veg"}),className:`p-3 rounded-xl border text-sm font-medium transition-all ${s.preference==="veg"?"bg-green-50 border-green-500 text-green-700 dark:bg-green-900/30 dark:text-green-300":"border-slate-200 dark:border-slate-700 text-slate-500"}`,children:"Vegetarian"}),e.jsx("button",{type:"button",onClick:()=>r({...s,preference:"non-veg"}),className:`p-3 rounded-xl border text-sm font-medium transition-all ${s.preference==="non-veg"?"bg-orange-50 border-orange-500 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300":"border-slate-200 dark:border-slate-700 text-slate-500"}`,children:"Non-Veg"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Goal Speed"}),e.jsxs("select",{name:"goalSpeed",value:s.goalSpeed,onChange:d,className:"w-full p-3 rounded-xl border border-slate-200 bg-white dark:bg-slate-800 dark:border-slate-700",children:[e.jsx("option",{value:"slow",children:"Slow & Steady (0.25kg/week)"}),e.jsx("option",{value:"normal",children:"Normal (0.5kg/week)"}),e.jsx("option",{value:"fast",children:"Aggressive (0.75kg/week)"})]})]})]}),e.jsx(D,{className:"w-full py-4 text-lg shadow-lg shadow-orange-500/20 bg-gradient-to-r from-orange-500 to-red-500 border-none",children:"Generate Plan"})]},"input"):e.jsxs(v.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-slate-900 to-slate-800 rounded-2xl p-6 text-white shadow-xl",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-xs uppercase tracking-wider font-semibold",children:"Daily Target"}),e.jsxs("h2",{className:"text-3xl font-black mt-1",children:[c.targetCalories," ",e.jsx("span",{className:"text-lg font-medium text-slate-400",children:"kcal"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-slate-400 text-xs uppercase tracking-wider font-semibold",children:"Water"}),e.jsxs("div",{className:"flex items-center gap-1 justify-end mt-1 text-blue-300",children:[e.jsx(L,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-xl font-bold",children:[c.waterIntake,"L"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center text-xs",children:[e.jsxs("div",{className:"bg-white/10 p-2 rounded-lg",children:[e.jsxs("span",{className:"block font-bold text-lg",children:[c.macros.protein,"g"]}),e.jsx("span",{className:"text-slate-400",children:"Protein"})]}),e.jsxs("div",{className:"bg-white/10 p-2 rounded-lg",children:[e.jsxs("span",{className:"block font-bold text-lg",children:[c.macros.carbs,"g"]}),e.jsx("span",{className:"text-slate-400",children:"Carbs"})]}),e.jsxs("div",{className:"bg-white/10 p-2 rounded-lg",children:[e.jsxs("span",{className:"block font-bold text-lg",children:[c.macros.fats,"g"]}),e.jsx("span",{className:"text-slate-400",children:"Fats"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx(M,{className:"bg-gradient-to-br from-emerald-50 to-teal-50 border-emerald-100",children:e.jsxs(P,{className:"p-4",children:[e.jsxs("h4",{className:"font-bold text-emerald-800 flex items-center gap-2 mb-3 text-sm uppercase tracking-wide",children:[e.jsx(O,{className:"w-4 h-4"}),"Recommended"]}),e.jsx("ul",{className:"space-y-2",children:H.slice(0,3).map((a,t)=>e.jsxs("li",{className:"flex items-center gap-2 text-sm text-emerald-700",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-400"}),a]},t))})]})}),e.jsx(M,{className:"bg-red-50 border-red-100",children:e.jsxs(P,{className:"p-4",children:[e.jsxs("h4",{className:"font-bold text-red-800 flex items-center gap-2 mb-3 text-sm uppercase tracking-wide",children:[e.jsx(E,{className:"w-4 h-4"}),"Avoid"]}),e.jsx("ul",{className:"space-y-2",children:q.slice(0,3).map((a,t)=>e.jsxs("li",{className:"flex items-center gap-2 text-sm text-red-700",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-red-400"}),a]},t))})]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-200 mt-2",children:"Weekly Meal Plan"}),c.weeklyPlan.map((a,t)=>e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-100 dark:border-slate-700 overflow-hidden shadow-sm",children:[e.jsxs("button",{onClick:()=>b(t),className:"w-full p-4 flex items-center justify-between text-left hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center text-orange-600 dark:text-orange-400 font-bold text-xs",children:a.day.split(" ")[1]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-200",children:a.day}),e.jsxs("p",{className:"text-xs text-slate-400",children:[a.totalCalories," kcal"]})]})]}),p===t?e.jsx(V,{className:"w-5 h-5 text-slate-400"}):e.jsx(I,{className:"w-5 h-5 text-slate-400"})]}),e.jsx(S,{children:p===t&&e.jsx(v.div,{initial:{height:0},animate:{height:"auto"},exit:{height:0},className:"overflow-hidden bg-slate-50 dark:bg-slate-900/50",children:e.jsxs("div",{className:"p-4 pt-0 space-y-3 border-t border-slate-100 dark:border-slate-700",children:[e.jsxs("div",{className:"space-y-1 mt-3",children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:"Breakfast"}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:a.meals.breakfast.name}),e.jsx("span",{className:"text-slate-400 font-mono text-xs",children:a.meals.breakfast.calories})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:"Lunch"}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:a.meals.lunch.name}),e.jsx("span",{className:"text-slate-400 font-mono text-xs",children:a.meals.lunch.calories})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:"Dinner"}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:a.meals.dinner.name}),e.jsx("span",{className:"text-slate-400 font-mono text-xs",children:a.meals.dinner.calories})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase",children:"Snack"}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:a.meals.snack.name}),e.jsx("span",{className:"text-slate-400 font-mono text-xs",children:a.meals.snack.calories})]})]})]})})})]},t))]}),e.jsxs(D,{variant:"secondary",onClick:x,className:"w-full gap-2 border-orange-200 text-orange-700 hover:bg-orange-50 dark:border-orange-800 dark:text-orange-300 dark:hover:bg-orange-900/20",children:[e.jsx(T,{className:"w-4 h-4"}),"Regenerate Plan"]})]},"plan")})})})};export{J as default};
