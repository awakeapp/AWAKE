const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/UnlockDayModal-Ro8-4bZw.js","assets/index-Dni63RkL.js","assets/index-CZam1utS.css","assets/AppInput-CvkiCkqY.js"])))=>i.map(i=>d[i]);
import{n as K,h as Q,o as W,p as X,g as Z,r as l,q as ee,j as e,v as C,m as se,S as te,k as M,_ as ae}from"./index-Dni63RkL.js";import{R as re,a as le,L as S,D as ie,b as oe,T as de,U as ne}from"./RoutineHeader-B0-joopV.js";import{T as ce}from"./trophy-bcE9aZMq.js";import{T as me}from"./target-BWbiutfI.js";import{P as I}from"./pen-Ci2c5G87.js";import"./TaskItem-BmhovZJU.js";import"./sun-dtd1KfjJ.js";import"./book-open--PJZsoqD.js";import"./bike-CjfyugEC.js";import"./trash-2-MMtH6vPd.js";import"./clock-BJ1gEYRg.js";import"./chevron-down-C8rsnSas.js";import"./chevron-up-DVJoFCMo.js";import"./subMonths-ypCLOBVC.js";import"./isSameMonth-EKRYgKGW.js";import"./utils-DayBekdl.js";import"./AppCard-DpTu2wkq.js";import"./index-CRWOlv-H.js";import"./plus-C4dEmhiS.js";import"./circle-check-CFvjP0eO.js";import"./circle-alert-DjndCTas.js";import"./smartphone-CBY9Vp78.js";import"./star-CUuq1UPs.js";import"./trending-up-CtWGxLuU.js";import"./award-DlmZ_SXq.js";const xe=l.lazy(()=>ae(()=>import("./UnlockDayModal-Ro8-4bZw.js"),__vite__mapDeps([0,1,2,3]))),Ue=()=>{const{t}=K(),{user:H}=Q(),{dailyData:r,updateTaskStatus:D,updateHabit:A,updateAllTasks:he,isLocked:n,submitDay:G,unlockDay:L}=W(),{isPast:h}=X(),p=Z(),[U,u]=l.useState(!1),[F,b]=l.useState(!1),[P,m]=l.useState(!1),[f,g]=l.useState({isOpen:!1,type:"success",category:""}),[O,V]=l.useState(!0),{tasks:E}=ee(),_=E.filter(s=>s.status!=="done").slice(0,3),k=new Date().getHours();let N="home.greeting_morning";k>=12&&k<17?N="home.greeting_afternoon":k>=17&&(N="home.greeting_evening");const B=r.tasks.filter(s=>s.status==="checked").length,T=r.tasks.length,d=T>0?Math.round(B/T*100):0,j=E.filter(s=>s.status!=="done").length;let c="";if(d>=80&&(c="home.motivation_finishing"),d===100&&(c="home.motivation_mastered"),j===0&&d===100&&(c="home.motivation_systems_go"),!r||!r.tasks)return e.jsxs("div",{className:"pb-32 px-4 pt-4 space-y-6 animate-pulse",children:[e.jsx("div",{className:"h-12 w-48 bg-slate-200 dark:bg-slate-800 rounded mt-2 mb-8"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-8 w-64 bg-slate-200 dark:bg-slate-800 rounded"}),e.jsx("div",{className:"h-4 w-40 bg-slate-200 dark:bg-slate-800 rounded"})]}),e.jsx("div",{className:"h-24 bg-slate-200 dark:bg-slate-800 rounded mt-6"}),e.jsxs("div",{className:"space-y-3 mt-8",children:[e.jsx("div",{className:"h-16 bg-slate-200 dark:bg-slate-800 rounded"}),e.jsx("div",{className:"h-16 bg-slate-200 dark:bg-slate-800 rounded"}),e.jsx("div",{className:"h-16 bg-slate-200 dark:bg-slate-800 rounded"})]})]});const R={"EARLY MORNING":r.tasks.filter(s=>s.category==="EARLY MORNING"),"BEFORE NOON":r.tasks.filter(s=>s.category==="BEFORE NOON"),"AFTER NOON":r.tasks.filter(s=>s.category==="AFTER NOON"),"EVE/NIGHT":r.tasks.filter(s=>s.category==="EVE/NIGHT"||s.category==="NIGHT")},v=l.useRef({});l.useEffect(()=>{if(!r?.tasks||h)return;const s={};if(Object.entries(R).forEach(([a,i])=>{if(i.length===0){s[a]="empty";return}const o=i.every(x=>x.status==="checked"),J=i.every(x=>x.status==="checked"||x.status==="missed");o?s[a]="success":J?s[a]="failed":s[a]="incomplete"}),O){v.current=s,V(!1);return}Object.entries(s).forEach(([a,i])=>{const o=v.current[a]||"incomplete";i!==o&&(o==="incomplete"&&i==="success"?g({isOpen:!0,type:"success",category:a}):o==="incomplete"&&i==="failed"&&g({isOpen:!0,type:"troll",category:a}))}),v.current=s},[r.tasks,h,O]);const Y=()=>u(!0),z=async s=>{await G(s),u(!1)},$=s=>{L(s),m(!1)},[y,w]=l.useState("");l.useEffect(()=>{if(y)return;const s=new Date().getHours();let a="";s<8?a="EARLY MORNING":s<12?a="BEFORE NOON":s<17?a="AFTER NOON":a="EVE/NIGHT";const i=r.tasks.some(o=>a==="EVE/NIGHT"?o.category==="EVE/NIGHT"||o.category==="NIGHT":o.category===a);w(i?a:"EARLY MORNING")},[r.tasks,y]);const q=s=>{w(a=>a===s?"":s)};return e.jsxs("div",{className:"pb-32 px-4 pt-4 space-y-6",children:[e.jsx("div",{className:"sticky top-16 z-20 bg-white/80 dark:bg-slate-950/80 backdrop-blur-md pt-1 pb-3 -mx-4 px-4 border-b border-transparent",children:e.jsx(re,{})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-end justify-between px-1",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white tracking-tight",children:[t(N),", ",H?.name?.split(" ")[0]||"User"]}),c&&e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm font-medium",children:t(c)})]}),e.jsxs("div",{className:"text-right hidden sm:block",children:[e.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:t("home.workspace")}),e.jsxs("div",{className:"text-lg font-semibold text-slate-700 dark:text-slate-200",children:[j," ",t("home.tasks_left")]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded p-4 shadow-sm relative overflow-hidden",children:[e.jsx("div",{className:"absolute bottom-0 left-0 h-1 bg-indigo-500/20 transition-all duration-1000",style:{width:`${d}%`}}),e.jsxs("div",{className:"flex items-center justify-between relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:C("w-12 h-12 rounded-2xl flex items-center justify-center transition-colors",d===100?"bg-emerald-100 text-emerald-600 dark:bg-emerald-500/20 dark:text-emerald-400":"bg-slate-100 text-indigo-600 dark:bg-slate-800 dark:text-indigo-400"),children:d===100?e.jsx(ce,{className:"w-6 h-6"}):e.jsx(me,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-px",children:t("home.routine")}),e.jsxs("div",{className:"text-xl font-bold text-slate-900 dark:text-white leading-none",children:[d,"% ",e.jsx("span",{className:"text-sm font-medium text-slate-400 ml-1",children:t("home.complete")})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"sm:hidden text-right mr-2",children:[e.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase",children:t("home.tasks")}),e.jsx("div",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:j})]}),e.jsx("button",{onClick:()=>b(!0),className:C("w-10 h-10 rounded-full flex items-center justify-center bg-slate-50 hover:bg-slate-100 dark:bg-slate-800 dark:hover:bg-slate-700 text-slate-500 transition-colors",n&&"hidden"),children:e.jsx(I,{className:"w-4 h-4 stroke-[2]"})})]})]})]}),d===100&&e.jsxs(se.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-100 dark:border-emerald-900/30 rounded p-3 flex items-center gap-3 text-emerald-700 dark:text-emerald-400",children:[e.jsx(te,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-semibold",children:t("home.all_routines_completed")})]})]}),e.jsx("div",{className:"space-y-2",children:r.tasks.length>0?Object.entries(R).map(([s,a])=>e.jsx(le,{title:s,tasks:a,onUpdateStatus:D,isLocked:n,isOpen:y===s,onToggle:()=>q(s)},s)):n?e.jsxs("button",{onClick:()=>m(!0),className:"w-full py-12 border-2 border-dashed border-slate-200 dark:border-slate-800 rounded flex flex-col items-center justify-center text-slate-400 hover:text-amber-500 hover:border-amber-200 dark:hover:border-amber-900/50 hover:bg-slate-50 dark:hover:bg-slate-900/50 transition-all group",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-amber-50 dark:bg-amber-900/20 flex items-center justify-center mb-3 group-hover:scale-110 transition-transform",children:e.jsx(S,{className:"w-6 h-6 text-amber-500"})}),e.jsx("span",{className:"font-semibold text-sm text-slate-600 dark:text-slate-300",children:t("home.day_locked")}),e.jsx("span",{className:"text-xs mt-1",children:t("home.unlock_routines")})]}):e.jsxs("button",{onClick:()=>b(!0),className:"w-full py-12 border-2 border-dashed border-slate-200 dark:border-slate-800 rounded flex flex-col items-center justify-center text-slate-400 hover:text-indigo-500 hover:border-indigo-200 dark:hover:border-indigo-900/50 hover:bg-slate-50 dark:hover:bg-slate-900/50 transition-all group",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center mb-3 group-hover:scale-110 transition-transform",children:e.jsx(I,{className:"w-6 h-6"})}),e.jsx("span",{className:"font-semibold text-sm",children:t("home.design_day")}),e.jsx("span",{className:"text-xs mt-1",children:t("home.add_rituals")})]})}),e.jsx(ie,{habits:r.habits,onUpdateHabit:A,isLocked:n}),_.length>0&&e.jsxs("div",{className:"pt-4 border-t border-slate-200 dark:border-slate-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 px-1",children:[e.jsx("h3",{className:"text-[11px] font-bold text-slate-400 uppercase tracking-widest",children:t("home.priority_tasks")}),e.jsx("button",{onClick:()=>p("/workspace"),className:"text-[11px] font-bold text-indigo-500 hover:text-indigo-600",children:t("home.view_all")})]}),e.jsx("div",{className:"space-y-2",children:_.map(s=>e.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 p-3 rounded flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${s.priority==="High"?"bg-red-500":"bg-slate-300"}`}),e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:s.name})]}),e.jsx("span",{className:"text-xs text-slate-400",children:s.time||t("home.today")})]},s.id))})]}),e.jsx("div",{className:"pt-6",children:n?e.jsxs("div",{className:"text-center p-6 bg-slate-50 dark:bg-slate-900/50 rounded border border-slate-200 dark:border-slate-800/50 dashed",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2 mb-4",children:[e.jsx(S,{className:"w-6 h-6 text-slate-400"}),e.jsx("p",{className:"text-sm text-slate-500 font-medium",children:t("home.day_completed_locked")})]}),r.locked&&!h&&e.jsx(M,{variant:"outline",onClick:()=>m(!0),className:"w-full sm:w-auto text-xs h-9",children:t("home.unlock_to_edit")})]}):e.jsx(M,{className:"w-full py-4 text-base font-semibold shadow-md shadow-indigo-500/20",onClick:Y,children:t("home.complete_day")})}),e.jsx(oe,{isOpen:U,onClose:()=>u(!1),data:r,onConfirm:z}),e.jsx(de,{isOpen:F,onClose:()=>b(!1),tasks:r.tasks}),e.jsx(ne,{isOpen:f.isOpen,onClose:()=>g(s=>({...s,isOpen:!1})),type:f.type,category:f.category}),e.jsx(l.Suspense,{fallback:null,children:e.jsx(xe,{isOpen:P,onClose:()=>m(!1),onConfirm:$})}),e.jsxs("div",{className:"flex justify-center gap-6 opacity-40 pt-8 pb-4",children:[e.jsx("button",{onClick:()=>p("/history"),className:"text-[10px] font-bold uppercase tracking-wider text-slate-500",children:t("home.history")}),e.jsx("div",{className:"w-px h-3 bg-slate-300 my-auto"}),e.jsx("button",{onClick:()=>p("/settings"),className:"text-[10px] font-bold uppercase tracking-wider text-slate-500",children:t("home.settings")})]})]})};export{Ue as default};
