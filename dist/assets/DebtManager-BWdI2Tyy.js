import{g as M,w as z,r as a,j as e}from"./index-Dni63RkL.js";import{A as F}from"./arrow-left-BW-eLmrt.js";import{P as O}from"./plus-C4dEmhiS.js";import{U as P}from"./user-CURnRwS7.js";const H=()=>{const s=M(),{debts:b,addDebt:n,settleDebt:o,addDebtPayment:u}=z(),[i,c]=a.useState(!1),[h,j]=a.useState("receivable"),[p,N]=a.useState(""),[g,v]=a.useState(""),[w,k]=a.useState(""),[y,D]=a.useState(""),[L,l]=a.useState(!1),[r,S]=a.useState(null),[f,C]=a.useState(""),R=b.filter(t=>!t.isSettled),$=t=>{t.preventDefault(),!(!p||!g)&&(n({type:h,person:p,amount:Number(g),note:y,dueDate:w||null}),c(!1),N(""),v(""),k(""),D(""))},x=R.filter(t=>t.type==="receivable"),m=R.filter(t=>t.type==="payable"),E=x.reduce((t,d)=>t+(Number(d.amount)-(d.paidAmount||0)),0),I=m.reduce((t,d)=>t+(Number(d.amount)-(d.paidAmount||0)),0);return e.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-950 pb-16",children:[e.jsxs("header",{className:"bg-slate-900 text-white p-6 rounded-b-[2.5rem] shadow-md shadow-slate-900/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>s("/finance"),className:"p-2 bg-white/10 rounded hover:bg-white/20 transition-colors",children:e.jsx(F,{className:"w-5 h-5 text-white"})}),e.jsx("h1",{className:"text-lg font-bold tracking-wide",children:"Debts & Lending"}),e.jsx("div",{className:"w-10"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white/10 p-4 rounded",children:[e.jsx("p",{className:"text-[10px] text-emerald-300 uppercase font-bold tracking-wider mb-1",children:"To Receive"}),e.jsxs("h2",{className:"text-2xl font-bold text-emerald-400",children:["₹",E.toLocaleString()]})]}),e.jsxs("div",{className:"bg-white/10 p-4 rounded",children:[e.jsx("p",{className:"text-[10px] text-red-300 uppercase font-bold tracking-wider mb-1",children:"To Pay"}),e.jsxs("h2",{className:"text-2xl font-bold text-red-400",children:["₹",I.toLocaleString()]})]})]})]}),e.jsx("div",{className:"p-4 space-y-8",children:i?e.jsxs("form",{onSubmit:$,className:"bg-white dark:bg-slate-900 p-6 rounded shadow-md border border-slate-100 dark:border-slate-800 animate-in fade-in zoom-in-95 duration-200",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-6",children:"Add New Record"}),e.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-800 p-1 rounded mb-6",children:[e.jsx("button",{type:"button",onClick:()=>j("receivable"),className:`flex-1 py-3 text-sm font-bold rounded-lg transition-all ${h==="receivable"?"bg-white dark:bg-slate-700 shadow-sm text-emerald-600 dark:text-emerald-400":"text-slate-500"}`,children:"I Lent (Get Back)"}),e.jsx("button",{type:"button",onClick:()=>j("payable"),className:`flex-1 py-3 text-sm font-bold rounded-lg transition-all ${h==="payable"?"bg-white dark:bg-slate-700 shadow-sm text-red-600 dark:text-red-400":"text-slate-500"}`,children:"I Borrowed (Pay)"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-1 block",children:"Person Name"}),e.jsx("input",{type:"text",value:p,onChange:t=>N(t.target.value),placeholder:"John Doe",className:"w-full bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded p-3 text-slate-900 dark:text-white font-medium focus:ring-2 focus:ring-indigo-500",autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-1 block",children:"Amount"}),e.jsx("input",{type:"number",value:g,onChange:t=>v(t.target.value),placeholder:"500",className:"w-full bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded p-3 text-slate-900 dark:text-white font-medium focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-1 block",children:"Due Date (Optional)"}),e.jsx("input",{type:"date",value:w,onChange:t=>k(t.target.value),className:"w-full bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded p-3 text-slate-900 dark:text-white font-medium focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-1 block",children:"Note"}),e.jsx("input",{type:"text",value:y,onChange:t=>D(t.target.value),placeholder:"Reason...",className:"w-full bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded p-3 text-slate-900 dark:text-white font-medium focus:ring-2 focus:ring-indigo-500"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-8",children:[e.jsx("button",{type:"button",onClick:()=>c(!1),className:"flex-1 py-3 font-semibold text-slate-500 hover:bg-slate-50 rounded transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 py-3 bg-slate-900 text-white font-bold rounded shadow-md hover:scale-[1.02] transition-transform",children:"Save Record"})]})]}):e.jsxs("button",{onClick:()=>c(!0),className:"w-full py-4 border-2 border-dashed border-slate-300 dark:border-slate-700 rounded flex items-center justify-center gap-2 text-slate-500 hover:border-indigo-500 hover:text-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/10 transition-all font-bold",children:[e.jsx(O,{className:"w-5 h-5"}),"Add New Record"]})}),x.length===0&&m.length===0&&!i&&e.jsxs("div",{className:"text-center py-16 px-6",children:[e.jsx("div",{className:"w-20 h-20 bg-slate-100 dark:bg-slate-800 rounded-full flex items-center justify-center mx-auto mb-6 text-slate-300",children:e.jsx(P,{className:"w-10 h-10"})}),e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-2",children:"No active debts"}),e.jsx("p",{className:"text-slate-500 text-sm mb-8 leading-relaxed max-w-xs mx-auto",children:"Keep track of money you lend to friends or borrow from others. Everything is balanced!"}),e.jsx("button",{onClick:()=>c(!0),className:"bg-slate-900 dark:bg-white text-white dark:text-slate-900 px-8 py-4 rounded font-bold shadow-md hover:scale-[1.02] transition-transform",children:"+ Add Person"})]}),e.jsxs("div",{className:"space-y-8",children:[x.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-slate-900 dark:text-white mb-3 pl-2 flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500"})," Expected to Receive"]}),e.jsx("div",{className:"space-y-3",children:x.map(t=>e.jsx(A,{debt:t,onRepay:()=>{S(t),l(!0)}},t.id))})]}),m.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-slate-900 dark:text-white mb-3 pl-2 flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"})," Need to Pay"]}),e.jsx("div",{className:"space-y-3",children:m.map(t=>e.jsx(A,{debt:t,onRepay:()=>{S(t),l(!0)}},t.id))})]})]}),L&&r&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>l(!1)}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-6 rounded w-full max-w-sm relative z-10 shadow-md",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Record Repayment"}),e.jsxs("p",{className:"text-sm text-slate-500 mb-4",children:["How much ",r.type==="receivable"?"did you receive":"did you pay","?"]}),e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"number",value:f,onChange:t=>C(t.target.value),placeholder:`Remaining: ${Number(r.amount)-(r.paidAmount||0)}`,className:"w-full bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded p-4 text-xl font-bold",autoFocus:!0})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("button",{onClick:()=>l(!1),className:"py-3 font-bold text-slate-500",children:"Cancel"}),e.jsx("button",{onClick:()=>{f&&(u(r.id,f),l(!1),C(""))},className:"py-3 bg-slate-900 text-white font-bold rounded",children:"Confirm"})]})]})]})]})},A=({debt:s,onRepay:b})=>{const n=Number(s.paidAmount)||0,o=Number(s.amount),u=Math.min(n/o*100,100),i=o-n;return e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-4 rounded shadow-sm border border-slate-100 dark:border-slate-800",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${s.type==="receivable"?"bg-emerald-100 text-emerald-600":"bg-red-100 text-red-600"}`,children:e.jsx(P,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-900 dark:text-white",children:s.person}),e.jsx("p",{className:"text-xs text-slate-400",children:s.note})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`font-bold ${s.type==="receivable"?"text-emerald-600":"text-red-600"}`,children:["₹",i.toLocaleString()]}),e.jsxs("p",{className:"text-[10px] text-slate-400",children:["of ₹",o.toLocaleString()]})]})]}),e.jsx("div",{className:"h-1.5 w-full bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden mb-3",children:e.jsx("div",{className:`h-full rounded-full ${s.type==="receivable"?"bg-emerald-500":"bg-red-500"}`,style:{width:`${u}%`}})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wide",children:s.dueDate?`Due ${new Date(s.dueDate).toLocaleDateString()}`:"No Due Date"}),e.jsx("button",{onClick:b,className:"text-xs font-bold bg-slate-900 dark:bg-white text-white dark:text-slate-900 px-3 py-2 rounded",children:"Record Payment"})]})]})};export{H as default};
