import{c as C,o as u,p as S,h as T,r as m,j as e,K as A,v as x,m as M,M as H,J}from"./index-Dni63RkL.js";import{A as f,a as k}from"./AppCard-DpTu2wkq.js";import{T as z}from"./trending-up-CtWGxLuU.js";import{C as O}from"./circle-check-CFvjP0eO.js";import{C as R}from"./circle-alert-DjndCTas.js";const E=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],L=C("circle-x",E),V=()=>{const{dailyData:a}=u(),{formattedDate:o,setDate:j,isToday:$}=S(),{user:F}=T(),[N,h]=m.useState(!1),[v,w]=m.useState([]),{getHistory:p}=u();m.useEffect(()=>{(async()=>{const D=(await p(30)).map(r=>{let l="none";r.score===100?l="perfect":r.score>=50?l="good":r.score>0?l="partial":r.data&&r.data.tasks&&(l="empty");const c=r.date.split("-");return{date:new Date(c[0],c[1]-1,c[2]),keyDate:r.date,status:l,score:r.score}});w(D)})()},[a,p]);const i=a.tasks?.length||0,n=a.tasks?.filter(t=>t.status==="checked")||[],b=a.tasks?.filter(t=>t.status==="missed")||[],y=i>0?Math.round(n.length/i*100):0,d=[];a.habits?.junkFood&&d.push("Ate Junk Food"),a.habits?.sugar&&d.push("Consumed Sugar"),a.habits?.coldDrinks&&d.push("Drank Cold Drinks"),a.habits?.screenTime>2&&d.push(`High Screen Time (${a.habits.screenTime}h)`);const g=[...b.map(t=>`Missed task: ${t.name}`),...d.map(t=>`Avoid: ${t}`)];return e.jsxs("div",{className:"pb-24 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Report History"}),e.jsx("button",{onClick:()=>h(!0),className:"p-2 bg-slate-100 hover:bg-slate-200 text-indigo-600 rounded-full transition-colors dark:bg-slate-800 dark:hover:bg-slate-700 dark:text-indigo-400",children:e.jsx(A,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"overflow-x-auto pb-4 -mx-4 px-4 scrollbar-hide",children:e.jsx("div",{className:"flex gap-3 w-max",children:v.map(t=>{const s=t.keyDate===o;return e.jsxs("button",{onClick:()=>j(t.date),className:x("flex flex-col items-center gap-1 min-w-[3.5rem] p-2 rounded-2xl transition-all border",s?"bg-indigo-600 border-indigo-600 shadow-md shadow-indigo-500/30 scale-105":"bg-white border-slate-100 dark:bg-slate-900 dark:border-slate-800 hover:border-indigo-200"),children:[e.jsx("span",{className:x("text-[10px] font-bold uppercase",s?"text-indigo-200":"text-slate-400"),children:t.date.toLocaleDateString("en-US",{weekday:"short"})}),e.jsx("div",{className:x("w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold border-2",s?"bg-white text-indigo-700 border-transparent":"",!s&&t.status==="perfect"&&"bg-emerald-100 text-emerald-700 border-emerald-200",!s&&t.status==="good"&&"bg-blue-100 text-blue-700 border-blue-200",!s&&t.status==="partial"&&"bg-orange-100 text-orange-700 border-orange-200",!s&&(t.status==="none"||t.status==="empty")&&"bg-slate-50 text-slate-300 border-slate-100 dark:bg-slate-800 dark:border-slate-700"),children:t.date.getDate()})]},t.keyDate)})})}),e.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"space-y-4",children:[e.jsx("div",{className:"text-center mb-6",children:e.jsxs("h3",{className:"text-lg font-medium text-slate-500 dark:text-slate-400",children:["Overview for ",e.jsx("span",{className:"text-slate-900 dark:text-white font-bold",children:new Date(o+"T00:00:00").toLocaleDateString(void 0,{dateStyle:"long"})})]})}),e.jsxs(f,{className:"bg-gradient-to-br from-indigo-500 to-purple-600 text-white border-none shadow-md relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-10",children:e.jsx(H,{size:120})}),e.jsxs(k,{className:"p-6 relative z-10 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-indigo-200 font-medium mb-1",children:"Daily Score"}),e.jsxs("div",{className:"text-5xl font-black tracking-tight flex items-baseline gap-1",children:[y,e.jsx("span",{className:"text-2xl opacity-60",children:"%"})]}),e.jsxs("p",{className:"text-sm text-indigo-100 mt-2 opacity-80",children:[n.length," / ",i," tasks completed"]})]}),e.jsx("div",{className:"w-24 h-24 rounded-full border-8 border-white/20 flex items-center justify-center relative",children:e.jsx(z,{className:"w-10 h-10 text-white"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 p-4 rounded border border-emerald-100 dark:border-emerald-800/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(O,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"}),e.jsx("span",{className:"font-bold text-emerald-900 dark:text-emerald-100",children:"Completed"})]}),e.jsx("p",{className:"text-2xl font-bold text-emerald-700 dark:text-emerald-300",children:n.length})]}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-4 rounded border border-red-100 dark:border-red-800/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(L,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),e.jsx("span",{className:"font-bold text-red-900 dark:text-red-100",children:"Missed"})]}),e.jsx("p",{className:"text-2xl font-bold text-red-700 dark:text-red-300",children:b.length})]})]}),d.length>0&&e.jsx(f,{className:"border-red-100 bg-red-50/50 dark:bg-red-900/10 dark:border-red-900/30",children:e.jsxs(k,{className:"p-4",children:[e.jsxs("h4",{className:"font-bold text-red-800 dark:text-red-200 flex items-center gap-2 mb-3",children:[e.jsx(R,{className:"w-5 h-5"}),"Violations Detected"]}),e.jsx("ul",{className:"space-y-2",children:d.map((t,s)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm text-red-700 dark:text-red-300",children:[e.jsx("span",{className:"mt-2 w-1.5 h-1.5 rounded-full bg-red-400 shrink-0"}),t]},s))})]})}),g.length>0?e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 rounded p-4 border border-slate-200 dark:border-slate-800",children:[e.jsx("h4",{className:"font-bold text-slate-700 dark:text-slate-300 mb-3 uppercase text-xs tracking-wider",children:"Areas to Improve"}),e.jsx("ul",{className:"space-y-3",children:g.map((t,s)=>e.jsxs("li",{className:"flex gap-3 text-sm text-slate-600 dark:text-slate-400",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-white dark:bg-slate-800 shadow-sm flex items-center justify-center shrink-0 text-slate-400 text-xs font-bold border border-slate-100 dark:border-slate-700",children:s+1}),e.jsx("span",{className:"py-px",children:t})]},s))})]}):e.jsx("div",{className:"bg-emerald-50 dark:bg-emerald-900/10 rounded p-6 text-center border-dashed border-2 border-emerald-100 dark:border-emerald-800/30",children:e.jsx("p",{className:"text-emerald-700 dark:text-emerald-300 font-medium",children:"No improvements needed! Perfect day!"})})]},o),e.jsx(J,{isOpen:N,onClose:()=>h(!1)})]})};export{V as default};
