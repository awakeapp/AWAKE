import{c as C,aG as z,r as c,j as e,B as D,v as j,z as T}from"./index-Dni63RkL.js";import{T as R}from"./target-BWbiutfI.js";import{B as E}from"./book-open--PJZsoqD.js";const I=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],P=C("settings-2",I),b=({title:x,count:l,target:n,onSave:a,accentClass:m})=>{const[o,r]=c.useState(String(l)),[u,h]=c.useState(!1);c.useEffect(()=>{r(String(l))},[l]);const i=()=>{const s=parseInt(o,10);!isNaN(s)&&s>=0&&(a(s),h(!0),setTimeout(()=>h(!1),1500))},d=n>0?Math.min(l/n*100,100):0;return e.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded p-4 shadow-sm",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-wider mb-3",children:x}),e.jsxs("div",{className:"flex items-end gap-2 mb-3",children:[e.jsx("span",{className:"text-4xl font-black text-slate-800 dark:text-white tabular-nums leading-none",children:l}),n>0&&e.jsxs("span",{className:"text-sm font-medium text-slate-400 mb-1",children:["/ ",n]})]}),n>0&&e.jsx("div",{className:"w-full bg-slate-100 dark:bg-slate-800 rounded-full h-2 overflow-hidden mb-4",children:e.jsx("div",{className:j("h-full rounded-full transition-all duration-500",m),style:{width:`${d}%`}})}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("input",{type:"number",min:"0",value:o,onChange:s=>r(s.target.value),onKeyDown:s=>s.key==="Enter"&&i(),placeholder:"Enter count",className:"flex-1 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded px-3 py-2 text-sm font-bold text-slate-800 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-indigo-400"}),e.jsx("button",{onClick:i,className:j("px-4 py-2 rounded text-sm font-bold text-white transition-all active:scale-95 flex items-center gap-1",u?"bg-emerald-500":m),children:u?e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"w-4 h-4"})," Saved"]}):"Save"})]})]})},G=({ramadanData:x,updateQuranGoal:l,currentDay:n})=>{const a=x?.quranGoal||null,[m,o]=c.useState(!a),[r,u]=c.useState(a?.type||"pages"),[h,i]=c.useState(a?.value||(r==="juz"?30:604)),d=Object.values(x?.days||{}).reduce((g,y)=>g+(y.quranPages||0),0),s=Object.values(x?.days||{}).reduce((g,y)=>g+(y.quranJuz||0),0),t=a?.type==="juz"?s:d,p=a?.value||1,w=(t/p*100).toFixed(1),k=Math.floor(n/30*p),f=t-k;let v="On Track",N="text-emerald-500";f>0?(v=`${f} ${a?.type} ahead`,N="text-emerald-500"):f<0&&(v=`${Math.abs(f)} ${a?.type} behind`,N="text-rose-500");const S=()=>{l({type:r,value:parseInt(h,10)}),o(!1)};return m?e.jsxs("div",{className:"bg-indigo-50 border border-indigo-100 dark:bg-indigo-900/10 dark:border-indigo-500/20 rounded p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 text-indigo-800 dark:text-indigo-200 font-bold",children:[e.jsx(R,{className:"w-5 h-5"})," Set Quran Goal"]}),e.jsxs("div",{className:"flex gap-3 mb-4",children:[e.jsx("button",{onClick:()=>{u("pages"),i(604)},className:j("flex-1 py-2 text-sm font-semibold rounded-xl border",r==="pages"?"bg-indigo-600 text-white border-indigo-600":"bg-white text-indigo-600 border-indigo-200"),children:"Pages"}),e.jsx("button",{onClick:()=>{u("juz"),i(30)},className:j("flex-1 py-2 text-sm font-semibold rounded-xl border",r==="juz"?"bg-indigo-600 text-white border-indigo-600":"bg-white text-indigo-600 border-indigo-200"),children:"Juz"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"number",value:h,onChange:g=>i(g.target.value),className:"flex-1 bg-white dark:bg-slate-950 border border-indigo-200 dark:border-indigo-800 rounded px-4 py-2 font-bold focus:outline-none focus:ring-2 focus:ring-indigo-500 text-slate-800 dark:text-slate-100"}),e.jsx("button",{onClick:S,className:"bg-indigo-600 text-white px-6 font-bold rounded active:scale-95 transition-transform",children:"Save"})]})]}):e.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded p-4 shadow-sm text-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-indigo-500/20 rounded-full blur-2xl -mr-10 -mt-10"}),e.jsxs("div",{className:"flex justify-between items-start mb-6 relative z-10",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[e.jsx(E,{className:"w-4 h-4"})," Quran Goal"]}),e.jsxs("div",{className:"mt-2 flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl font-black",children:t}),e.jsxs("span",{className:"text-slate-400 font-medium",children:["/ ",a.value," ",a.type]})]})]}),e.jsx("button",{onClick:()=>o(!0),className:"p-2 bg-slate-800 rounded-full text-slate-400 hover:text-white transition-colors",children:e.jsx(P,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex justify-between text-xs font-bold mb-2",children:[e.jsx("span",{className:"text-slate-300",children:"Completion"}),e.jsxs("span",{className:"text-white",children:[w,"%"]})]}),e.jsx("div",{className:"w-full bg-slate-800 rounded-full h-3 overflow-hidden mb-3",children:e.jsx("div",{className:"h-full bg-emerald-500 rounded-full transition-all duration-1000",style:{width:`${Math.min(w,100)}%`}})}),e.jsxs("div",{className:"flex justify-between items-center text-xs font-semibold bg-slate-800/50 py-2 px-3 rounded",children:[e.jsxs("span",{className:"text-slate-400",children:["Pace target: ",k]}),e.jsx("span",{className:N,children:v})]})]})]})},$=()=>{const{loading:x,error:l,ramadanData:n,updateRamadanDay:a,updateQuranGoal:m,hijriDate:o}=z(),[r,u]=c.useState(new Date);if(c.useEffect(()=>{const t=setInterval(()=>u(new Date),6e4);return()=>clearInterval(t)},[]),x)return e.jsx("div",{className:"p-4 text-center mt-16 text-slate-500 animate-pulse",children:"Loading Tracker..."});if(l)return e.jsx("div",{className:"p-4 text-center text-red-500",children:l});if(!o?.isRamadan)return e.jsxs("div",{className:"p-6 text-center mt-16 text-slate-500",children:[e.jsx(D,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Tracking is paused."}),e.jsx("p",{className:"text-sm",children:"It is currently not Ramadan."})]});const i=r.toLocaleDateString("en-CA"),d=n?.days?.[i]||{},s=(t,p)=>{a(i,{[t]:p})};return e.jsxs("div",{className:"space-y-6 pb-24",children:[e.jsxs("header",{className:"mb-2 px-2",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Worship & Dhikr"}),e.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"Enter your daily recitation counts below."})]}),e.jsx(G,{ramadanData:n,updateQuranGoal:m,currentDay:o.day}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(b,{title:"Tahlil (La ilaha illAllah)",count:d.tahlil||0,target:100,onSave:t=>s("tahlil",t),accentClass:"bg-blue-500"}),e.jsx(b,{title:"Salawat",count:d.salawat||0,target:100,onSave:t=>s("salawat",t),accentClass:"bg-indigo-500"}),e.jsx(b,{title:"Istighfar",count:d.istighfar||0,target:100,onSave:t=>s("istighfar",t),accentClass:"bg-violet-500"})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200 dark:border-slate-800",children:[e.jsx("h2",{className:"px-2 text-lg font-bold text-slate-900 dark:text-white",children:"Daily Quran Log"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(b,{title:"Pages Read",count:d.quranPages||0,target:0,onSave:t=>s("quranPages",t),accentClass:"bg-emerald-500"}),e.jsx(b,{title:"Juz Read",count:d.quranJuz||0,target:0,onSave:t=>s("quranJuz",t),accentClass:"bg-emerald-600"})]})]})]})};export{$ as default};
