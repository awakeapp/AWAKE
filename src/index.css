@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html,
  body {
    background-color: #ffffff;
    /* contain = prevents scroll-bleed to parent/browser-chrome
       but ALLOWS the native iOS elastic bounce within each scroll container.
       This is the WhatsApp / native-app behavior. */
    overscroll-behavior-y: contain;
    -webkit-overflow-scrolling: touch;
  }

  /* Regional Typography Overrides */
  html[lang="en"],
  html[lang="en"] * {
    font-family: "DM Sans", sans-serif !important;
  }
  html[lang="ar"],
  html[lang="ar"] * {
    font-family: "Cairo", sans-serif !important;
    letter-spacing: 0.02em;
    line-height: var(--lh-arabic, 1.8);
  }

  html[lang="kn"],
  html[lang="kn"] * {
    font-family: "Anek Kannada", sans-serif !important;
  }

  html[lang="ml"],
  html[lang="ml"] * {
    font-family: "Anek Malayalam", sans-serif !important;
  }

  html.dark,
  html.dark body {
    background-color: #020617;
  }
  body {
    @apply bg-white text-slate-900 antialiased dark:bg-[#020617] dark:text-slate-50 transition-colors duration-0;
    padding-top: env(safe-area-inset-top);
  }

  /* ═══ Cross-Platform Normalization ═══════════════════════ */

  *,
  *::before,
  *::after {
    -webkit-tap-highlight-color: transparent;
    -webkit-text-size-adjust: 100%;
    text-size-adjust: 100%;
  }

  html {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    -webkit-user-select: none;
    user-select: none;
    -webkit-touch-callout: none;
  }

  /* Force remove ALL platform-native form control styling. */
  input:not([type="checkbox"]):not([type="radio"]):not([type="range"]),
  textarea,
  select {
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    border-radius: 0;
    font: inherit;
    color: inherit;
  }

  /* Keep text selection enabled for inputs and textareas */
  input, textarea, [contenteditable="true"] {
    -webkit-user-select: text;
    user-select: text;
    -webkit-touch-callout: default;
  }

  /* Restore pointer for interactive elements */
  button, select, [role="button"] {
    cursor: pointer;
  }

  /* Prevent iOS auto-zoom on focused inputs */
  input[type="text"],
  input[type="email"],
  input[type="password"],
  input[type="number"],
  input[type="tel"],
  input[type="url"],
  input[type="search"],
  textarea,
  select {
    font-size: 16px;
  }

  /* Remove Android Chrome autofill blue/yellow background */
  input:-webkit-autofill,
  input:-webkit-autofill:hover,
  input:-webkit-autofill:focus {
    -webkit-box-shadow: 0 0 0 1000px transparent inset;
    transition: background-color 5000s ease-in-out 0s;
  }

  /* Global: eliminate 300ms tap delay */
  button,
  a,
  [role="button"],
  label,
  [tabindex] {
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
  }

  /* Global scrollbar removal for app-like clean UI */
  * {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  *::-webkit-scrollbar {
    display: none;
  }

  /* Instant theme switch lock */
  .theme-switching, .theme-switching * {
    transition: none !important;
  }

  /* ═══ Micro-Interaction Layer ════════════════════════════
     WhatsApp-style smooth press feedback:
     – Immediate response (no delay)
     – Subtle ease-out scale on press
     – Smooth color/opacity transitions
     – No heavy animations, no layout shift */

  /* All interactive elements get a smooth base transition */
  button,
  a,
  [role="button"],
  .cursor-pointer {
    transition: transform 180ms cubic-bezier(0.22, 1, 0.36, 1),
                opacity 150ms ease-out,
                background-color 150ms ease-out,
                color 150ms ease-out,
                box-shadow 200ms ease-out;
    will-change: transform;
  }

  /* Subtle press-down effect — barely visible but tactile */
  button:active:not(:disabled),
  a:active,
  [role="button"]:active {
    transform: scale(0.97);
  }

  /* Cards and list items — very light press */
  .rounded-2xl:active,
  .rounded-xl:active,
  .rounded-3xl:active,
  [class*="rounded-"]:active {
    transform: scale(0.985);
    transition: transform 120ms cubic-bezier(0.22, 1, 0.36, 1);
  }

  /* Fixed headers: prevent any transform/bounce inheritance */
  [class*="fixed"][class*="top-0"],
  [class*="fixed"][class*="bottom-0"] {
    transform: none !important;
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
  }

  /* Scrollable containers get elastic bounce behavior */
  .overflow-y-auto,
  .overflow-y-scroll,
  .overflow-auto,
  [class*="overflow-y-auto"],
  [class*="overflow-auto"] {
    overscroll-behavior-y: contain;
    -webkit-overflow-scrolling: touch;
  }
}

@layer components {
  .btn-primary {
    @apply bg-primary-600 text-white hover:bg-primary-700 focus:ring-4 focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 focus:outline-none transition-colors dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800;
  }

  .btn-secondary {
    @apply py-2.5 px-5 me-2 mb-2 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-100 dark:focus:ring-gray-700 dark:bg-slate-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700;
  }

  .input-field {
    @apply bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500;
  }

  .card {
    @apply block max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 dark:bg-slate-800 dark:border-slate-700 dark:hover:bg-slate-700;
  }
}

/* Premium Workspace Utilities (Additive) */
@layer components {
  .glass-panel {
    @apply bg-white/70 backdrop-blur-xl border border-white/20 shadow-xl dark:bg-slate-900/70 dark:border-white/10;
  }

  .glass-button {
    @apply bg-white/20 hover:bg-white/30 active:bg-white/40 backdrop-blur-md border border-white/20 text-slate-800 dark:text-white transition-all duration-300;
  }

  .premium-gradient-text {
    @apply bg-clip-text text-transparent bg-gradient-to-r from-primary-500 via-purple-500 to-pink-500 font-bold;
  }

  /* Hyper-Modern Design System */
  .glass-card {
    @apply bg-white/60 dark:bg-slate-900/60 backdrop-blur-xl border border-white/40 dark:border-white/10 shadow-lg transition-all duration-300;
  }

  .neumorphic-soft {
    box-shadow:
      8px 8px 16px rgba(0, 0, 0, 0.05),
      -8px -8px 16px rgba(255, 255, 255, 0.8);
  }

  .dark .neumorphic-soft {
    box-shadow:
      8px 8px 16px rgba(0, 0, 0, 0.3),
      -8px -8px 16px rgba(255, 255, 255, 0.02);
  }

  .bg-radial {
    background: radial-gradient(ellipse at top, #f8fafc 0%, #e2e8f0 100%);
  }

  .dark .bg-radial {
    background: radial-gradient(ellipse at top, #0f172a 0%, #020617 100%);
  }
}

@layer utilities {
  .animate-float {
    animation: float 6s ease-in-out infinite;
  }

  .animate-fade-in-up {
    animation: fadeInUp 0.5s ease-out forwards;
  }

  .animate-pulse-aura {
    animation: pulseAura 3s ease-in-out infinite;
  }

  .animate-micro-bounce {
    animation: microBounce 0.3s ease-out;
  }

  .animate-leaf-float {
    animation: leafFloat 4s ease-in-out infinite;
  }

  .animate-gradient-flow {
    animation: gradientFlow 8s ease-in-out infinite;
  }

  .perspective-1000 {
    perspective: 1000px;
  }

  .preserve-3d {
    transform-style: preserve-3d;
  }

  /* Smooth horizontal scroll — momentum on iOS, no 300ms touch delay */
  .scroll-smooth-x {
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
    touch-action: pan-x;
  }

  /* Utility: tap highlight removed for native feel */
  .tap-highlight-transparent {
    -webkit-tap-highlight-color: transparent;
  }
}

@keyframes float {
  0% {
    transform: translateY(0px);
  }

  50% {
    transform: translateY(-10px);
  }

  100% {
    transform: translateY(0px);
  }
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes pulseAura {
  0%,
  100% {
    opacity: 0.6;
    transform: scale(1);
  }

  50% {
    opacity: 0.8;
    transform: scale(1.05);
  }
}

@keyframes microBounce {
  0%,
  100% {
    transform: translateY(0);
  }

  50% {
    transform: translateY(-4px);
  }
}

@keyframes leafFloat {
  0%,
  100% {
    transform: translateY(0) rotate(0deg);
  }

  50% {
    transform: translateY(-8px) rotate(2deg);
  }
}

@keyframes gradientFlow {
  0%,
  100% {
    background-position: 0% 50%;
  }

  50% {
    background-position: 100% 50%;
  }
}
