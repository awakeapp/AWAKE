import{z as b,w as g,K as j,f as u,r as k,j as e,V as f,m as N,Y as v,O as w,Q as y,Z as C,$ as D}from"./index-9msspAXs.js";import{A as m,a as x}from"./AppCard-BD1UyFUM.js";import{T}from"./trending-up-kT6XmkFT.js";import{C as A}from"./circle-x-yBSa2Ww0.js";const O=()=>{b();const{dailyData:t}=g(),{formattedDate:i,setDate:S,isToday:M}=j(),{user:J}=u(),[h,o]=k.useState(!1),d=t.tasks?.length||0,l=t.tasks?.filter(s=>s.status==="checked")||[],n=t.tasks?.filter(s=>s.status==="missed")||[],p=d>0?Math.round(l.length/d*100):0,a=[];t.habits?.junkFood&&a.push("Ate Junk Food"),t.habits?.sugar&&a.push("Consumed Sugar"),t.habits?.coldDrinks&&a.push("Drank Cold Drinks"),t.habits?.screenTime>2&&a.push(`High Screen Time (${t.habits.screenTime}h)`);const c=[...n.map(s=>`Missed task: ${s.name}`),...a.map(s=>`Avoid: ${s}`)];return e.jsx(f,{title:"History",showBack:!0,rightNode:e.jsx("button",{onClick:()=>o(!0),className:"p-2 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-800 text-indigo-600 dark:text-indigo-400 rounded-xl transition-all shadow-sm active:scale-95",children:e.jsx(D,{className:"w-5 h-5"})}),renderFloating:e.jsx(C,{isOpen:h,onClose:()=>o(!1)}),children:e.jsx("div",{className:"space-y-6",children:e.jsxs(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"space-y-4",children:[e.jsx("div",{className:"text-center mb-6",children:e.jsxs("h3",{className:"text-base font-medium text-slate-500 dark:text-slate-400",children:["Overview for ",e.jsx("span",{className:"text-slate-900 dark:text-white font-semibold",children:new Date(i+"T00:00:00").toLocaleDateString(void 0,{dateStyle:"long"})})]})}),e.jsxs(m,{className:"bg-gradient-to-br from-indigo-500 to-purple-600 text-white border-none shadow-xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-10",children:e.jsx(v,{size:120})}),e.jsxs(x,{className:"p-6 relative z-10 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-indigo-200 font-medium mb-1",children:"Daily Score"}),e.jsxs("div",{className:"text-4xl font-bold tracking-tight flex items-baseline gap-1",children:[p,e.jsx("span",{className:"text-xl opacity-60",children:"%"})]}),e.jsxs("p",{className:"text-sm text-indigo-100 mt-2 opacity-80",children:[l.length," / ",d," tasks completed"]})]}),e.jsx("div",{className:"w-24 h-24 rounded-full border-8 border-white/20 flex items-center justify-center relative",children:e.jsx(T,{className:"w-10 h-10 text-white"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 p-4 rounded-2xl border border-emerald-100 dark:border-emerald-800/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(w,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"}),e.jsx("span",{className:"font-semibold text-emerald-900 dark:text-emerald-100",children:"Completed"})]}),e.jsx("p",{className:"text-xl font-semibold text-emerald-700 dark:text-emerald-300",children:l.length})]}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-4 rounded-2xl border border-red-100 dark:border-red-800/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(A,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),e.jsx("span",{className:"font-semibold text-red-900 dark:text-red-100",children:"Missed"})]}),e.jsx("p",{className:"text-xl font-semibold text-red-700 dark:text-red-300",children:n.length})]})]}),a.length>0&&e.jsx(m,{className:"border-red-100 bg-red-50/50 dark:bg-red-900/10 dark:border-red-900/30",children:e.jsxs(x,{className:"p-5",children:[e.jsxs("h4",{className:"font-semibold text-red-800 dark:text-red-200 flex items-center gap-2 mb-3",children:[e.jsx(y,{className:"w-5 h-5"}),"Violations Detected"]}),e.jsx("ul",{className:"space-y-2",children:a.map((s,r)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm text-red-700 dark:text-red-300",children:[e.jsx("span",{className:"mt-1.5 w-1.5 h-1.5 rounded-full bg-red-400 shrink-0"}),s]},r))})]})}),c.length>0?e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 rounded-2xl p-5 border border-slate-200 dark:border-slate-800",children:[e.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-3 uppercase text-xs tracking-wider",children:"Areas to Improve"}),e.jsx("ul",{className:"space-y-3",children:c.map((s,r)=>e.jsxs("li",{className:"flex gap-3 text-sm text-slate-600 dark:text-slate-400",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-white dark:bg-slate-800 shadow-sm flex items-center justify-center shrink-0 text-slate-400 text-xs font-bold border border-slate-100 dark:border-slate-700",children:r+1}),e.jsx("span",{className:"py-0.5",children:s})]},r))})]}):e.jsx("div",{className:"bg-emerald-50 dark:bg-emerald-900/10 rounded-2xl p-6 text-center border-dashed border-2 border-emerald-100 dark:border-emerald-800/30",children:e.jsx("p",{className:"text-emerald-700 dark:text-emerald-300 font-medium",children:"No improvements needed! Perfect day!"})})]},i)})})};export{O as default};
