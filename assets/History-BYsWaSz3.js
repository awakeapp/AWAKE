import{k as g,l as C,e as y,r as x,j as e,P as S,p as m,m as T,Q as M,C as A,K as H}from"./main-Kai4FafK.js";import{C as u,c as f}from"./Card-DgD0FJqU.js";import{T as J}from"./trending-up-D7LDEm7U.js";import{C as O}from"./circle-x-CWw-aP-C.js";import{C as E}from"./circle-alert-Cx6xDdJ0.js";const K=()=>{const{dailyData:a}=g(),{formattedDate:i,setDate:k,isToday:P}=C(),{user:R}=y(),[j,h]=x.useState(!1),[N,v]=x.useState([]),{getHistory:w}=g();x.useEffect(()=>{const s=w(30).map(r=>{let d="none";r.score===100?d="perfect":r.score>=50?d="good":r.score>0?d="partial":r.data&&r.data.tasks&&(d="empty");const c=r.date.split("-");return{date:new Date(c[0],c[1]-1,c[2]),keyDate:r.date,status:d,score:r.score}});v(s)},[a]);const o=a.tasks?.length||0,n=a.tasks?.filter(t=>t.status==="checked")||[],b=a.tasks?.filter(t=>t.status==="missed")||[],D=o>0?Math.round(n.length/o*100):0,l=[];a.habits?.junkFood&&l.push("Ate Junk Food"),a.habits?.sugar&&l.push("Consumed Sugar"),a.habits?.coldDrinks&&l.push("Drank Cold Drinks"),a.habits?.screenTime>2&&l.push(`High Screen Time (${a.habits.screenTime}h)`);const p=[...b.map(t=>`Missed task: ${t.name}`),...l.map(t=>`Avoid: ${t}`)];return e.jsxs("div",{className:"pb-24 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Report History"}),e.jsx("button",{onClick:()=>h(!0),className:"p-2 bg-slate-100 hover:bg-slate-200 text-indigo-600 rounded-full transition-colors dark:bg-slate-800 dark:hover:bg-slate-700 dark:text-indigo-400",children:e.jsx(S,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"overflow-x-auto pb-4 -mx-4 px-4 scrollbar-hide",children:e.jsx("div",{className:"flex gap-3 w-max",children:N.map(t=>{const s=t.keyDate===i;return e.jsxs("button",{onClick:()=>k(t.date),className:m("flex flex-col items-center gap-1 min-w-[3.5rem] p-2 rounded-2xl transition-all border",s?"bg-indigo-600 border-indigo-600 shadow-lg shadow-indigo-500/30 scale-105":"bg-white border-slate-100 dark:bg-slate-900 dark:border-slate-800 hover:border-indigo-200"),children:[e.jsx("span",{className:m("text-[10px] font-bold uppercase",s?"text-indigo-200":"text-slate-400"),children:t.date.toLocaleDateString("en-US",{weekday:"short"})}),e.jsx("div",{className:m("w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold border-2",s?"bg-white text-indigo-700 border-transparent":"",!s&&t.status==="perfect"&&"bg-emerald-100 text-emerald-700 border-emerald-200",!s&&t.status==="good"&&"bg-blue-100 text-blue-700 border-blue-200",!s&&t.status==="partial"&&"bg-orange-100 text-orange-700 border-orange-200",!s&&(t.status==="none"||t.status==="empty")&&"bg-slate-50 text-slate-300 border-slate-100 dark:bg-slate-800 dark:border-slate-700"),children:t.date.getDate()})]},t.keyDate)})})}),e.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"space-y-4",children:[e.jsx("div",{className:"text-center mb-6",children:e.jsxs("h3",{className:"text-lg font-medium text-slate-500 dark:text-slate-400",children:["Overview for ",e.jsx("span",{className:"text-slate-900 dark:text-white font-bold",children:new Date(i+"T00:00:00").toLocaleDateString(void 0,{dateStyle:"long"})})]})}),e.jsxs(u,{className:"bg-gradient-to-br from-indigo-500 to-purple-600 text-white border-none shadow-xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-10",children:e.jsx(M,{size:120})}),e.jsxs(f,{className:"p-6 relative z-10 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-indigo-200 font-medium mb-1",children:"Daily Score"}),e.jsxs("div",{className:"text-5xl font-black tracking-tight flex items-baseline gap-1",children:[D,e.jsx("span",{className:"text-2xl opacity-60",children:"%"})]}),e.jsxs("p",{className:"text-sm text-indigo-100 mt-2 opacity-80",children:[n.length," / ",o," tasks completed"]})]}),e.jsx("div",{className:"w-24 h-24 rounded-full border-8 border-white/20 flex items-center justify-center relative",children:e.jsx(J,{className:"w-10 h-10 text-white"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 p-4 rounded-2xl border border-emerald-100 dark:border-emerald-800/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(A,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"}),e.jsx("span",{className:"font-bold text-emerald-900 dark:text-emerald-100",children:"Completed"})]}),e.jsx("p",{className:"text-2xl font-bold text-emerald-700 dark:text-emerald-300",children:n.length})]}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-4 rounded-2xl border border-red-100 dark:border-red-800/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(O,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),e.jsx("span",{className:"font-bold text-red-900 dark:text-red-100",children:"Missed"})]}),e.jsx("p",{className:"text-2xl font-bold text-red-700 dark:text-red-300",children:b.length})]})]}),l.length>0&&e.jsx(u,{className:"border-red-100 bg-red-50/50 dark:bg-red-900/10 dark:border-red-900/30",children:e.jsxs(f,{className:"p-5",children:[e.jsxs("h4",{className:"font-bold text-red-800 dark:text-red-200 flex items-center gap-2 mb-3",children:[e.jsx(E,{className:"w-5 h-5"}),"Violations Detected"]}),e.jsx("ul",{className:"space-y-2",children:l.map((t,s)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm text-red-700 dark:text-red-300",children:[e.jsx("span",{className:"mt-1.5 w-1.5 h-1.5 rounded-full bg-red-400 shrink-0"}),t]},s))})]})}),p.length>0?e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 rounded-2xl p-5 border border-slate-200 dark:border-slate-800",children:[e.jsx("h4",{className:"font-bold text-slate-700 dark:text-slate-300 mb-3 uppercase text-xs tracking-wider",children:"Areas to Improve"}),e.jsx("ul",{className:"space-y-3",children:p.map((t,s)=>e.jsxs("li",{className:"flex gap-3 text-sm text-slate-600 dark:text-slate-400",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-white dark:bg-slate-800 shadow-sm flex items-center justify-center shrink-0 text-slate-400 text-xs font-bold border border-slate-100 dark:border-slate-700",children:s+1}),e.jsx("span",{className:"py-0.5",children:t})]},s))})]}):e.jsx("div",{className:"bg-emerald-50 dark:bg-emerald-900/10 rounded-2xl p-6 text-center border-dashed border-2 border-emerald-100 dark:border-emerald-800/30",children:e.jsx("p",{className:"text-emerald-700 dark:text-emerald-300 font-medium",children:"No improvements needed! Perfect day!"})})]},i),e.jsx(H,{isOpen:j,onClose:()=>h(!1)})]})};export{K as default};
