import{n as E,x as C,r as h,j as e,a3 as L,M as D,a5 as I,O,ab as $,ac as A,am as U,af as B}from"./main-Kai4FafK.js";import{A as R}from"./award-CQNNZifO.js";import{s as j}from"./subMonths-B6S3iCIY.js";const P=()=>{const N=E(),{transactions:c,categories:x}=C(),[o,w]=h.useState(new Date),p=t=>{const d=$(t),y=A(t),r=c.filter(s=>!s.isDeleted&&U(new Date(s.date),{start:d,end:y})),f=r.filter(s=>s.type==="income").reduce((s,n)=>s+Number(n.amount),0),g=r.filter(s=>s.type==="expense").reduce((s,n)=>s+Number(n.amount),0),k=f-g,i={};r.filter(s=>s.type==="expense").forEach(s=>{const n=s.categoryId;s.splits?s.splits.forEach(l=>{i[l.categoryId]=(i[l.categoryId]||0)+Number(l.amount)}):n&&(i[n]=(i[n]||0)+Number(s.amount))});const M=Object.entries(i).map(([s,n])=>({id:s,amount:n,name:x.find(l=>l.id===s)?.name||"Unknown",icon:x.find(l=>l.id===s)?.icon,color:x.find(l=>l.id===s)?.color})).sort((s,n)=>n.amount-s.amount).slice(0,5),S=r.filter(s=>s.type==="expense").sort((s,n)=>Number(n.amount)-Number(s.amount))[0];return{income:f,expense:g,savings:k,topCategories:M,largestExpense:S,count:r.length}},a=h.useMemo(()=>p(o),[o,c]),m=h.useMemo(()=>p(j(o)),[o,c]),u=t=>{w(d=>t>0?B(d,1):j(d))},b=a.expense-m.expense,v=m.expense>0?Math.round(b/m.expense*100):0;return e.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-950 pb-20",children:[e.jsxs("header",{className:"bg-slate-900 text-white p-6 pb-12 rounded-b-[2.5rem] shadow-2xl shadow-slate-900/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("button",{onClick:()=>N("/finance"),className:"p-2 bg-white/10 rounded-xl hover:bg-white/20 transition-colors",children:e.jsx(L,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"flex items-center gap-3 bg-white/10 rounded-full px-1 p-1",children:[e.jsx("button",{onClick:()=>u(-1),className:"p-1 hover:bg-white/10 rounded-full transition-colors",children:e.jsx(D,{className:"w-4 h-4 text-slate-300"})}),e.jsx("span",{className:"text-sm font-bold min-w-[80px] text-center",children:I(o,"MMM yyyy")}),e.jsx("button",{onClick:()=>u(1),className:"p-1 hover:bg-white/10 rounded-full transition-colors",children:e.jsx(O,{className:"w-4 h-4 text-slate-300"})})]}),e.jsx("div",{className:"w-9"})," "]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-widest mb-2",children:"Net Savings"}),e.jsxs("h2",{className:`text-4xl font-black ${a.savings>=0?"text-emerald-400":"text-red-400"}`,children:[a.savings>=0?"+":"","‚Çπ",a.savings.toLocaleString()]})]})]}),e.jsxs("div",{className:"px-6 -mt-8 space-y-6",children:[e.jsx("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-3xl shadow-xl shadow-slate-200/50 dark:shadow-none border border-slate-100 dark:border-slate-800",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm font-bold mb-1",children:[e.jsx("span",{className:"text-slate-500",children:"Income"}),e.jsxs("span",{className:"text-emerald-500",children:["‚Çπ",a.income.toLocaleString()]})]}),e.jsx("div",{className:"h-2 w-full bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-emerald-500 rounded-full",style:{width:"100%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm font-bold mb-1",children:[e.jsx("span",{className:"text-slate-500",children:"Expense"}),e.jsxs("span",{className:"text-red-500",children:["‚Çπ",a.expense.toLocaleString()]})]}),e.jsx("div",{className:"h-2 w-full bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-red-500 rounded-full",style:{width:`${a.income>0?Math.min(a.expense/a.income*100,100):100}%`}})})]})]})}),e.jsxs("div",{className:"bg-indigo-500 text-white p-6 rounded-3xl shadow-xl shadow-indigo-500/30 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full blur-3xl -mr-8 -mt-8 pointer-events-none"}),e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(R,{className:"w-5 h-5 text-indigo-200"}),"Insights"]}),e.jsxs("div",{className:"space-y-3 relative z-10",children:[e.jsx("div",{className:"p-3 bg-white/10 rounded-2xl backdrop-blur-sm",children:e.jsxs("p",{className:"text-sm font-medium",children:["You spent ",e.jsxs("span",{className:"font-bold",children:[Math.abs(v),"% ",b>0?"more":"less"]})," than last month."]})}),a.largestExpense&&e.jsxs("div",{className:"p-3 bg-white/10 rounded-2xl backdrop-blur-sm",children:[e.jsx("p",{className:"text-xs text-indigo-200 uppercase font-bold mb-1",children:"Largest Expense"}),e.jsx("p",{className:"font-bold text-sm truncate",children:a.largestExpense.note||"Unknow Expense"}),e.jsxs("p",{className:"text-xs text-indigo-100",children:["‚Çπ",Number(a.largestExpense.amount).toLocaleString()]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white mb-4 pl-2",children:"Top Spending"}),e.jsxs("div",{className:"space-y-3",children:[a.topCategories.map(t=>e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-800 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-lg ${t.color?t.color+"/20":"bg-slate-100"} ${t.color?.replace("bg-","text-")||"text-slate-500"}`,children:[t.icon==="Utensils"&&"üçΩÔ∏è",t.icon==="Bus"&&"üöå",t.icon==="ShoppingBag"&&"üõçÔ∏è",!t.icon&&t.name[0]]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-900 dark:text-white",children:t.name}),e.jsxs("p",{className:"text-xs text-slate-400",children:[Math.round(t.amount/a.expense*100),"% of total"]})]})]}),e.jsxs("p",{className:"font-bold text-slate-900 dark:text-white",children:["‚Çπ",t.amount.toLocaleString()]})]},t.id)),a.topCategories.length===0&&e.jsx("p",{className:"text-center text-slate-400 text-sm py-4",children:"No spending data for this month."})]})]})]})]})};export{P as default};
