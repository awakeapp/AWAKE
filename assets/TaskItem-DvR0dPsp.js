import{j as o,E as c,m as F,X as $,C as v,M as j,aB as q,aC as E,T as R,r as u,x as V,a2 as X,P as Y,a8 as J,A as K,$ as Q}from"./index-9msspAXs.js";import{S as h}from"./sun-BQlunvnj.js";import{B as z}from"./book-open-CJ6BBX_i.js";import{H as Z,B as ee,D as oe,F as te,W as ae,a as re,G as ne,P as se,L as ie,U as D,b as ce,C as de,S as le,c as pe,d as me,e as ge,f as ue,g as he,h as ye,V as xe,T as y,A as be}from"./waves-DckeWPKZ.js";import{F as fe}from"./flame-DbTI9LYX.js";import{B as we}from"./bike-Dlxb_FhM.js";import{B as ke,S as ve,M as je}from"./shopping-bag-CfRJAWU5.js";import{M as Ce}from"./mail-DbGZhtgd.js";import{W as Ne}from"./wallet-B-Jnzj-V.js";import{C as Be}from"./circle-check-big-LAuxg_Ck.js";import{I as Pe}from"./ItemMenu-VUnNMYsH.js";const Te=({status:e,onClick:r,disabled:t})=>{const s=e==="checked"||e==="completed";return o.jsx("button",{onClick:r,disabled:t,className:c("relative inline-flex h-6 w-11 shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none",s?"bg-indigo-500":"bg-slate-200 dark:bg-slate-700",t&&"opacity-50 cursor-not-allowed"),children:o.jsx("span",{className:c("pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",s?"translate-x-5":"translate-x-0")})})},Se=({status:e,onClick:r,disabled:t})=>{const s={unchecked:"bg-slate-100 border-slate-300 text-transparent hover:bg-slate-200",checked:"bg-emerald-500 border-emerald-500 text-white shadow-emerald-200",missed:"bg-red-500 border-red-500 text-white shadow-red-200"},p={unchecked:null,checked:o.jsx(v,{strokeWidth:3,size:14}),missed:o.jsx($,{strokeWidth:3,size:14})};return o.jsx("button",{onClick:r,disabled:t,className:c("w-7 h-7 rounded-lg border-2 flex items-center justify-center transition-all duration-200 shadow-sm",s[e],t&&"opacity-50 cursor-not-allowed",!t&&"hover:scale-105 "),children:o.jsx(F.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.5,opacity:0},transition:{duration:.2},children:p[e]},e)})},O=[{category:"Islamic",keywords:["fajr","maghrib","isha","taraweeh","tahajjud","ramadan","fast","suhoor","iftar"],icon:"Moon",component:j},{category:"Islamic Day",keywords:["dhuhr","asr","jummah"],icon:"Sun",component:h},{category:"Holy Book",keywords:["quran","bible","torah","gita","scripture","read","recite","tilawat"],icon:"BookOpen",component:z},{category:"Prayer Generic",keywords:["pray","salah","namaz","dua","worship","devotion","dhikr","tasbih","rosary","meditate"],icon:"Hand",component:Z},{category:"Place of Worship",keywords:["masjid","mosque","church","temple","synagogue","gurdwara"],icon:"Building2",component:ee},{category:"Hindu",keywords:["puja","aarti","havan","chant","mantra"],icon:"Flame",component:fe},{category:"Christian",keywords:["sunday service","mass","fellowship"],icon:"Sun",component:h},{category:"Gym",keywords:["gym","lift","weight","train","muscle","crossfit","strength","bench","squat"],icon:"Dumbbell",component:oe},{category:"Cardio",keywords:["run","walk","jog","hike","treadmill","step"],icon:"Footprints",component:te},{category:"Cycling",keywords:["bike","cycle","spin","ride"],icon:"Bike",component:we},{category:"Water Sports",keywords:["swim","pool","surf","beach"],icon:"Waves",component:ae},{category:"Yoga/Mind",keywords:["yoga","stretch","pilates","breath","mindfulness"],icon:"Brain",component:re},{category:"Hydration",keywords:["water","drink","hydrate","bottle","h2o"],icon:"GlassWater",component:ne},{category:"Meds",keywords:["pill","vitamin","supplement","meds","medicine","prescription"],icon:"Pill",component:se},{category:"Work",keywords:["work","job","client","project","business","office","career"],icon:"Briefcase",component:ke},{category:"Deep Work",keywords:["focus","deep work","code","program","dev","debug","laptop"],icon:"Laptop",component:ie},{category:"Comms",keywords:["email","slack","outlook","message","inbox","reply"],icon:"Mail",component:Ce},{category:"Meetings",keywords:["meeting","call","zoom","standup","sync","discuss"],icon:"Users",component:D},{category:"Learning",keywords:["study","learn","course","class","lecture","homework","exam","quiz"],icon:"GraduationCap",component:ce},{category:"Food",keywords:["eat","breakfast","lunch","dinner","snack","meal","food","cook","chef","baking"],icon:"Utensils",component:q},{category:"Caffeine",keywords:["coffee","tea","brew","espresso","matcha","latte"],icon:"Coffee",component:de},{category:"Cleaning",keywords:["clean","tidy","declutter","organize","vacuum","mop","dust"],icon:"Sparkles",component:E},{category:"Laundry",keywords:["laundry","wash","clothes","iron","fold"],icon:"Shirt",component:le},{category:"Trash",keywords:["trash","garbage","bin","waste","recycle"],icon:"Trash2",component:R},{category:"Groceries",keywords:["shop","grocery","buy","store","market","mall"],icon:"ShoppingBag",component:ve},{category:"Family",keywords:["family","kids","baby","child","son","daughter","play"],icon:"Baby",component:pe},{category:"Social",keywords:["friend","hangout","party","date","visit","guest"],icon:"Users",component:D},{category:"Pets",keywords:["dog","cat","pet","walk dog","feed"],icon:"Dog",component:me},{category:"Finance",keywords:["pay","bill","budget","finance","money","bank","invest","save"],icon:"Wallet",component:Ne},{category:"Sleep",keywords:["sleep","nap","bed","wake","dream","snooze"],icon:"Bed",component:ge},{category:"Bath",keywords:["shower","bath","groom","brush","shave","spa","facewash"],icon:"Bath",component:ue},{category:"Read",keywords:["read book","novel","article","news"],icon:"BookOpen",component:z},{category:"Write",keywords:["write","journal","diary","blog","note"],icon:"PenTool",component:he},{category:"Gaming",keywords:["game","play","xbox","ps5","steam"],icon:"Gamepad2",component:ye},{category:"Media",keywords:["watch","movie","tv","netflix","youtube","video"],icon:"Video",component:xe},{category:"Music",keywords:["music","listen","podcast","spotify"],icon:"Music",component:je}],k=()=>{const e=new Date().getHours();return e>=5&&e<18?{icon:"Sun",component:h}:{icon:"Moon",component:j}},Me=e=>{if(!e||typeof e!="string")return k();const r=e.trim().toLowerCase();if(!r)return k();for(const t of O)if(t.keywords.some(s=>r.includes(s)))return{icon:t.icon,component:t.component};return k()},Ie=e=>{const r=O.find(t=>t.icon===e);return r?r.component:e==="Sun"?h:e==="Moon"?j:e==="CheckCircle"?Be:e==="Tag"?y:y},We=u.memo(({task:e,onUpdateStatus:r,isLocked:t,variant:s="default",onReschedule:p,onDelete:C,isRoutine:x=!1,onEdit:m,isSelectMode:d=!1,isSelected:l=!1,onSelect:N,onLongPress:B})=>{const P=e.name||e.title||"Untitled";let b=e.icon?Ie(e.icon):Me(P).component;b||(b=y);const{activePopoverId:T,setActivePopoverId:G}=V(),{timeFormat:U}=X(),i=e.status==="completed"||e.status==="checked",n=s==="carry_over",S=T===e.id,[g,M]=u.useState(!1),[I,A]=u.useState(!1),f=u.useRef(null),H=a=>{a.stopPropagation(),G(T===e.id?null:e.id)},W=a=>{d||(f.current=setTimeout(()=>{B&&(navigator.vibrate&&navigator.vibrate(50),B(e.id))},500))},w=()=>{f.current&&clearTimeout(f.current)};return o.jsxs(Y,{layout:!0,style:{zIndex:I||S||g?150:0,position:"relative"},initial:!1,animate:{opacity:i?.6:1},onClick:a=>{d&&N?N(e.id):m&&!n&&m(e)},onMouseDown:W,onMouseUp:w,onMouseLeave:w,onTouchStart:W,onTouchEnd:w,block:!0,scaleDown:.98,className:c("group relative flex items-center gap-2.5 sm:gap-3 p-2.5 rounded-2xl border transition-all duration-200 cursor-pointer",l?"bg-indigo-50 dark:bg-indigo-900/20 border-indigo-200 dark:border-indigo-800":n?"bg-orange-50/40 dark:bg-orange-950/20 border-orange-100/50 dark:border-orange-900/30":i?"bg-slate-50/50 dark:bg-slate-900/30 border-transparent shadow-none":"bg-white/80 dark:bg-slate-900/80 backdrop-blur-md border-slate-100 dark:border-slate-800 shadow-[0_8px_30px_rgb(0,0,0,0.04)] dark:shadow-none hover:shadow-[0_20px_40px_rgb(0,0,0,0.06)] hover:border-indigo-100/50 dark:hover:border-indigo-900/30",I||S||g?"z-[150]":"z-0"),children:[!i&&!n&&o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-50/50 to-transparent dark:from-indigo-900/5 dark:to-transparent rounded-[1.5rem] -z-10 opacity-0 group-hover:opacity-100 transition-opacity duration-200"}),!n&&e.time&&o.jsx("div",{className:"shrink-0 flex flex-col items-center justify-center min-w-[50px] py-1 px-1.5 bg-slate-50/50 dark:bg-slate-800/50 rounded-xl border border-slate-100/50 dark:border-slate-700/50",children:o.jsx("span",{className:"text-[14px] font-medium text-slate-800 dark:text-slate-100 tabular-nums leading-none tracking-tight",children:(()=>{const[a,_]=e.time.split(":").map(Number);if(U==="24h")return`${String(a).padStart(2,"0")}:${String(_).padStart(2,"0")}`;const L=a%12||12;return`${String(L).padStart(2,"0")}:${String(_).padStart(2,"0")}`})()})}),o.jsxs("div",{className:"flex items-center gap-2.5 sm:gap-3 flex-1 min-w-0",children:[o.jsx("div",{className:c("flex-shrink-0 w-8 h-8 rounded-xl flex items-center justify-center transition-colors duration-200",d&&l?"bg-indigo-600 text-white shadow-md ring-2 ring-indigo-500/30 ring-offset-1 dark:ring-offset-slate-900":n?"bg-orange-100 dark:bg-orange-900/30 text-orange-500 shadow-sm":i?"bg-slate-100 dark:bg-slate-800 text-slate-400":"bg-indigo-50/80 dark:bg-indigo-900/40 text-indigo-600 dark:text-indigo-400 shadow-sm"),children:d&&l?o.jsx(v,{className:"w-5 h-5",strokeWidth:3}):o.jsx(b,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),o.jsxs("div",{className:"flex flex-col flex-1 min-w-0 transition-opacity",children:[o.jsxs("div",{className:"flex items-start gap-2 w-full",children:[e.description&&o.jsxs("div",{className:"relative",children:[o.jsx("button",{onClick:a=>{a.stopPropagation(),M(!g)},className:"flex items-center justify-center p-0.5 mt-0.5 rounded-full text-slate-400 hover:text-indigo-500 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",children:o.jsx(J,{className:"w-3.5 h-3.5"})}),o.jsx(K,{children:g&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 z-[80]",onClick:a=>{a.stopPropagation(),M(!1)}}),o.jsx(F.div,{initial:{opacity:0,y:5,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.95},className:"absolute top-full left-0 mt-2 p-3 bg-white dark:bg-slate-800 rounded-[14px] shadow-xl border border-slate-100 dark:border-slate-700 w-56 sm:w-64 z-[90] text-[13px] leading-relaxed text-slate-600 dark:text-slate-300 pointer-events-auto shadow-[0_20px_40px_rgba(0,0,0,0.1)] dark:shadow-[0_20px_48px_rgba(0,0,0,0.55)]",onClick:a=>a.stopPropagation(),children:e.description})]})})]}),o.jsx("span",{className:c("text-[14px] sm:text-[15px] font-medium tracking-tight transition-colors duration-200 leading-tight whitespace-pre-wrap break-words [overflow-wrap:anywhere] block w-full",n?"text-slate-600 dark:text-slate-400":i?"text-slate-400 line-through decoration-slate-300/60":"text-slate-900 dark:text-slate-50 group-hover:text-indigo-700 dark:group-hover:text-indigo-300"),children:P})]}),!n&&o.jsxs("div",{className:"flex items-center gap-2 mt-0.5 overflow-hidden",children:[e.priority&&o.jsx("span",{className:c("text-[9px] font-bold uppercase tracking-wider px-1.5 py-0.5 rounded-md",e.priority==="High"?"bg-red-50 text-red-500 dark:bg-red-900/20":e.priority==="Medium"?"bg-amber-50 text-amber-500 dark:bg-amber-900/20":"bg-blue-50 text-blue-500 dark:bg-blue-900/20"),children:e.priority}),e.category&&!x&&o.jsxs("div",{className:"flex items-center gap-1 opacity-60",children:[o.jsx(y,{className:"w-2.5 h-2.5"}),o.jsx("span",{className:"text-[10px] font-medium text-slate-500 dark:text-slate-400 truncate",children:e.category})]})]}),n&&o.jsx("div",{className:"flex items-center gap-2 mt-0.5",children:o.jsxs("span",{className:"text-[10px] text-orange-500/80 font-bold uppercase tracking-wider",children:["ROLLOVER â€¢ ",e.date]})})]})]}),o.jsx("div",{className:"flex-shrink-0 flex items-start mt-1 gap-1.5 sm:gap-2 pl-1",onClick:a=>d&&a.stopPropagation(),children:d?o.jsx("div",{className:"px-2 py-2 flex items-center justify-center",children:o.jsx("div",{className:c("w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all",l?"border-indigo-600 bg-indigo-600 dark:border-indigo-500 dark:bg-indigo-500":"border-slate-300 dark:border-slate-600"),children:l&&o.jsx(v,{className:"w-4 h-4 text-white",strokeWidth:3})})}):o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Pe,{onOpenChange:A,onEdit:m?()=>m(e):null,onDelete:C?()=>C(e.id):null,extraActions:[!t&&!i&&!x&&{label:"Reschedule",icon:Q,onClick:H},n&&{label:"Assign to Today",icon:be,onClick:()=>p&&p(e.id,"today")}].filter(Boolean)}),o.jsx("div",{className:"px-1 py-1 transition-opacity active:opacity-70 duration-150",onClick:a=>{a.stopPropagation(),r(e.id)},children:x?o.jsx(Te,{status:i?"checked":e.status||"unchecked",disabled:t}):o.jsx("div",{className:"scale-90 opacity-90 transition-all hover:scale-100 hover:opacity-100",children:o.jsx(Se,{status:i?"checked":e.status||"unchecked",disabled:t})})})]})})]})});We.displayName="TaskItem";export{We as T,Ie as g,Me as i};
