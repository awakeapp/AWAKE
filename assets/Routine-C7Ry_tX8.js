const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/UnlockDayModal-BafgARCS.js","assets/index-DgPxFht0.js","assets/index-Rke9f03G.css","assets/Input-C1Z0gFu2.js","assets/lock-open-3ebIgyvG.js"])))=>i.map(i=>d[i]);
import{j as e,h as We,l as ie,r as T,p as _e,A as ee,m as G,P as B,X as re,E as V,J as Ve,w as he,C as xe,T as Ce,K as Ee,o as Ye,O as $e,Q as Ze,R as qe,S as Te,U as ae,B as ge,z as Je,V as ye,W as Ke,H as je,_ as Qe}from"./index-DgPxFht0.js";import{T as Xe,i as se,g as oe}from"./TaskItem-CLQnptQP.js";import{A as et,a as tt}from"./AppCard-C1UXicHB.js";import{C as ne}from"./circle-check-big-B9yLGkBM.js";import{T as at}from"./toggle-left-DphJsawq.js";import{D as Oe}from"./DeleteConfirmationModal-CadwlCts.js";import{P as Ie}from"./pen-D-4zrPxo.js";import{P as le}from"./plus-BoOHfWjy.js";import{W as Se}from"./wallet-BOyL5lfP.js";import{G as st}from"./waves-By0uaDHT.js";import{S as rt}from"./smartphone-DGu3YEyP.js";import{S as lt,C as nt,P as it}from"./salad-ciZEpLDa.js";import{S as Me}from"./star-cDn63xzZ.js";import{T as ot}from"./trending-up-8k5Jv4_1.js";import{A as dt}from"./award-DckQoSFk.js";import{D as ct}from"./DateHeader-cVBDDgn_.js";import"./sun-XkKQiZor.js";import"./book-open-C1SyAtjd.js";import"./flame-Ctsa_DlH.js";import"./bike-BlRUdw_g.js";import"./shopping-bag-C9fA3pQP.js";import"./mail-Cp48oSNq.js";import"./ItemMenu-CxMDzUDN.js";import"./eye-C2e92q6p.js";import"./triangle-alert-BosfxxC0.js";const mt=({title:i,tasks:c,onUpdateStatus:n,isLocked:f})=>{if(!c||c.length===0)return null;const b=()=>{switch(i){case"EARLY MORNING":return"bg-indigo-500";case"BEFORE NOON":return"bg-blue-500";case"AFTER NOON":return"bg-amber-400";case"EVE/NIGHT":case"NIGHT":return"bg-indigo-900";default:return"bg-slate-500"}},k=c.filter(y=>y.status==="checked").length,v=c.length;return e.jsxs("section",{className:`mb-2 transition-all duration-300 ${f?"opacity-70 grayscale-[0.5] pointer-events-none":""}`,children:[e.jsxs("div",{className:"w-full flex items-center justify-between px-3 py-1.5 rounded-xl bg-white dark:bg-slate-900 shadow-sm ring-1 ring-slate-900/5 transition-all duration-200",children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:We("w-1 h-4 rounded-full",b())}),e.jsx("h3",{className:"text-[10px] font-bold text-slate-600 dark:text-slate-300 uppercase tracking-widest leading-none",children:i})]}),e.jsxs("span",{className:"text-[9px] font-bold text-slate-400 bg-slate-100 dark:bg-slate-800 px-1.5 py-0.5 rounded-md",children:[k,"/",v]})]}),e.jsx("div",{className:"mt-1.5",children:e.jsx("div",{className:"grid gap-2 px-0 pb-2",children:c.map(y=>e.jsx(Xe,{task:y,onUpdateStatus:n,isLocked:f,isRoutine:!0},y.id))})})]})},ut=({isOpen:i,onClose:c,onAdd:n})=>{ie(i);const[f,b]=T.useState(""),[k,v]=T.useState("toggle"),[y,j]=T.useState("hrs"),C=T.useMemo(()=>f.trim()?se(f.trim()).icon:null,[f]),D=C?oe(C):ne,I=()=>{f.trim()&&(n(f.trim(),k,y,C),p())},p=()=>{c(),setTimeout(()=>{b(""),v("toggle"),j("hrs")},300)};return _e.createPortal(e.jsx(ee,{children:i&&e.jsx(e.Fragment,{children:e.jsx(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:p,className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm flex items-end sm:items-center justify-center p-4 pb-32 sm:pb-6",style:{zIndex:9999999},children:e.jsxs(G.div,{initial:{y:100,opacity:0,scale:.95},animate:{y:0,opacity:1,scale:1},exit:{y:100,opacity:0,scale:.95},onClick:u=>u.stopPropagation(),className:"bg-white dark:bg-slate-900 w-full max-w-md rounded-3xl shadow-2xl border border-slate-100 dark:border-slate-800 flex flex-col max-h-[85dvh]",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-slate-100 dark:border-slate-800 shrink-0",children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Add New Habit"}),e.jsx(B,{onClick:p,scaleDown:.9,className:"p-2 -mr-2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 rounded-full transition-colors",children:e.jsx(re,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-6 overflow-y-auto custom-scrollbar",children:[e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"shrink-0 w-12 h-12 rounded-xl bg-indigo-50 dark:bg-indigo-900/30 flex items-center justify-center text-indigo-500 border border-indigo-100 dark:border-indigo-500/30",children:e.jsx(D,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1.5",children:"Habit Name"}),e.jsx("input",{autoFocus:!0,type:"text",value:f,onChange:u=>b(u.target.value),placeholder:"e.g. Read Books",className:"w-full text-base font-semibold bg-transparent border-b-2 border-slate-200 dark:border-slate-800 focus:border-indigo-500 rounded-none px-0 py-1 outline-none transition-colors dark:text-white placeholder:font-normal placeholder:text-slate-300"})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Tracking Type"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(B,{onClick:()=>v("toggle"),scaleDown:.96,className:V("p-3 rounded-xl border-2 flex flex-col items-center gap-2 transition-all duration-200 w-full",k==="toggle"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400":"border-slate-200 dark:border-slate-800 text-slate-400 hover:border-slate-300 dark:hover:border-slate-700"),children:[e.jsx(at,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold text-xs",children:"Yes / No"})]}),e.jsxs(B,{onClick:()=>v("number"),scaleDown:.96,className:V("p-3 rounded-xl border-2 flex flex-col items-center gap-2 transition-all duration-200 w-full",k==="number"?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400":"border-slate-200 dark:border-slate-800 text-slate-400 hover:border-slate-300 dark:hover:border-slate-700"),children:[e.jsx(Ve,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold text-xs",children:"Time / Duration"})]})]})]}),e.jsx(ee,{children:k==="number"&&e.jsx(G.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:e.jsxs("div",{className:"pt-2 pb-1",children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-2",children:"Track In"}),e.jsxs("div",{className:"flex bg-slate-100 dark:bg-slate-800 p-1 rounded-lg",children:[e.jsx(B,{onClick:()=>j("hrs"),scaleDown:.96,className:V("flex-1 py-1.5 text-xs font-bold rounded-md transition-all flex items-center justify-center",y==="hrs"?"bg-white dark:bg-slate-700 text-slate-900 dark:text-white shadow-sm":"text-slate-500 hover:text-slate-700"),children:"Hours"}),e.jsx(B,{onClick:()=>j("mins"),scaleDown:.96,className:V("flex-1 py-1.5 text-xs font-bold rounded-md transition-all flex items-center justify-center",y==="mins"?"bg-white dark:bg-slate-700 text-slate-900 dark:text-white shadow-sm":"text-slate-500 hover:text-slate-700"),children:"Minutes"})]})]})})})]}),e.jsx("div",{className:"p-6 pt-4 border-t border-slate-100 dark:border-slate-800 bg-white dark:bg-slate-900 shrink-0 pb-10 sm:pb-6",children:e.jsx(B,{onClick:I,disabled:!f.trim(),scaleDown:.96,block:!0,className:"w-full py-3.5 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-[14px] font-bold text-base shadow-lg transition-all disabled:opacity-50 flex justify-center items-center",children:"Create Habit"})})]})})})}),document.body)},xt=({id:i,icon:c,label:n,value:f,onChange:b,onDelete:k,disabled:v,isEditing:y})=>{const j=oe(c);return e.jsxs("div",{className:"flex items-center justify-between py-3.5 border-b border-slate-50 dark:border-slate-800/50 last:border-0 group",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1 mr-2",children:[e.jsx("div",{className:"w-9 h-9 rounded-xl bg-slate-50 dark:bg-slate-900 flex items-center justify-center shrink-0 text-slate-500 dark:text-slate-400 group-hover:bg-indigo-50 dark:group-hover:bg-indigo-900/20 group-hover:text-indigo-600 transition-colors",children:e.jsx(j,{className:"w-4.5 h-4.5"})}),e.jsx("span",{className:"font-normal text-[15px] text-slate-700 dark:text-slate-300 truncate",children:n})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx(ee,{mode:"wait",children:y?e.jsx(G.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},onClick:k,className:"p-1.5 text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-950/30 rounded-full transition-colors",title:"Delete habit",children:e.jsx(Ce,{className:"w-4.5 h-4.5"})},"delete"):e.jsxs(G.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"flex bg-slate-100 dark:bg-slate-900 p-1 rounded-full w-[120px] ring-1 ring-slate-200/50 dark:ring-slate-800",children:[e.jsx("button",{onClick:()=>b(!1),disabled:v,className:V("flex-1 px-3 py-1.5 text-[11px] font-bold rounded-full transition-all duration-200",f?"text-slate-400 dark:text-slate-500 hover:text-slate-600":"bg-emerald-500 text-white shadow-sm"),children:"NO"}),e.jsx("button",{onClick:()=>b(!0),disabled:v,className:V("flex-1 px-3 py-1.5 text-[11px] font-bold rounded-full transition-all duration-200",f?"bg-rose-500 text-white shadow-sm":"text-slate-400 dark:text-slate-500 hover:text-slate-600"),children:"YES"})]},"toggle")})})]})},ht=({id:i,icon:c,label:n,value:f,unit:b,onChange:k,onDelete:v,disabled:y,isEditing:j})=>{const C=oe(c),D=I=>b==="hrs"?I<=2?"text-emerald-500 dark:text-emerald-400":I<=4?"text-amber-500 dark:text-amber-400":"text-rose-500 dark:text-rose-400":"text-indigo-500 dark:text-indigo-400";return e.jsxs("div",{className:"flex items-center justify-between py-3.5 border-b border-slate-50 dark:border-slate-800/50 last:border-0 group",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1 mr-2",children:[e.jsx("div",{className:"w-9 h-9 rounded-xl bg-slate-50 dark:bg-slate-900 flex items-center justify-center shrink-0 text-slate-500 dark:text-slate-400 group-hover:bg-indigo-50 dark:group-hover:bg-indigo-900/20 group-hover:text-indigo-600 transition-colors",children:e.jsx(C,{className:"w-4.5 h-4.5"})}),e.jsxs("div",{className:"flex flex-col min-w-0",children:[e.jsx("span",{className:"font-normal text-[15px] text-slate-700 dark:text-slate-300 truncate",children:n}),e.jsx("span",{className:"text-[10px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider",children:b==="hrs"?"Hours":"Minutes"})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(ee,{mode:"wait",children:j?e.jsx(G.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},onClick:v,className:"p-1.5 text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-950/30 rounded-full transition-colors",title:"Delete habit",children:e.jsx(Ce,{className:"w-4.5 h-4.5"})},"delete"):e.jsxs(G.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"relative flex items-center gap-2",children:[e.jsx("input",{type:"number",min:"0",max:b==="hrs"?24:1440,step:b==="hrs"?.5:1,value:f||0,onChange:I=>k(parseFloat(I.target.value)||0),disabled:y,className:V("w-20 px-3 py-1.5 text-center font-bold text-sm bg-slate-50 dark:bg-slate-900 border border-slate-100 dark:border-slate-800 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none transition-all",D(f))}),e.jsx("span",{className:"text-[11px] font-bold text-slate-400 dark:text-slate-600 w-8",children:b==="hrs"?"hr":"min"})]},"input")})})]})},gt=({habits:i,onUpdateHabit:c,isLocked:n})=>{const{addHabit:f,deleteHabit:b}=he(),[k,v]=T.useState(!1),[y,j]=T.useState(!1),[C,D]=T.useState(null),I=(p,u,$,U)=>{f(p,u,$,U)};return e.jsxs("section",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 px-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[!n&&e.jsx(B,{onClick:()=>v(!k),scaleDown:.9,className:V("p-1 rounded-full transition-colors",k?"bg-indigo-600 text-white":"text-slate-400 hover:text-indigo-600"),title:k?"Finish Editing":"Manage Habits",children:k?e.jsx(xe,{className:"w-3.5 h-3.5"}):e.jsx(Ie,{className:"w-3.5 h-3.5"})}),e.jsx("h3",{className:"text-[11px] font-bold text-slate-400 uppercase tracking-[0.1em] dark:text-slate-500",children:"Daily Habits"})]}),!n&&e.jsx(B,{onClick:()=>{j(!0),v(!1)},scaleDown:.9,className:"p-1 text-slate-400 hover:text-indigo-600 transition-colors",title:"Add Habit",children:e.jsx(le,{className:"w-5 h-5"})})]}),e.jsx(et,{className:"border-none shadow-premium dark:bg-slate-950 overflow-visible",children:e.jsx(tt,{className:"p-4 sm:p-5",children:e.jsxs("div",{className:"space-y-1",children:[i.map(p=>p.type==="number"?e.jsx(ht,{id:p.id,icon:p.icon,label:p.label,value:p.value,unit:p.unit,onChange:u=>c(p.id,u),onDelete:()=>D(p.id),disabled:n,isEditing:k},p.id):e.jsx(xt,{id:p.id,icon:p.icon,label:p.label,value:p.value,onChange:u=>c(p.id,u),onDelete:()=>D(p.id),disabled:n,isEditing:k},p.id)),i.length===0&&e.jsxs("div",{className:"py-8 text-center bg-slate-50/50 dark:bg-slate-900/30 rounded-2xl border-2 border-dashed border-slate-100 dark:border-slate-800 flex flex-col items-center",children:[e.jsx("span",{className:"block text-slate-400 text-xs mb-2",children:"No habits tracked yet"}),e.jsx(B,{onClick:()=>{j(!0),v(!1)},scaleDown:.94,className:"text-indigo-500 font-semibold text-xs py-1 px-3 rounded hover:bg-indigo-50 dark:hover:bg-indigo-900/20",children:"+ Add New Habit"})]})]})})}),e.jsx(ut,{isOpen:y,onClose:()=>j(!1),onAdd:I}),e.jsx(Oe,{isOpen:!!C,onClose:()=>D(null),onConfirm:()=>{b(C),D(null)},title:"Delete Habit?",message:"Are you sure you want to delete this habit? It will be removed from your tracking options."})]})},pt={Pizza:it,Candy:nt,Salad:lt,CheckCircle:ne,Wallet:Se,Smartphone:rt,GlassWater:st,Activity:qe},ft=({isOpen:i,onClose:c,data:n,onConfirm:f})=>{ie(i);const{isPast:b}=Ee();if(!i)return null;const k=n.tasks.length,v=n.tasks.filter(u=>u.status==="checked").length,y=n.tasks.filter(u=>u.status==="missed").length,j=k>0?Math.round(v/k*100):0,{getDailySpend:C,getWeeklySavings:D}=Ye(),I=C(),p=D();return e.jsx(ee,{children:e.jsx("div",{className:"fixed inset-0 z-[60] flex items-end sm:items-center justify-center p-0 sm:p-4 bg-slate-900/20 backdrop-blur-sm",children:e.jsx(G.div,{initial:{y:"100%",opacity:0},animate:{y:0,opacity:1},exit:{y:"100%",opacity:0},transition:{duration:.15,ease:"easeOut"},className:"w-full sm:max-w-md bg-white/95 dark:bg-slate-950/95 backdrop-blur-3xl rounded-t-[2rem] sm:rounded-[2rem] shadow-2xl overflow-hidden ring-1 ring-black/5 dark:ring-white/10",children:e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex items-start justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-normal text-slate-900 dark:text-white tracking-tight",children:"Day Overview"}),e.jsx("p",{className:"text-[10px] font-medium text-slate-400 uppercase tracking-widest mt-1",children:"Daily Recap"})]}),e.jsx(B,{onClick:c,scaleDown:.9,className:"p-2 bg-slate-50 dark:bg-slate-900 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 rounded-full transition-all",children:e.jsx(re,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center mb-10",children:[e.jsxs("div",{className:"relative w-40 h-40 flex items-center justify-center",children:[e.jsxs("svg",{className:"absolute w-full h-full -rotate-90",children:[e.jsx("circle",{cx:"80",cy:"80",r:"72",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"text-slate-100 dark:text-slate-800"}),e.jsx(G.circle,{cx:"80",cy:"80",r:"72",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeDasharray:"452.39",initial:{strokeDashoffset:452.39},animate:{strokeDashoffset:452.39-452.39*j/100},transition:{duration:1.5,ease:"circOut"},className:"text-indigo-500",strokeLinecap:"round"})]}),e.jsx("div",{className:"text-center z-10",children:e.jsx("div",{className:"flex flex-col items-center",children:e.jsxs("span",{className:"text-6xl font-light text-slate-900 dark:text-white tracking-tight",children:[j,e.jsx("span",{className:"text-2xl font-light text-indigo-500 ml-0.5",children:"%"})]})})})]}),e.jsx("p",{className:"text-slate-400 dark:text-slate-500 text-[10px] font-medium mt-2 tracking-[0.2em] uppercase",children:"Completion Rate"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-8",children:[e.jsxs("div",{className:"bg-emerald-50/30 dark:bg-emerald-500/5 p-4 rounded-3xl flex flex-col items-center ring-1 ring-emerald-500/5 hover:bg-emerald-50/50 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 bg-white dark:bg-emerald-500/10 rounded-full flex items-center justify-center mb-2 shadow-sm ring-1 ring-emerald-500/10",children:e.jsx($e,{className:"w-4 h-4 text-emerald-500"})}),e.jsx("span",{className:"text-xl font-medium text-slate-900 dark:text-white",children:v}),e.jsx("span",{className:"text-[9px] font-medium text-emerald-600/60 dark:text-emerald-500/60 uppercase tracking-widest mt-1",children:"Completed"})]}),e.jsxs("div",{className:"bg-rose-50/30 dark:bg-rose-500/5 p-4 rounded-3xl flex flex-col items-center ring-1 ring-rose-500/5 hover:bg-rose-50/50 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 bg-white dark:bg-rose-500/10 rounded-full flex items-center justify-center mb-2 shadow-sm ring-1 ring-rose-500/10",children:e.jsx(Ze,{className:"w-4 h-4 text-rose-500"})}),e.jsx("span",{className:"text-xl font-medium text-slate-900 dark:text-white",children:y}),e.jsx("span",{className:"text-[9px] font-medium text-rose-600/60 dark:text-rose-500/60 uppercase tracking-widest mt-1",children:"Missed"})]})]}),e.jsxs("div",{className:"bg-slate-50/50 dark:bg-slate-900/30 rounded-3xl p-5 mb-8 flex justify-between items-center ring-1 ring-slate-200/40 dark:ring-slate-800/40",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-white dark:bg-slate-800 rounded-xl flex items-center justify-center shadow-sm ring-1 ring-slate-100 dark:ring-slate-700",children:e.jsx(Se,{className:"w-4 h-4 text-indigo-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[9px] font-medium text-slate-400 uppercase tracking-[0.1em] mb-0.5",children:"Today's Spend"}),e.jsxs("p",{className:"text-base font-medium text-slate-700 dark:text-slate-200",children:["â‚¹",I.toLocaleString()]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[9px] font-medium text-slate-400 uppercase tracking-[0.1em] mb-0.5",children:"Weekly Save"}),e.jsxs("p",{className:V("text-base font-medium",p>=0?"text-emerald-500":"text-rose-500"),children:[p>=0?"+":"","â‚¹",p.toLocaleString()]})]})]}),e.jsxs("div",{className:"mb-10",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-5 px-1",children:[e.jsx("div",{className:"h-px flex-1 bg-slate-100 dark:bg-slate-800/40"}),e.jsx("h4",{className:"text-[9px] font-medium text-slate-400 uppercase tracking-[0.2em] text-center",children:"Habit Breakdown"}),e.jsx("div",{className:"h-px flex-1 bg-slate-100 dark:bg-slate-800/40"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-y-4 gap-x-3",children:n?.habits?.map(u=>{const $=pt[u.icon]||ne,U=u.type==="toggle"?!u.value:u.value>0;let N=u.label;if(u.type==="toggle")N=u.value?u.label:`No ${u.label.replace("?","")}`;else{const Z=u.unit==="hrs"?"hr":"min";N=`${u.value}${Z} ${u.label}`}return e.jsxs("div",{className:"flex items-start gap-2.5",children:[e.jsx("div",{className:V("w-7 h-7 rounded-lg flex items-center justify-center shrink-0 transition-colors",U?"bg-emerald-500/5 text-emerald-500":"bg-rose-500/5 text-rose-500"),children:U?e.jsx(ne,{className:"w-3.5 h-3.5 stroke-[2]"}):e.jsx($,{className:"w-3.5 h-3.5 stroke-[2]"})}),e.jsx("div",{className:"flex flex-col min-w-0 pt-0.5",children:e.jsx("span",{className:V("text-xs font-normal leading-tight truncate",U?"text-slate-700 dark:text-slate-300":"text-slate-500 dark:text-slate-400"),children:N})})]},u.id)})})]}),!b&&e.jsx("div",{className:"space-y-4",children:e.jsxs(B,{onClick:f,scaleDown:.96,block:!0,className:"w-full py-4 text-base font-medium rounded-[20px] bg-indigo-600 hover:bg-indigo-700 text-white shadow-lg shadow-indigo-500/20 flex items-center justify-center gap-2 transition-all",children:[e.jsx(Te,{className:"w-4 h-4"}),"Lock & Save Day"]})})]})})})})},bt=({isOpen:i,onClose:c,tasks:n})=>{ie(i);const[f,b]=T.useState([]),{updateAllTasks:k}=he(),[v,y]=T.useState(!1),[j,C]=T.useState(""),[D,I]=T.useState(""),[p,u]=T.useState("EVE/NIGHT"),[$,U]=T.useState(null);T.useEffect(()=>{i&&(b([...n]),y(!1),C(""),I(""),u("EVE/NIGHT"))},[i,n]);const N=(g,O,F)=>{b(z=>z.map(o=>{if(o.id!==g)return o;const A={[O]:F};if(O==="name"){const L=se(F);A.icon=L.icon}return{...o,...A}}))},Z=g=>{b(O=>O.filter(F=>F.id!==g))},J=()=>{if(!j.trim())return;const g={id:`task_${Date.now()}`,name:j.trim(),time:D,category:p,icon:se(j.trim()).icon,status:"unchecked"};b(O=>{const F=[...O,g];return F.sort((z,o)=>{if(!z.time&&!o.time)return 0;if(!z.time)return 1;if(!o.time)return-1;const A=z.time.split(":").map(Number),L=o.time.split(":").map(Number);return A[0]*60+A[1]-(L[0]*60+L[1])}),F}),C(""),I(""),u("EVE/NIGHT"),y(!1)},K=()=>{let g=[...f];if(j.trim()){const F={id:`task_${Date.now()}_pending`,name:j.trim(),time:D,category:p,icon:se(j.trim()).icon,status:"unchecked"};g.push(F)}let O=g.filter(F=>F.name.trim()!=="");O.sort((F,z)=>{if(!F.time&&!z.time)return 0;if(!F.time)return 1;if(!z.time)return-1;const o=F.time.split(":").map(Number),A=z.time.split(":").map(Number);return o[0]*60+o[1]-(A[0]*60+A[1])}),k(O),c()};return i?e.jsxs(ee,{children:[e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 sm:p-6 bg-slate-100/20 backdrop-blur-sm",children:e.jsxs(G.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{duration:.15,ease:"easeOut"},className:"w-full max-w-lg bg-white dark:bg-slate-950 rounded-[2rem] shadow-2xl shadow-slate-200/50 dark:shadow-black/50 overflow-hidden flex flex-col max-h-[75vh] ring-1 ring-slate-100 dark:ring-slate-800",children:[e.jsxs("div",{className:"pt-5 pb-3 px-5 sm:px-6 bg-indigo-600 dark:bg-slate-900 shrink-0 z-10 flex items-center justify-between shadow-sm",children:[e.jsx("h3",{className:"text-lg font-normal text-white tracking-wide",children:"Edit Routine"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ae,{variant:"ghost",onClick:()=>{C(""),I(""),y(!0)},className:"p-1 text-indigo-100 hover:text-white rounded-full hover:bg-white/10",title:"Add Task",children:e.jsx(le,{className:"w-6 h-6 stroke-[1.5]"})}),e.jsx(ae,{variant:"exit",onClick:c,className:"p-1 -mr-1 text-indigo-100 hover:text-white rounded-full hover:bg-white/10 bg-transparent",children:e.jsx(re,{className:"w-6 h-6 stroke-[1.5]"})})]})]}),e.jsxs("div",{className:"overflow-y-auto px-5 sm:px-6 py-2 flex-1 min-h-0 bg-white dark:bg-slate-950 scrollbar-hide",children:[f.length===0&&!v?e.jsxs("div",{className:"py-20 flex flex-col items-center justify-center text-center opacity-40",children:[e.jsx("p",{className:"text-slate-900 font-normal text-lg",children:"No tasks yet"}),e.jsx("p",{className:"text-slate-500 text-sm mt-1 font-normal",children:"Add your first habit below"})]}):f.map(g=>e.jsxs(G.div,{layout:!0,initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"group flex items-center gap-3 py-2 border-b border-slate-100 dark:border-slate-800/50 last:border-0",children:[e.jsx("div",{className:"shrink-0 z-10 w-24",children:e.jsx("input",{type:"time",value:g.time||"",onChange:O=>N(g.id,"time",O.target.value),className:"w-full bg-slate-50 dark:bg-slate-900/50 text-[14px] font-medium text-slate-700 dark:text-slate-300 rounded-lg px-2 py-1.5 outline-none border border-slate-200 dark:border-slate-800 focus:border-indigo-500"})}),e.jsx("div",{className:"shrink-0 w-8 h-8 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center text-slate-500",children:(()=>{let O=oe(g.icon);return O?e.jsx(O,{className:"w-4 h-4"}):e.jsx(xe,{className:"w-4 h-4"})})()}),e.jsxs("div",{className:"flex-1 min-w-0 flex flex-col pt-1 gap-0.5",children:[e.jsx("input",{type:"text",value:g.name,onChange:O=>N(g.id,"name",O.target.value),placeholder:"Task Name",maxLength:50,className:"w-full bg-transparent border-none p-0 text-[16px] font-normal text-slate-900 dark:text-slate-50 placeholder:text-slate-300 focus:ring-0 focus:outline-none"}),e.jsxs("select",{value:g.category||"EVE/NIGHT",onChange:O=>N(g.id,"category",O.target.value),className:"bg-transparent text-[9px] font-bold uppercase tracking-wider text-slate-400 focus:outline-none p-0 w-max appearance-none cursor-pointer hover:text-indigo-500",style:{WebkitAppearance:"none",MozAppearance:"none"},children:[e.jsx("option",{value:"EARLY MORNING",children:"EARLY MORNING"}),e.jsx("option",{value:"BEFORE NOON",children:"BEFORE NOON"}),e.jsx("option",{value:"AFTER NOON",children:"AFTER NOON"}),e.jsx("option",{value:"EVE/NIGHT",children:"EVE/NIGHT"})]})]}),e.jsx(ae,{variant:"delete",onClick:()=>U(g.id),className:"shrink-0 p-1.5 text-slate-300 hover:text-red-500 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800","aria-label":"Delete"})]},g.id)),v&&e.jsxs(G.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex items-center gap-3 py-2 border-b border-indigo-100 dark:border-indigo-900/30 bg-indigo-50/50 dark:bg-indigo-900/10 -mx-4 px-4 rounded-xl my-1",children:[e.jsx("div",{className:"shrink-0 z-10 w-24",children:e.jsx("input",{type:"time",value:D||"",onChange:g=>I(g.target.value),className:"w-full bg-white dark:bg-slate-900 text-[14px] font-medium text-slate-700 dark:text-slate-300 rounded-lg px-2 py-1.5 outline-none border border-indigo-200 dark:border-indigo-800 focus:border-indigo-500 shadow-sm"})}),e.jsx("div",{className:"shrink-0 w-8 h-8 rounded-full bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center text-indigo-600",children:(()=>{let g=se(j).component;return g?e.jsx(g,{className:"w-4 h-4"}):e.jsx(xe,{className:"w-4 h-4"})})()}),e.jsxs("div",{className:"flex-1 min-w-0 flex flex-col pt-1 gap-0.5",children:[e.jsx("input",{autoFocus:!0,type:"text",value:j,onChange:g=>C(g.target.value),onKeyDown:g=>{g.key==="Enter"&&J(),g.key==="Escape"&&y(!1)},placeholder:"Type task name...",className:"w-full bg-transparent border-none p-0 text-[16px] font-normal text-slate-900 dark:text-white placeholder:text-slate-400 focus:ring-0 focus:outline-none"}),e.jsxs("select",{value:p,onChange:g=>u(g.target.value),className:"bg-transparent text-[9px] font-bold uppercase tracking-wider text-slate-400 focus:outline-none p-0 w-max appearance-none cursor-pointer hover:text-indigo-500",style:{WebkitAppearance:"none",MozAppearance:"none"},children:[e.jsx("option",{value:"EARLY MORNING",children:"EARLY MORNING"}),e.jsx("option",{value:"BEFORE NOON",children:"BEFORE NOON"}),e.jsx("option",{value:"AFTER NOON",children:"AFTER NOON"}),e.jsx("option",{value:"EVE/NIGHT",children:"EVE/NIGHT"})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ae,{variant:"ghost",onClick:()=>y(!1),className:"p-1 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 rounded-lg",children:e.jsx(re,{className:"w-5 h-5"})}),e.jsx(ae,{variant:"primary",onClick:J,disabled:!j.trim(),className:"p-1 bg-transparent text-indigo-600 hover:text-indigo-700 disabled:opacity-30 rounded-lg",children:e.jsx(le,{className:"w-6 h-6"})})]})]}),!v&&e.jsx("div",{className:"pt-2 pb-6",children:e.jsxs(B,{onClick:()=>{C(""),I(""),y(!0)},scaleDown:.96,block:!0,className:"flex items-center gap-2 text-slate-400 hover:text-indigo-600 transition-colors px-1 group w-max",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center group-hover:bg-indigo-100 dark:group-hover:bg-indigo-900/30 transition-colors",children:e.jsx(le,{className:"w-4 h-4"})}),e.jsx("span",{className:"text-sm font-normal",children:"Add task"})]})})]}),e.jsx("div",{className:"p-4 sm:p-6 bg-white dark:bg-slate-950 shrink-0 border-t border-slate-100 dark:border-slate-800",children:e.jsx(ge,{onClick:K,className:"w-full py-3.5 text-base font-semibold shadow-lg shadow-indigo-200/50 dark:shadow-indigo-900/50 bg-indigo-600 hover:bg-indigo-700 active:bg-indigo-800 text-white rounded-xl transition-all",children:"Save Routine"})})]})}),e.jsx(Oe,{isOpen:!!$,onClose:()=>U(null),onConfirm:()=>{Z($),U(null)},title:"Delete Routine Task?",message:"Are you sure you want to remove this task from your routine? This will affect future days."})]}):null};var pe={};(function i(c,n,f,b){var k=!!(c.Worker&&c.Blob&&c.Promise&&c.OffscreenCanvas&&c.OffscreenCanvasRenderingContext2D&&c.HTMLCanvasElement&&c.HTMLCanvasElement.prototype.transferControlToOffscreen&&c.URL&&c.URL.createObjectURL),v=typeof Path2D=="function"&&typeof DOMMatrix=="function",y=(function(){if(!c.OffscreenCanvas)return!1;try{var a=new OffscreenCanvas(1,1),t=a.getContext("2d");t.fillRect(0,0,1,1);var s=a.transferToImageBitmap();t.createPattern(s,"no-repeat")}catch{return!1}return!0})();function j(){}function C(a){var t=n.exports.Promise,s=t!==void 0?t:c.Promise;return typeof s=="function"?new s(a):(a(j,j),null)}var D=(function(a,t){return{transform:function(s){if(a)return s;if(t.has(s))return t.get(s);var l=new OffscreenCanvas(s.width,s.height),d=l.getContext("2d");return d.drawImage(s,0,0),t.set(s,l),l},clear:function(){t.clear()}}})(y,new Map),I=(function(){var a=Math.floor(16.666666666666668),t,s,l={},d=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(t=function(m){var x=Math.random();return l[x]=requestAnimationFrame(function r(h){d===h||d+a-1<h?(d=h,delete l[x],m()):l[x]=requestAnimationFrame(r)}),x},s=function(m){l[m]&&cancelAnimationFrame(l[m])}):(t=function(m){return setTimeout(m,a)},s=function(m){return clearTimeout(m)}),{frame:t,cancel:s}})(),p=(function(){var a,t,s={};function l(d){function m(x,r){d.postMessage({options:x||{},callback:r})}d.init=function(r){var h=r.transferControlToOffscreen();d.postMessage({canvas:h},[h])},d.fire=function(r,h,M){if(t)return m(r,null),t;var S=Math.random().toString(36).slice(2);return t=C(function(E){function R(P){P.data.callback===S&&(delete s[S],d.removeEventListener("message",R),t=null,D.clear(),M(),E())}d.addEventListener("message",R),m(r,S),s[S]=R.bind(null,{data:{callback:S}})}),t},d.reset=function(){d.postMessage({reset:!0});for(var r in s)s[r](),delete s[r]}}return function(){if(a)return a;if(!f&&k){var d=["var CONFETTI, SIZE = {}, module = {};","("+i.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{a=new Worker(URL.createObjectURL(new Blob([d])))}catch(m){return typeof console<"u"&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",m),null}l(a)}return a}})(),u={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function $(a,t){return t?t(a):a}function U(a){return a!=null}function N(a,t,s){return $(a&&U(a[t])?a[t]:u[t],s)}function Z(a){return a<0?0:Math.floor(a)}function J(a,t){return Math.floor(Math.random()*(t-a))+a}function K(a){return parseInt(a,16)}function g(a){return a.map(O)}function O(a){var t=String(a).replace(/[^0-9a-f]/gi,"");return t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),{r:K(t.substring(0,2)),g:K(t.substring(2,4)),b:K(t.substring(4,6))}}function F(a){var t=N(a,"origin",Object);return t.x=N(t,"x",Number),t.y=N(t,"y",Number),t}function z(a){a.width=document.documentElement.clientWidth,a.height=document.documentElement.clientHeight}function o(a){var t=a.getBoundingClientRect();a.width=t.width,a.height=t.height}function A(a){var t=document.createElement("canvas");return t.style.position="fixed",t.style.top="0px",t.style.left="0px",t.style.pointerEvents="none",t.style.zIndex=a,t}function L(a,t,s,l,d,m,x,r,h){a.save(),a.translate(t,s),a.rotate(m),a.scale(l,d),a.arc(0,0,1,x,r,h),a.restore()}function Q(a){var t=a.angle*(Math.PI/180),s=a.spread*(Math.PI/180);return{x:a.x,y:a.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:a.startVelocity*.5+Math.random()*a.startVelocity,angle2D:-t+(.5*s-Math.random()*s),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:a.color,shape:a.shape,tick:0,totalTicks:a.ticks,decay:a.decay,drift:a.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:a.gravity*3,ovalScalar:.6,scalar:a.scalar,flat:a.flat}}function de(a,t){t.x+=Math.cos(t.angle2D)*t.velocity+t.drift,t.y+=Math.sin(t.angle2D)*t.velocity+t.gravity,t.velocity*=t.decay,t.flat?(t.wobble=0,t.wobbleX=t.x+10*t.scalar,t.wobbleY=t.y+10*t.scalar,t.tiltSin=0,t.tiltCos=0,t.random=1):(t.wobble+=t.wobbleSpeed,t.wobbleX=t.x+10*t.scalar*Math.cos(t.wobble),t.wobbleY=t.y+10*t.scalar*Math.sin(t.wobble),t.tiltAngle+=.1,t.tiltSin=Math.sin(t.tiltAngle),t.tiltCos=Math.cos(t.tiltAngle),t.random=Math.random()+2);var s=t.tick++/t.totalTicks,l=t.x+t.random*t.tiltCos,d=t.y+t.random*t.tiltSin,m=t.wobbleX+t.random*t.tiltCos,x=t.wobbleY+t.random*t.tiltSin;if(a.fillStyle="rgba("+t.color.r+", "+t.color.g+", "+t.color.b+", "+(1-s)+")",a.beginPath(),v&&t.shape.type==="path"&&typeof t.shape.path=="string"&&Array.isArray(t.shape.matrix))a.fill(Re(t.shape.path,t.shape.matrix,t.x,t.y,Math.abs(m-l)*.1,Math.abs(x-d)*.1,Math.PI/10*t.wobble));else if(t.shape.type==="bitmap"){var r=Math.PI/10*t.wobble,h=Math.abs(m-l)*.1,M=Math.abs(x-d)*.1,S=t.shape.bitmap.width*t.scalar,E=t.shape.bitmap.height*t.scalar,R=new DOMMatrix([Math.cos(r)*h,Math.sin(r)*h,-Math.sin(r)*M,Math.cos(r)*M,t.x,t.y]);R.multiplySelf(new DOMMatrix(t.shape.matrix));var P=a.createPattern(D.transform(t.shape.bitmap),"no-repeat");P.setTransform(R),a.globalAlpha=1-s,a.fillStyle=P,a.fillRect(t.x-S/2,t.y-E/2,S,E),a.globalAlpha=1}else if(t.shape==="circle")a.ellipse?a.ellipse(t.x,t.y,Math.abs(m-l)*t.ovalScalar,Math.abs(x-d)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI):L(a,t.x,t.y,Math.abs(m-l)*t.ovalScalar,Math.abs(x-d)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI);else if(t.shape==="star")for(var w=Math.PI/2*3,H=4*t.scalar,W=8*t.scalar,_=t.x,q=t.y,X=5,Y=Math.PI/X;X--;)_=t.x+Math.cos(w)*W,q=t.y+Math.sin(w)*W,a.lineTo(_,q),w+=Y,_=t.x+Math.cos(w)*H,q=t.y+Math.sin(w)*H,a.lineTo(_,q),w+=Y;else a.moveTo(Math.floor(t.x),Math.floor(t.y)),a.lineTo(Math.floor(t.wobbleX),Math.floor(d)),a.lineTo(Math.floor(m),Math.floor(x)),a.lineTo(Math.floor(l),Math.floor(t.wobbleY));return a.closePath(),a.fill(),t.tick<t.totalTicks}function te(a,t,s,l,d){var m=t.slice(),x=a.getContext("2d"),r,h,M=C(function(S){function E(){r=h=null,x.clearRect(0,0,l.width,l.height),D.clear(),d(),S()}function R(){f&&!(l.width===b.width&&l.height===b.height)&&(l.width=a.width=b.width,l.height=a.height=b.height),!l.width&&!l.height&&(s(a),l.width=a.width,l.height=a.height),x.clearRect(0,0,l.width,l.height),m=m.filter(function(P){return de(x,P)}),m.length?r=I.frame(R):E()}r=I.frame(R),h=E});return{addFettis:function(S){return m=m.concat(S),M},canvas:a,promise:M,reset:function(){r&&I.cancel(r),h&&h()}}}function fe(a,t){var s=!a,l=!!N(t||{},"resize"),d=!1,m=N(t,"disableForReducedMotion",Boolean),x=k&&!!N(t||{},"useWorker"),r=x?p():null,h=s?z:o,M=a&&r?!!a.__confetti_initialized:!1,S=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,E;function R(w,H,W){for(var _=N(w,"particleCount",Z),q=N(w,"angle",Number),X=N(w,"spread",Number),Y=N(w,"startVelocity",Number),Fe=N(w,"decay",Number),Pe=N(w,"gravity",Number),Le=N(w,"drift",Number),ve=N(w,"colors",g),He=N(w,"ticks",Number),we=N(w,"shapes"),Be=N(w,"scalar"),Ge=!!N(w,"flat"),Ne=F(w),ke=_,me=[],ze=a.width*Ne.x,Ue=a.height*Ne.y;ke--;)me.push(Q({x:ze,y:Ue,angle:q,spread:X,startVelocity:Y,color:ve[ke%ve.length],shape:we[J(0,we.length)],ticks:He,decay:Fe,gravity:Pe,drift:Le,scalar:Be,flat:Ge}));return E?E.addFettis(me):(E=te(a,me,h,H,W),E.promise)}function P(w){var H=m||N(w,"disableForReducedMotion",Boolean),W=N(w,"zIndex",Number);if(H&&S)return C(function(Y){Y()});s&&E?a=E.canvas:s&&!a&&(a=A(W),document.body.appendChild(a)),l&&!M&&h(a);var _={width:a.width,height:a.height};r&&!M&&r.init(a),M=!0,r&&(a.__confetti_initialized=!0);function q(){if(r){var Y={getBoundingClientRect:function(){if(!s)return a.getBoundingClientRect()}};h(Y),r.postMessage({resize:{width:Y.width,height:Y.height}});return}_.width=_.height=null}function X(){E=null,l&&(d=!1,c.removeEventListener("resize",q)),s&&a&&(document.body.contains(a)&&document.body.removeChild(a),a=null,M=!1)}return l&&!d&&(d=!0,c.addEventListener("resize",q,!1)),r?r.fire(w,_,X):R(w,_,X)}return P.reset=function(){r&&r.reset(),E&&E.reset()},P}var ce;function be(){return ce||(ce=fe(null,{useWorker:!0,resize:!0})),ce}function Re(a,t,s,l,d,m,x){var r=new Path2D(a),h=new Path2D;h.addPath(r,new DOMMatrix(t));var M=new Path2D;return M.addPath(h,new DOMMatrix([Math.cos(x)*d,Math.sin(x)*d,-Math.sin(x)*m,Math.cos(x)*m,s,l])),M}function Ae(a){if(!v)throw new Error("path confetti are not supported in this browser");var t,s;typeof a=="string"?t=a:(t=a.path,s=a.matrix);var l=new Path2D(t),d=document.createElement("canvas"),m=d.getContext("2d");if(!s){for(var x=1e3,r=x,h=x,M=0,S=0,E,R,P=0;P<x;P+=2)for(var w=0;w<x;w+=2)m.isPointInPath(l,P,w,"nonzero")&&(r=Math.min(r,P),h=Math.min(h,w),M=Math.max(M,P),S=Math.max(S,w));E=M-r,R=S-h;var H=10,W=Math.min(H/E,H/R);s=[W,0,0,W,-Math.round(E/2+r)*W,-Math.round(R/2+h)*W]}return{type:"path",path:t,matrix:s}}function De(a){var t,s=1,l="#000000",d='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof a=="string"?t=a:(t=a.text,s="scalar"in a?a.scalar:s,d="fontFamily"in a?a.fontFamily:d,l="color"in a?a.color:l);var m=10*s,x=""+m+"px "+d,r=new OffscreenCanvas(m,m),h=r.getContext("2d");h.font=x;var M=h.measureText(t),S=Math.ceil(M.actualBoundingBoxRight+M.actualBoundingBoxLeft),E=Math.ceil(M.actualBoundingBoxAscent+M.actualBoundingBoxDescent),R=2,P=M.actualBoundingBoxLeft+R,w=M.actualBoundingBoxAscent+R;S+=R+R,E+=R+R,r=new OffscreenCanvas(S,E),h=r.getContext("2d"),h.font=x,h.fillStyle=l,h.fillText(t,P,w);var H=1/s;return{type:"bitmap",bitmap:r.transferToImageBitmap(),matrix:[H,0,0,H,-S*H/2,-E*H/2]}}n.exports=function(){return be().apply(this,arguments)},n.exports.reset=function(){be().reset()},n.exports.create=fe,n.exports.shapeFromPath=Ae,n.exports.shapeFromText=De})((function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}})(),pe,!1);const vt=pe.exports;pe.exports.create;const ue={"EARLY MORNING":["Love your bed too much?","Sun's up, you should be too.","Snooze button is for losers.","Morning glory? More like morning sad story.","The early bird gets the worm. You get nothing."],"BEFORE NOON":["Lunch isn't earned yet.","Productivity peak? I think not.","Already slacking? It's not even 12.","Your coffee needs to be stronger.","Is this your 'focus' time?"],"AFTER NOON":["Post-lunch coma hit hard?","Afternoon slump or just lazy?","Day's wasting away...","Sun's going down, and so is your discipline.","Siesta time is over."],NIGHT:["Too tired or just quitting?","Ending the day on a low note?","Sleep is sweet, but success is sweeter.","Don't let the day win.","Night owl? More like night fail."],DEFAULT:["Giving up already? My grandma moves faster.","Oh, skipping tasks? Is that your strategy for success?","Weakness disgusts me. Try again.","I thought you said you wanted to change?","Pathetic. Just click it done next time.","Do you need a participation trophy for skipping?","Your future self is disappointed in you.","Discipline is hard, isn't it? clearly too hard for you."]},wt=({isOpen:i,onClose:c,type:n="success",category:f})=>{ie(i),T.useEffect(()=>{i&&n==="success"&&vt({particleCount:100,spread:70,origin:{y:.6}})},[i,n]);const k=n==="troll"?(()=>{if(!f)return ue.DEFAULT[0];const v=ue[f]||ue.DEFAULT;return v[Math.floor(Math.random()*v.length)]})():null;return e.jsx(ee,{children:i&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm",children:e.jsxs(G.div,{initial:{scale:.5,opacity:0,rotate:n==="troll"?-5:0},animate:{scale:1,opacity:1,rotate:0},exit:{scale:.8,opacity:0},className:"w-full max-w-sm bg-white rounded-3xl shadow-2xl overflow-hidden relative",children:[e.jsxs("div",{className:`h-40 flex items-center justify-center relative overflow-hidden ${n==="success"?"bg-gradient-to-br from-indigo-500 to-purple-600":"bg-gradient-to-br from-purple-500 to-pink-600"}`,children:[e.jsxs("div",{className:"absolute inset-0 opacity-20",children:[e.jsx(Me,{className:"absolute top-4 left-4 w-8 h-8 text-white rotate-12"}),e.jsx(Me,{className:"absolute bottom-4 right-10 w-6 h-6 text-white -rotate-12"}),e.jsx(ot,{className:"absolute top-10 right-6 w-10 h-10 text-white"})]}),e.jsx(G.div,{className:"relative z-10",initial:n==="troll"?{y:10}:{scale:.8},animate:n==="troll"?{y:0}:{scale:1},children:n==="success"?e.jsx("div",{className:"bg-white/20 p-4 rounded-full backdrop-blur-md shadow-inner",children:e.jsx(dt,{className:"w-16 h-16 text-white"})}):e.jsx("div",{className:"bg-white/10 p-2 rounded-2xl backdrop-blur-sm transform rotate-3",children:e.jsx("img",{src:"/funny_troll_cat.png",alt:"Judging Cat",className:"w-24 h-24 object-contain drop-shadow-md transform -rotate-6",onError:v=>{v.target.onerror=null,v.target.style.display="none",v.target.parentNode.innerHTML='<span style="font-size:3rem">ðŸ˜¿</span>'}})})}),e.jsx("button",{onClick:c,className:"absolute top-3 right-3 p-1 hover:bg-white/20 rounded-full text-white/80 transition-colors",children:e.jsx(re,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("h2",{className:`text-2xl font-black mb-2 uppercase tracking-wide ${n==="success"?"text-slate-900":"text-purple-600"}`,children:n==="success"?"Great Job!":"UH OH..."}),n==="success"?e.jsxs("p",{className:"text-slate-600 mb-6 leading-relaxed",children:["You've completed all tasks in ",e.jsx("span",{className:"font-bold text-indigo-600",children:f}),". Keep up the momentum!"]}):e.jsxs("div",{className:"mb-6",children:[e.jsxs("p",{className:"text-lg font-bold text-slate-800 mb-2 leading-tight",children:['"',k,'"']}),e.jsxs("p",{className:"text-xs text-purple-400 uppercase tracking-widest font-semibold mt-3",children:["Failed at ",f]})]}),e.jsx(ge,{onClick:c,className:`w-full justify-center text-lg h-12 shadow-lg ${n==="success"?"bg-indigo-600 hover:bg-indigo-700 shadow-indigo-200":"bg-purple-600 hover:bg-purple-700 shadow-purple-200"}`,children:n==="success"?"Keep Going":"I'll Do Better"})]})]})})})},Nt=T.lazy(()=>Qe(()=>import("./UnlockDayModal-BafgARCS.js"),__vite__mapDeps([0,1,2,3,4]))),$t=()=>{const{dailyData:i,updateTaskStatus:c,updateHabit:n,updateAllTasks:f,isLocked:b,submitDay:k,unlockDay:v}=he(),{isPast:y}=Ee();Je();const[j,C]=T.useState(!1),[D,I]=T.useState(!1),[p,u]=T.useState(!1),[$,U]=T.useState({"EARLY MORNING":!0,"BEFORE NOON":!0,"AFTER NOON":!0,"EVE/NIGHT":!0}),[N,Z]=T.useState({isOpen:!1,type:"success",category:""}),[J,K]=T.useState(!0);if(!i||!i.tasks)return e.jsx(ye,{header:e.jsxs("div",{className:"w-full flex items-center justify-between",children:[e.jsx("div",{className:"h-8 w-32 bg-slate-100 dark:bg-slate-800 rounded-lg animate-pulse"}),e.jsx("div",{className:"h-8 w-20 bg-slate-100 dark:bg-slate-800 rounded-lg animate-pulse"})]}),children:e.jsx("div",{className:"flex items-center justify-center min-h-[40vh]",children:e.jsx(Ke,{className:"w-8 h-8 animate-spin text-slate-300 dark:text-slate-700"})})});const g={"EARLY MORNING":i.tasks.filter(o=>o.category==="EARLY MORNING"),"BEFORE NOON":i.tasks.filter(o=>o.category==="BEFORE NOON"),"AFTER NOON":i.tasks.filter(o=>o.category==="AFTER NOON"),"EVE/NIGHT":i.tasks.filter(o=>o.category==="EVE/NIGHT"||o.category==="NIGHT")},O=T.useRef({});T.useEffect(()=>{if(!i?.tasks||y)return;const o={};if(Object.entries(g).forEach(([A,L])=>{if(L.length===0){o[A]="empty";return}const Q=L.every(te=>te.status==="checked"),de=L.every(te=>te.status==="checked"||te.status==="missed");Q?o[A]="success":de?o[A]="failed":o[A]="incomplete"}),J){O.current=o,K(!1);return}Object.entries(o).forEach(([A,L])=>{const Q=O.current[A]||"incomplete";L!==Q&&(Q==="incomplete"&&L==="success"?Z({isOpen:!0,type:"success",category:A}):Q==="incomplete"&&L==="failed"&&Z({isOpen:!0,type:"troll",category:A}))}),O.current=o},[i.tasks,y,J]);const F=async o=>{await k(o),C(!1)},z=o=>{v(o),u(!1)};return e.jsx(ye,{header:e.jsx(ct,{className:"w-full",overviewText:`${i.tasks.filter(o=>o.status==="checked").length}/${i.tasks.length}`,onEditClick:()=>I(!0),isLocked:b}),renderFloating:e.jsxs(e.Fragment,{children:[e.jsx(ft,{isOpen:j,onClose:()=>C(!1),data:i,onConfirm:F}),e.jsx(bt,{isOpen:D,onClose:()=>I(!1),tasks:i.tasks}),e.jsx(wt,{isOpen:N.isOpen,onClose:()=>Z(o=>({...o,isOpen:!1})),type:N.type,category:N.category}),e.jsx(T.Suspense,{fallback:null,children:e.jsx(Nt,{isOpen:p,onClose:()=>u(!1),onConfirm:z})})]}),children:e.jsxs("div",{className:"space-y-6 pt-4",children:[Object.entries(g).map(([o,A])=>e.jsx(mt,{title:o,tasks:A,onUpdateStatus:c,isLocked:b},o)),e.jsx(gt,{habits:i.habits,onUpdateHabit:n,isLocked:b}),y?e.jsxs(B,{scaleDown:.96,block:!0,className:"w-full py-3.5 text-sm font-semibold rounded-[20px] bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-800 text-slate-600 dark:text-slate-400 shadow-sm flex items-center justify-center gap-2",onClick:()=>C(!0),children:[e.jsx(je,{className:"w-4 h-4 stroke-[1.5]"}),"Day Summary"]}):b?e.jsxs("div",{className:"text-center p-6 bg-slate-100 rounded-2xl dark:bg-slate-900 border border-slate-200 dark:border-slate-800",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2 mb-4",children:[e.jsx("div",{className:"bg-slate-200 p-4 rounded-full dark:bg-slate-800",children:e.jsx(Te,{className:"w-8 h-8 text-slate-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-slate-800 dark:text-slate-200",children:"Day Locked"}),e.jsx("p",{className:"text-sm text-slate-500 font-normal",children:"This day is completed and read-only."})]})]}),i.locked&&e.jsxs(ge,{variant:"outline",onClick:()=>u(!0),className:"w-full sm:w-auto",children:[e.jsx(Ie,{className:"w-4 h-4 mr-2"}),"Edit Day"]})]}):e.jsxs(B,{scaleDown:.96,block:!0,className:"w-full py-3.5 text-sm font-semibold rounded-[20px] bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 text-slate-700 dark:text-slate-200 shadow-sm ring-1 ring-slate-900/5 flex items-center justify-center gap-2",onClick:()=>C(!0),children:[e.jsx(je,{className:"w-4 h-4 stroke-[1.5]"}),"Today's Overview"]})]})})};export{$t as default};
