import{z as S,v as w,o as C,f as E,r as L,j as t,V as k,a3 as v,a4 as l,a5 as a,W as y,am as F}from"./index-DgPxFht0.js";import{F as D}from"./FinanceBottomNav-BKflvOf6.js";import{W as N}from"./wallet-BOyL5lfP.js";import{C as O}from"./credit-card-N7L52TBT.js";import{D as R}from"./download-By7Frkgg.js";import"./book-open-C1SyAtjd.js";import"./ellipsis-DrznyRGW.js";const M=()=>{const n=S(),{t:U}=w(),{accounts:o,transactions:u,categories:d,subscriptions:p,debtParties:m,debtTransactions:x}=C(),{user:f}=E(),[g,r]=L.useState(!1),j=(o||[]).filter(e=>!e.isArchived),b=async()=>{r(!0);try{const e={exportDate:new Date().toISOString(),user:f?.displayName||"User",transactions:(u||[]).filter(s=>!s.isDeleted),categories:d,accounts:o,subscriptions:p,debtParties:(m||[]).filter(s=>!s.is_deleted),debtTransactions:(x||[]).filter(s=>!s.is_deleted)},h=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),c=URL.createObjectURL(h),i=document.createElement("a");i.href=c,i.download=`Awake_Finance_Export_${new Date().toISOString().slice(0,10)}.json`,i.click(),URL.revokeObjectURL(c)}catch(e){console.error(e)}finally{r(!1)}};return t.jsx(k,{bottomNav:t.jsx(D,{}),title:"Finance More",showBack:!0,children:t.jsxs(v,{children:[t.jsxs(l,{title:"Tools",children:[t.jsx(a,{icon:N,title:"Wallets",subtitle:`${j.length} active accounts`,onClick:()=>n("/finance/wallets")}),t.jsx(a,{icon:O,title:"EMI's",subtitle:"Loan & repayment tracker",onClick:()=>n("/finance/emi"),isLast:!0})]}),t.jsxs(l,{title:"Preferences",children:[t.jsx(a,{icon:R,title:"Export Finance Data",subtitle:"Download as JSON",onClick:b,rightElement:g?t.jsx(y,{className:"w-5 h-5 text-indigo-500 animate-spin"}):null}),t.jsx(a,{icon:F,title:"Finance Settings",subtitle:"Calculation & display preferences",onClick:()=>n("/finance/settings"),isLast:!0})]})]})})};export{M as default};
