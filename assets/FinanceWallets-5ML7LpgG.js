import{z as W,o as O,r as a,j as e,V as $,E as S,U as n}from"./index-DgPxFht0.js";import{F as R}from"./FinanceBottomNav-BKflvOf6.js";import{I as U}from"./ItemMenu-CxMDzUDN.js";import{D as z}from"./DeleteConfirmationModal-CadwlCts.js";import{u as V,S as q}from"./useSelection-BZNpjxPS.js";import{W as G}from"./wallet-BOyL5lfP.js";import{A as g}from"./archive-Cfm9_hKe.js";import{P as H}from"./plus-BoOHfWjy.js";import"./book-open-C1SyAtjd.js";import"./ellipsis-DrznyRGW.js";import"./eye-C2e92q6p.js";import"./pen-D-4zrPxo.js";import"./triangle-alert-BosfxxC0.js";import"./square-check-big-CjtHy18m.js";import"./square-CRS1Gj_0.js";const oe=()=>{const s=W(),{accounts:i,addAccount:C,deleteAccount:D,toggleArchiveAccount:h,getAccountBalance:b}=O(),[F,r]=a.useState(!1),[o,p]=a.useState(""),[f,v]=a.useState(""),[d,c]=a.useState(null),x=a.useRef(null),{isSelectionMode:l,selectedIds:j,toggleSelection:M,enterSelectionMode:B,exitSelectionMode:N,toggleSelectAll:E,count:I,isAllSelected:T}=V(),m=i.filter(t=>!t.isArchived),w=i.filter(t=>t.isArchived),L=async()=>{o.trim()&&(await C({name:o.trim(),openingBalance:Number(f)||0}),p(""),v(""),r(!1))},P=async()=>{d&&(await D(d),c(null))},k=t=>{l||(x.current=setTimeout(()=>{navigator.vibrate&&navigator.vibrate(50),B(t)},500))},u=()=>{x.current&&clearTimeout(x.current)};return e.jsx($,{bottomNav:e.jsx(R,{}),header:e.jsxs("div",{className:"contents",children:[e.jsx(q,{count:I,isAllSelected:T,onCancel:N,onSelectAll:()=>E(i.map(t=>t.id)),actions:[{label:"Archive",icon:e.jsx(g,{className:"w-5 h-5"}),onClick:()=>{j.forEach(t=>h(t)),N()}}]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(n,{variant:"back",onClick:()=>s(-1),className:"p-2 bg-transparent hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full text-slate-900 dark:text-white -ml-1"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-slate-900 dark:text-white tracking-tight",children:"Wallets"}),e.jsxs("p",{className:"text-[11px] text-slate-400 font-medium",children:[m.length," active account",m.length!==1?"s":""]})]})]}),e.jsx(n,{variant:"primary",onClick:()=>r(!0),label:"Add",iconOnly:!1,className:"px-4 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm",children:e.jsx(H,{className:"w-4 h-4 mr-1.5"})})]})]}),renderFloating:e.jsx(z,{isOpen:!!d,onClose:()=>c(null),onConfirm:P,isFinancial:!0,title:"Delete Wallet?",message:"Are you sure you want to delete this wallet? All associated transactions will be permanently removed. This action cannot be undone."}),children:e.jsxs("div",{className:"space-y-4",children:[m.map(t=>{const A=b?b(t.id):t.balance,y=j.includes(t.id);return e.jsx("div",{className:"relative group",children:e.jsxs("button",{onClick:()=>l?M(t.id):s(`/finance/account/${t.id}`),onMouseDown:()=>k(t.id),onMouseUp:u,onMouseLeave:u,onTouchStart:()=>k(t.id),onTouchEnd:u,className:S("w-full bg-white dark:bg-slate-900 rounded-2xl border p-5 flex items-center justify-between transition-all",y?"border-indigo-500 ring-2 ring-indigo-500/20 dark:ring-indigo-500/40":"border-slate-100 dark:border-slate-800",l&&"active:scale-[0.98]"),children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:S("w-12 h-12 rounded-2xl flex items-center justify-center transition-colors",y?"bg-indigo-600 text-white":"bg-indigo-50 dark:bg-indigo-500/10 text-indigo-500"),children:e.jsx(G,{className:"w-6 h-6"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-bold text-slate-900 dark:text-white text-[15px]",children:t.name}),e.jsx("p",{className:"text-[11px] text-slate-400 font-medium mt-0.5",children:"Active • Tap to view"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("p",{className:`text-lg font-black ${(A||0)>=0?"text-emerald-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"}`,children:["₹",(A||0).toLocaleString()]}),!l&&e.jsx(U,{onEdit:()=>s(`/finance/account/${t.id}?edit=true`),onDelete:()=>c(t.id),extraActions:[{label:"Archive",icon:g,onClick:()=>h(t.id)}]})]})]})},t.id)}),w.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 ml-1 mt-6",children:"Archived"}),w.map(t=>e.jsxs("button",{onClick:()=>s(`/finance/account/${t.id}`),className:"w-full bg-white/60 dark:bg-slate-900/60 rounded-2xl border border-slate-100 dark:border-slate-800 p-5 flex items-center justify-between opacity-60",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-slate-100 dark:bg-slate-800 rounded-2xl flex items-center justify-center",children:e.jsx(g,{className:"w-5 h-5 text-slate-400"})}),e.jsx("p",{className:"font-bold text-slate-500 text-[15px]",children:t.name})]}),e.jsxs("p",{className:"text-slate-400 font-bold",children:["₹",(t.balance||0).toLocaleString()]})]},t.id))]}),F&&e.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl border border-indigo-200 dark:border-indigo-500/30 p-5 space-y-3",children:[e.jsx("input",{value:o,onChange:t=>p(t.target.value),placeholder:"Account name",autoFocus:!0,className:"w-full bg-slate-50 dark:bg-slate-800 rounded-xl p-3 text-slate-900 dark:text-white font-bold outline-none border border-slate-200 dark:border-slate-700 focus:border-indigo-400"}),e.jsx("input",{type:"number",value:f,onChange:t=>v(t.target.value),placeholder:"Opening balance (₹)",className:"w-full bg-slate-50 dark:bg-slate-800 rounded-xl p-3 text-slate-900 dark:text-white font-bold outline-none border border-slate-200 dark:border-slate-700 focus:border-indigo-400"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{variant:"back",label:"Cancel",onClick:()=>r(!1),className:"flex-1 py-3 text-slate-400 font-bold rounded-xl"}),e.jsx(n,{variant:"primary",label:"Save",onClick:L,className:"flex-1 py-3 bg-indigo-600 text-white font-bold rounded-xl"})]})]})]})})};export{oe as default};
