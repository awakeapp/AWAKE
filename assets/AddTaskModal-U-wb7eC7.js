import{l as W,r as a,aj as p,j as e,A,m as C,P as u,X as E,J as H,$ as z,Z as F}from"./index-9msspAXs.js";import{C as D}from"./chevron-down-TRwM3OYb.js";const R=({isOpen:r,onClose:n,onAdd:M,initialDate:o})=>{W(r);const[i,m]=a.useState(""),[d,h]=a.useState(""),[g,b]=a.useState("Work"),[f,v]=a.useState("Medium"),[k,w]=a.useState("09:00"),[s,c]=a.useState(o),[j,y]=a.useState(!1);a.useEffect(()=>{r&&(m(""),h(""),b("Work"),v("Medium"),w("09:00"),c(o||p(new Date,"yyyy-MM-dd")))},[r,o]);const[l,N]=a.useState(!1),S=(t=>t.trim()?t.trim().split(/\s+/).length:0)(d),P=t=>{const x=t.target.value;h(x)},T=async t=>{if(t.preventDefault(),!(!i.trim()||l)){if(S>20){alert("Description must be 20 words or less.");return}N(!0);try{await M(i,{description:d,category:g,priority:f,time:k,date:s})}catch(x){console.error("Error in modal submission:",x)}finally{N(!1)}}};return e.jsx(A,{children:r&&e.jsxs(e.Fragment,{children:[e.jsx(C.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:n,className:"fixed inset-0 bg-black/40 dark:bg-black/60 z-[60]"}),e.jsx(C.div,{initial:{opacity:0,scale:.98,y:15},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.98,y:10},transition:{duration:.2,ease:"easeOut"},className:"fixed inset-0 z-[70] flex items-center justify-center p-4 sm:p-6 pointer-events-none",children:e.jsxs("div",{className:"bg-white dark:bg-[#111827] w-full max-w-sm rounded-[24px] pointer-events-auto flex flex-col shadow-2xl relative overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-slate-100 dark:border-white/[0.06]",children:[e.jsx("h2",{className:"text-[17px] font-semibold text-slate-900 dark:text-white tracking-tight",children:"New Task"}),e.jsx(u,{onClick:n,scaleDown:.9,className:"p-1.5 -mr-1.5 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 rounded-full transition-colors ",children:e.jsx(E,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"overflow-y-auto max-h-[75vh]",children:e.jsxs("form",{id:"addTaskForm",onSubmit:T,className:"p-5 flex flex-col gap-5",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("div",{children:e.jsx("input",{autoFocus:!0,type:"text",placeholder:"Task name",value:i,onChange:t=>m(t.target.value),className:"w-full text-[16px] bg-slate-50 dark:bg-white/[0.04] border border-transparent dark:border-white/[0.04] rounded-[14px] px-4 py-3.5 focus:ring-2 focus:ring-indigo-500/30 dark:focus:ring-indigo-500/40 text-slate-900 dark:text-white placeholder-slate-400 dark:placeholder-slate-500 font-medium transition-all"})}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{placeholder:"Description (optional)",value:d,onChange:P,rows:"2",className:"w-full text-[14px] bg-slate-50 dark:bg-white/[0.04] border border-transparent dark:border-white/[0.04] rounded-[14px] px-4 py-3 pb-8 focus:ring-2 focus:ring-indigo-500/30 dark:focus:ring-indigo-500/40 text-slate-700 dark:text-slate-300 placeholder-slate-400 dark:placeholder-slate-500 transition-all resize-none"}),e.jsxs("div",{className:"absolute bottom-2.5 right-3.5 text-[11px] font-medium text-slate-400 dark:text-slate-500 pointer-events-none",children:[S,"/20"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:g,onChange:t=>b(t.target.value),className:"w-full appearance-none bg-slate-50 dark:bg-white/[0.04] border border-transparent dark:border-white/[0.04] rounded-[12px] px-3.5 py-3 text-[14px] font-medium text-slate-800 dark:text-slate-200 focus:ring-2 focus:ring-indigo-500/30 transition-all",children:[e.jsx("option",{value:"Work",children:"Work"}),e.jsx("option",{value:"Health",children:"Health"}),e.jsx("option",{value:"Personal",children:"Personal"}),e.jsx("option",{value:"Spiritual",children:"Spiritual"})]}),e.jsx(D,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:f,onChange:t=>v(t.target.value),className:"w-full appearance-none bg-slate-50 dark:bg-white/[0.04] border border-transparent dark:border-white/[0.04] rounded-[12px] px-3.5 py-3 text-[14px] font-medium text-slate-800 dark:text-slate-200 focus:ring-2 focus:ring-indigo-500/30 transition-all",children:[e.jsx("option",{value:"Low",children:"Low"}),e.jsx("option",{value:"Medium",children:"Medium"}),e.jsx("option",{value:"High",children:"High"})]}),e.jsx(D,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"relative flex items-center bg-slate-50 dark:bg-white/[0.04] border border-transparent dark:border-white/[0.04] rounded-[12px] overflow-hidden focus-within:ring-2 focus-within:ring-indigo-500/30 transition-all",children:[e.jsx("div",{className:"pl-3.5 pr-2 py-3 flex items-center justify-center pointer-events-none",children:e.jsx(H,{className:"w-4 h-4 text-slate-400 dark:text-slate-500"})}),e.jsx("input",{type:"time",value:k,onChange:t=>w(t.target.value),className:"w-full bg-transparent border-none p-0 py-3 pr-3 text-[14px] font-medium text-slate-800 dark:text-slate-200 focus:ring-0"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{type:"button",onClick:()=>y(!j),className:"w-full h-full flex items-center bg-slate-50 dark:bg-white/[0.04] border border-transparent dark:border-white/[0.04] rounded-[12px] px-3.5 py-3 focus:ring-2 focus:ring-indigo-500/30 transition-all text-left",children:[e.jsx(z,{className:"w-4 h-4 text-slate-400 dark:text-slate-500 flex-shrink-0 mr-2"}),e.jsx("span",{className:"text-[14px] font-medium text-slate-800 dark:text-slate-200 truncate",children:s?p(new Date(s),"MMM do"):"Today"})]}),e.jsx(F,{isOpen:j,initialDate:s?new Date(s):new Date,onSelect:t=>{c(t?p(t,"yyyy-MM-dd"):null)},minDate:new Date,onClose:()=>y(!1)})]})]}),e.jsxs("div",{className:"pt-2 mt-1 flex items-center justify-end gap-2",children:[e.jsx(u,{type:"button",onClick:n,disabled:l,scaleDown:.96,className:"px-4 py-2.5 rounded-[12px] text-[15px] font-medium text-slate-500 hover:bg-slate-100 dark:hover:bg-white/[0.06] transition-colors disabled:opacity-50",children:"Cancel"}),e.jsx(u,{type:"submit",disabled:!i.trim()||l,scaleDown:.96,className:"px-6 py-2.5 rounded-[12px] text-[15px] font-semibold text-white bg-indigo-600 dark:bg-indigo-500 hover:bg-indigo-700 dark:hover:bg-indigo-600 disabled:opacity-50 disabled:bg-slate-200 dark:disabled:bg-slate-800 dark:disabled:text-slate-500 transition-colors flex items-center",children:l?"Saving...":"Save"})]})]})})]})})]})})};export{R as A};
