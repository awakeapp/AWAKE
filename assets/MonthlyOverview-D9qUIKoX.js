import{z as E,o as I,r as h,j as e,V as L,U as N,aj as D,av as C,aw as z,aH as B,az as O}from"./index-9msspAXs.js";import{L as U}from"./lucide-react-DcwRLu5a.js";import{A}from"./award-BlapaDF1.js";import{s as v}from"./subMonths-1p3dUHNQ.js";import"./archive-DkholNfQ.js";import"./send-CoIWtUcL.js";import"./arrow-right-left-BZqzp5zj.js";import"./sliders-horizontal-CJ8h67CS.js";import"./waves-DckeWPKZ.js";import"./wrench-Cb94Jej8.js";import"./bell-Dygtp_OY.js";import"./bike-Dlxb_FhM.js";import"./book-open-CJ6BBX_i.js";import"./shopping-bag-CfRJAWU5.js";import"./shield-HLcdxMSU.js";import"./salad-CkDdq_AP.js";import"./chart-column-B0mH7TuE.js";import"./chevron-down-TRwM3OYb.js";import"./droplets-DFO5GKWj.js";import"./circle-check-big-LAuxg_Ck.js";import"./circle-question-mark-DV2LfSbz.js";import"./circle-x-yBSa2Ww0.js";import"./minus-PclDH3AR.js";import"./navigation-DwdKz1qA.js";import"./credit-card-iuEUgePA.js";import"./handshake-C4G9Q7ql.js";import"./download-DCwt85j4.js";import"./eye-BqTX6Mm8.js";import"./ellipsis-CVoln8BK.js";import"./file-text-D1hEm-Wh.js";import"./flame-DbTI9LYX.js";import"./fuel-CJFsjG9T.js";import"./globe-D78FqA_e.js";import"./hash-6M2IVL1J.js";import"./log-out-CPWz0abV.js";import"./lock-open-BXtPEHre.js";import"./mail-DbGZhtgd.js";import"./monitor-8f8kIlma.js";import"./play-C30RTz1Z.js";import"./pen-DY3Fb26x.js";import"./user-Cidhjdlr.js";import"./plus-CMsmunyR.js";import"./trophy-xBHI5HxL.js";import"./wifi-off-CuncZRhC.js";import"./rotate-ccw-uF93MR3R.js";import"./save-Dy9vvheN.js";import"./search-BDGJpxHy.js";import"./settings-2-BceFCv8d.js";import"./shield-alert-DOWk1i5L.js";import"./smartphone-D81Slruk.js";import"./square-check-big-dwW8C68g.js";import"./square-lZ11Ib2v.js";import"./star-Bem72FV2.js";import"./sun-BQlunvnj.js";import"./target-BIkWigeX.js";import"./toggle-left-UXIPCGM9.js";import"./toggle-right-Bb3Hqrl1.js";import"./trending-down-CdZPREFM.js";import"./trending-up-kT6XmkFT.js";import"./triangle-alert-2A0dCFLU.js";import"./upload-BCdVV1xp.js";import"./wallet-B-Jnzj-V.js";import"./zoom-in-B__wRO_I.js";const Ze=()=>{E();const{transactions:c,categories:p}=I(),[n,w]=h.useState(new Date),g=s=>{const r=C(s),m=z(s),l=c.filter(t=>!t.isDeleted&&B(new Date(t.date),{start:r,end:m})),f=l.filter(t=>t.type==="income").reduce((t,o)=>t+Number(o.amount),0),j=l.filter(t=>t.type==="expense").reduce((t,o)=>t+Number(o.amount),0),y=f-j,d={};l.filter(t=>t.type==="expense").forEach(t=>{const o=t.categoryId;t.splits?t.splits.forEach(i=>{d[i.categoryId]=(d[i.categoryId]||0)+Number(i.amount)}):o&&(d[o]=(d[o]||0)+Number(t.amount))});const M=Object.entries(d).map(([t,o])=>({id:t,amount:o,name:p.find(i=>i.id===t)?.name||"Unknown",icon:p.find(i=>i.id===t)?.icon,color:p.find(i=>i.id===t)?.color})).sort((t,o)=>o.amount-t.amount).slice(0,5),S=l.filter(t=>t.type==="expense").sort((t,o)=>Number(o.amount)-Number(t.amount))[0];return{income:f,expense:j,savings:y,topCategories:M,largestExpense:S,count:l.length}},a=h.useMemo(()=>g(n),[n,c]),x=h.useMemo(()=>g(v(n)),[n,c]),u=s=>{w(r=>s>0?O(r,1):v(r))},b=a.expense-x.expense,k=x.expense>0?Math.round(b/x.expense*100):0;return e.jsx(L,{title:"Monthly Overview",showBack:!0,rightNode:e.jsxs("div",{className:"flex items-center gap-1 bg-slate-50 dark:bg-slate-900 rounded-2xl p-1 border border-slate-200 dark:border-slate-800",children:[e.jsx(N,{variant:"prev",onClick:()=>u(-1),size:"sm",className:"bg-transparent hover:bg-slate-200 dark:hover:bg-slate-800"}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest min-w-[64px] text-center text-slate-700 dark:text-slate-200",children:D(n,"MMM yy")}),e.jsx(N,{variant:"forward",onClick:()=>u(1),size:"sm",className:"bg-transparent hover:bg-slate-200 dark:hover:bg-slate-800"})]}),children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center py-6 bg-white dark:bg-slate-900 rounded-[2.5rem] border border-slate-100 dark:border-slate-800 shadow-sm",children:[e.jsx("p",{className:"text-slate-400 dark:text-slate-500 text-[10px] font-black uppercase tracking-[0.2em] mb-1",children:"Net Savings"}),e.jsxs("h2",{className:`text-4xl font-black tracking-tightest leading-tight ${a.savings>=0?"text-emerald-500":"text-rose-500"}`,children:[a.savings>=0?"+":"","₹",a.savings.toLocaleString()]})]}),e.jsx("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-3xl shadow-xl shadow-slate-200/50 dark:shadow-none border border-slate-100 dark:border-slate-800",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm font-bold mb-1",children:[e.jsx("span",{className:"text-slate-500",children:"Income"}),e.jsxs("span",{className:"text-emerald-500",children:["₹",a.income.toLocaleString()]})]}),e.jsx("div",{className:"h-2 w-full bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-emerald-500 rounded-full",style:{width:"100%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm font-bold mb-1",children:[e.jsx("span",{className:"text-slate-500",children:"Expense"}),e.jsxs("span",{className:"text-red-500",children:["₹",a.expense.toLocaleString()]})]}),e.jsx("div",{className:"h-2 w-full bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-red-500 rounded-full",style:{width:`${a.income>0?Math.min(a.expense/a.income*100,100):100}%`}})})]})]})}),e.jsxs("div",{className:"bg-indigo-500 text-white p-6 rounded-3xl shadow-xl shadow-indigo-500/30 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full blur-3xl -mr-8 -mt-8 pointer-events-none"}),e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(A,{className:"w-5 h-5 text-indigo-200"}),"Insights"]}),e.jsxs("div",{className:"space-y-3 relative z-10",children:[e.jsx("div",{className:"p-3 bg-white/10 rounded-2xl backdrop-blur-sm",children:e.jsxs("p",{className:"text-sm font-medium",children:["You spent ",e.jsxs("span",{className:"font-bold",children:[Math.abs(k),"% ",b>0?"more":"less"]})," than last month."]})}),a.largestExpense&&e.jsxs("div",{className:"p-3 bg-white/10 rounded-2xl backdrop-blur-sm",children:[e.jsx("p",{className:"text-xs text-indigo-200 uppercase font-bold mb-1",children:"Largest Expense"}),e.jsx("p",{className:"font-bold text-sm truncate",children:a.largestExpense.note||"Unknow Expense"}),e.jsxs("p",{className:"text-xs text-indigo-100",children:["₹",Number(a.largestExpense.amount).toLocaleString()]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-900 dark:text-white mb-4 pl-2",children:"Top Spending"}),e.jsxs("div",{className:"space-y-3",children:[a.topCategories.map(s=>{let r=s.icon;r||(s.name==="Food & Dining"?r="Utensils":s.name==="Transport"?r="Bus":s.name==="Shopping"?r="ShoppingBag":s.name==="Bills & Utilities"?r="Zap":s.name==="Salary"?r="IndianRupee":s.name==="Savings Allocation"?r="Wallet":r="HelpCircle");const m=U[r];return e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-800 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-lg ${s.color?s.color+"/20":"bg-slate-100"} ${s.color?.replace("bg-","text-")||"text-slate-500"}`,children:m?e.jsx(m,{className:"w-5 h-5 opacity-90"}):s.name[0]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-slate-900 dark:text-white",children:s.name}),e.jsxs("p",{className:"text-xs text-slate-400",children:[Math.round(s.amount/a.expense*100),"% of total"]})]})]}),e.jsxs("p",{className:"font-bold text-slate-900 dark:text-white",children:["₹",s.amount.toLocaleString()]})]},s.id)}),a.topCategories.length===0&&e.jsx("p",{className:"text-center text-slate-400 text-sm py-4",children:"No spending data for this month."})]})]})]})})};export{Ze as default};
