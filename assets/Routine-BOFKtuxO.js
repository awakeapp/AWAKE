const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/UnlockDayModal-CIFcZGP0.js","assets/main-3d8nIXVI.js","assets/main-r2rg2KXg.css","assets/Input-ThmiqobF.js"])))=>i.map(i=>d[i]);
import{k as T,l as I,n as L,r as l,j as e,D as H,p as A,B as k,_ as F}from"./main-3d8nIXVI.js";import{D as U,R as _,a as G,b as B,T as P,U as V}from"./DateHeader-BeVnKMps.js";import{L as Y,P as N,a as z}from"./pen-Bz-6SZPs.js";import"./TaskItem-BzxZv3Dz.js";import"./flame-CB_Pt27c.js";import"./bike-BPDu21_F.js";import"./trash-2-DKLusUww.js";import"./circle-check-big-CLS33Gi7.js";import"./chevron-up-Cb1NGLJd.js";import"./subMonths-5LImRCje.js";import"./isSameMonth-DaEmLz0p.js";import"./Card-DWrmFR-O.js";import"./plus-DhGkUSsp.js";import"./circle-alert-Cg6HcWYA.js";import"./smartphone-Cp-Lf5GC.js";import"./star-CHDGUVA1.js";import"./trending-up-DLVm3-f3.js";import"./award-BXmd94lC.js";const q=l.lazy(()=>F(()=>import("./UnlockDayModal-CIFcZGP0.js"),__vite__mapDeps([0,1,2,3]))),xe=()=>{const{dailyData:t,updateTaskStatus:j,updateHabit:y,updateAllTasks:J,isLocked:o,submitDay:O,unlockDay:g}=T(),{isPast:c}=I();L();const[E,d]=l.useState(!1),[v,f]=l.useState(!1),[R,m]=l.useState(!1),[K,Q]=l.useState({"EARLY MORNING":!0,"BEFORE NOON":!0,"AFTER NOON":!0,"EVE/NIGHT":!0}),[p,u]=l.useState({isOpen:!1,type:"success",category:""}),[h,w]=l.useState(!0);if(!t||!t.tasks)return e.jsx("div",{className:"flex items-center justify-center min-h-[50vh]",children:e.jsx(Y,{className:"w-8 h-8 animate-spin text-primary-500"})});const b={"EARLY MORNING":t.tasks.filter(s=>s.category==="EARLY MORNING"),"BEFORE NOON":t.tasks.filter(s=>s.category==="BEFORE NOON"),"AFTER NOON":t.tasks.filter(s=>s.category==="AFTER NOON"),"EVE/NIGHT":t.tasks.filter(s=>s.category==="EVE/NIGHT"||s.category==="NIGHT")},x=l.useRef({});l.useEffect(()=>{if(!t?.tasks||c)return;const s={};if(Object.entries(b).forEach(([a,i])=>{if(i.length===0){s[a]="empty";return}const r=i.every(n=>n.status==="checked"),D=i.every(n=>n.status==="checked"||n.status==="missed");r?s[a]="success":D?s[a]="failed":s[a]="incomplete"}),h){x.current=s,w(!1);return}Object.entries(s).forEach(([a,i])=>{const r=x.current[a]||"incomplete";i!==r&&(r==="incomplete"&&i==="success"?u({isOpen:!0,type:"success",category:a}):r==="incomplete"&&i==="failed"&&u({isOpen:!0,type:"troll",category:a}))}),x.current=s},[t.tasks,c,h]);const M=()=>{d(!0)},S=async s=>{await O(s),d(!1)},C=s=>{g(s),m(!1)};return e.jsxs("div",{className:"pb-24",children:[e.jsx("div",{className:"sticky top-[60px] z-20 bg-white/80 dark:bg-slate-950/80 backdrop-blur-md pt-3 pb-3 mb-4 border-b border-slate-200 dark:border-slate-800 -mx-4 px-4",children:e.jsx(U,{className:"mb-0"})}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-2xl px-5 py-4 mb-6 flex items-center justify-between transition-all duration-150",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-slate-100 dark:bg-slate-800 p-2.5 rounded-xl text-slate-500",children:e.jsx(H,{className:"w-5 h-5 stroke-[1.5]"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-[15px] font-semibold text-slate-700 dark:text-slate-200 tracking-tight",children:"Daily Routine"}),e.jsxs("p",{className:"text-[11px] text-slate-400 font-medium mt-0.5",children:[t.tasks.filter(s=>s.status==="checked").length,"/",t.tasks.length," Completed"]})]})]}),e.jsx("button",{onClick:()=>f(!0),className:A("text-slate-400 hover:text-indigo-600 transition-colors p-2",o&&"hidden"),"aria-label":"Edit Routine",children:e.jsx(N,{className:"w-4 h-4 stroke-[1.5]"})})]}),e.jsxs("div",{className:"space-y-6",children:[Object.entries(b).map(([s,a])=>e.jsx(_,{title:s,tasks:a,onUpdateStatus:j,isLocked:o},s)),e.jsx(G,{habits:t.habits,onUpdateHabit:y,isLocked:o}),o?e.jsxs("div",{className:"text-center p-6 bg-slate-100 rounded-2xl dark:bg-slate-900 border border-slate-200 dark:border-slate-800",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2 mb-4",children:[e.jsx("div",{className:"bg-slate-200 p-4 rounded-full dark:bg-slate-800",children:e.jsx(z,{className:"w-8 h-8 text-slate-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300",children:"Day Locked"}),e.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"This day is completed and read-only."})]})]}),t.locked&&!c&&e.jsxs(k,{variant:"outline",onClick:()=>m(!0),className:"w-full sm:w-auto",children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),"Edit Day"]})]}):e.jsx(k,{className:"w-full py-4 text-base font-semibold transition-all duration-150 active:scale-[0.98]",onClick:M,children:"Complete Day"})]}),e.jsx(B,{isOpen:E,onClose:()=>d(!1),data:t,onConfirm:S}),e.jsx(P,{isOpen:v,onClose:()=>f(!1),tasks:t.tasks}),e.jsx(V,{isOpen:p.isOpen,onClose:()=>u(s=>({...s,isOpen:!1})),type:p.type,category:p.category}),e.jsx(l.Suspense,{fallback:null,children:e.jsx(q,{isOpen:R,onClose:()=>m(!1),onConfirm:C})})]})};export{xe as default};
